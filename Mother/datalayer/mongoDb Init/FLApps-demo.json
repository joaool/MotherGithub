var x;
var y;
var nbCusts=50;
var nbOrders=100;
var nbLinesPerOrder=3;
var nbProds=10;

// Collection Customers
var rsl = entityAdd("Customer", "Customers", "All my customers");
x = rsl.j.cn;
fieldAdd(x, "name", "name of customer","textBox");
fieldAdd(x, "city", "where the customer live","textBox");
fieldAdd(x, "phone", "phone","textBox");
for (i=0; i<nbCusts; i++){
	var j={};
	j["_id"]=i;
	j[new String(x+1)]= "Client-"+ i;
	j[new String(x+2)]= "City "+ i;
	j[new String(x+3)]= "0033 "+ i+i+i+i;
	
	dataInsert(x, j);
}

var rsl = entityAdd("Order", "Orders", "Order collection");
x=rsl.j.cn;
fieldAdd(x, "date", "order's date", "textBox");
fieldAdd(x, "amount","total amount", "textBox");
fieldAdd(x, "shipped", "is it shipped", "textBox");

var rsl = entityAdd("OrderLine", "OrderLines", "Lines of orders");
y=rsl.j.cn;
fieldAdd(y, "quantity", "quantity ordered", "textBox");
fieldAdd(y, "product", "product ID (not linked)", "textBox");
fieldAdd(y, "price", "total price", "textBox");

for (i=1; i<nbOrders; i++) {
	dt=new Date("2014/03/27");
	var j={};
	j["_id"] = i;
	j[new String (x+1)]= dt;
	j[new String (x+2)]= 123456.45;
	j[new String (x+3)]= false;
	dataInsert(x, j);
	
	for (k=1; k<nbLinesPerOrder; k++){
		var jl={};
		jl[new String(y+1)]=k;
		jl[new String(y+2)]="prod-"+(i+k);
		jl[new String(y+3)]=123.45;
		
		dataInsert(y, jl);
	}
}


var rsl = entityAdd("Product", "Products", "Calalog");
x=rsl.j.cn;
fieldAdd(x, "name", "product name", "textBox");
fieldAdd(x, "family", "product family", "textBox");
fieldAdd(x, "price", "product price", "textBox");

for (i=1; i<nbProds; i++) {
	var j={};
	var ty = i % 4;
	j["_id"]=i;
	j[new String(x+1)]="prod-"+i;
	j[new String(x+2)]="test-" + ty; 
	j[new String(x+3)]=456.98;

	dataInsert(x, j);
}


entityGet( {"entityCN":"00"} );
// get an array of user defined Entity
entityGetAll( {$where:"this._id.length > 1"} );
