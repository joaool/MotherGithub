var x;
var nbCusts=50;
var nbOrders=100;
var nbProds=10;

// Collection Customers
var rsl = entityAdd("Customer", "Customers", "All my customers");

/*
x = 
    fieldAdd("00", "name", "name of customer","textBox");
    fieldAdd("00", "city", "where the customer live","textBox");
    fieldAdd("00", "phone", "phone","textBox");

for (i=0; i<nbCusts; i++){
	var j={};
	j[_id]=i;
	j[new String(x+1)]= "Client-"+ i;
	j[new String(x+2)]= "City "+ i;
	j[new String(x+3)]= "0033 "+ i+i+i+i;
	
	dataInsert(x, j);
}


//Eid:4
var y = createNewCollection("Order", "Orders", "Order collection");
createNewField(y, "date");
createNewField(y, "amount");
createNewField(y, "shipped");
createNewField(y, "lines");
createNewField(y, "qty");
createNewField(y, "product");
createNewField(y, "price");
db.Master_4.ensureIndex( {"j.3.5":1 } );

for (i=1; i<nbOrders; i++) {
	dt=new Date("2014/03/27");
	j={	_id: i,
		"0":dt,
		"1":123456.45,
		"2":"no",
		"3": [
		    {"4":"10","5":"prod-"+i,"6":123.00},
		    {"4":"1","5":"prod-" + i*i/100,"6":13.00},
		    {"4":"5","5":"apple","6":56.00}
		    ]
	    };
	print (j);
	dataAdd(y, j);
}

//Eid:5
var z = createNewCollection("Product", "Products", "Calalog");
createNewField(z, "name");
createNewField(z, "family");
createNewField(z, "price");

for (i=1; i<nbProds; i++) {
	j={_id:i, "0": "test", "1":"prod-"+i, "2":"123.00"};
	dataAdd(z, j);
}

createNewRelation("Customer to Order", 
	{	"2":"0",
		"3":x,
		"4":"ordered",
		"5":"1",
		"7":true,
		"6":[{"cached":"false"}, {"format":[{"0":1}]} ]
	},
	{	"2":"1",
		"3":y,
		"4":"was ordered by",
		"5":"N",
		"7":false,
		"6":[{"cached":"false"}, {"format":[{"0":1}]} ]
	}	);

var dt;

createNewRelation("Product to Order", 
	{	"2":"0",
		"3":z,
		"4":"ordered in",
		"5":"1",
		"7":false,
		"6":[{"cached":"false"}, {"format":[{"0":1}]} ]
	},
	{	"2":"1",
		"3":y,
		"4":"order",
		"5":"N",
		"7":true,
		"6":[{"cached":"false"}, {"format":[{"0":1}]} ]
	}	);

var dt;
*/

entityGet( {"entityCN":"00"} );
// get an array of user defined Entity
entityGetAll( {$where:"this._id.length > 1"} );
