{"version":3,"sources":["element_holder.js"],"names":[],"mappings":"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","file":"element_holder-compiled.js","sourcesContent":["FormDesigner.Views.ElementHolder = Backbone.View.extend({\r\n    model : null,\r\n    dragNDropHandler : null,\r\n    propertiesPanel : null,\r\n    currentHoverElement : null,\r\n    elementCount : 0,\r\n    droppedElements : [],\r\n    entityLoaded : null,\r\n    modelsCollection : null,\r\n    \r\n    initialize: function(){\r\n        this.propertiesPanel = new FormDesigner.Views.PropertyPanel({el : \"#properties\"});\r\n        this.listenTo(this.propertiesPanel,FormMaker.Events.PropertyChange,this.onPropertyChange);\r\n        this.listenTo(this.propertiesPanel,FormMaker.Events.TypeChange,this.onTypeChange);\r\n\r\n        this.model = new FormDesigner.Models.DesignerModel();\r\n        $(\".menuItem\").on(\"click\",this.onMenuItemClick.bind(this))\r\n\r\n        this.modelsCollection = new Elements();\r\n        // this.$(\"#fieldstemp\").html((Handlebars.compile($(\"#tempTemplate\").html()))());\r\n        this.bindDraggableObject();\r\n    },\r\n    bindDraggableObject : function(){\r\n        this.dragNDropHandler = new DragNDrop();\r\n        oDragNDrop = DragNDrop.getInstance();\r\n        oDragNDrop.setDroppableObject({droppableSelectors : [{\r\n\t\t\t\t\t\t\t\t\t\t\tdroppable : \".ui-dropppable\"\r\n\t\t\t\t\t\t\t\t\t\t\t}],\r\n\t\t\t\t\t\t\t\t\t  });\r\n        oDragNDrop.setDraggableObject({draggableSelectors : [{\r\n\t\t\t\t\t\t\t\t\t\t\t   draggable : \".ui-draggable\"\r\n\t\t\t\t\t\t\t\t\t\t  }],\r\n\t\t\t\t\t\t\t\t\t\t helper : \"clone\",\r\n\t\t\t\t\t\t\t\t\t\t helperCss : '',\r\n\t\t\t\t\t\t\t\t\t\t revert : this.OnRevert,\r\n\t\t\t\t\t\t\t\t\t\t OnStartCallBack : this.OnStart.bind(this),\r\n\t\t\t\t\t\t\t\t\t\t OnStopCallBack : this.OnStop.bind(this)\r\n\t\t\t\t\t\t\t\t\t  });\r\n\r\n        this.ApplySortingEvent();\r\n    },\r\n    onMenuItemClick: function(e){\r\n        if (e.currentTarget.id == \"delete\"){\r\n            if (FormMaker.CurrentElement){\r\n                this.removeElement(FormMaker.CurrentElement);\r\n\r\n            }\r\n        }\r\n    },\r\n    OnStart : function(event, ui){\r\n\t\tconsole.log(\"Drag Started\");\r\n\t},\r\n\tOnStop : function(event, ui){\r\n\t\tconsole.log(\"Drop End\");\r\n        //this.onDrop(event.target,ui.item[0]);\r\n\t},\r\n\tOnRevert : function(dropped){\r\n\t\tconsole.log(dropped);\r\n\t\treturn dropped;\r\n\t},\r\n    ApplySortingEvent : function(){\r\n\t\tvar temp = this;\r\n    $( \".sortable\" ).sortable();\r\n    $( \".sortable\" ).sortable(\"destroy\");\r\n\t\t$( \".sortable\" ).sortable({\r\n\t\t\tconnectWith : \".sortable\",\r\n\t\t \tplaceholder: \"ui-state-highlight\",\r\n\t\t\ttolerance: \"pointer\",\r\n\t\t\tstop : function(event, ui){\r\n\t\t\t\ttemp.onDrop(event.target,ui.item[0]);\r\n\t\t\t},\r\n\t\t\tbeforeStop : function(event, ui){\r\n\t\t\t\ttemp.DroppedObjectOnMove = ui.helper;\r\n\t\t\t},\r\n            update: (function(event, ui){\r\n                var droppedObject = ui.item[0];\r\n                var alignment = event.target.id == \"designerCol1\" ? \"left\" : \"right\";\r\n                var cname = $(droppedObject).attr(\"id\");\r\n                if (cname){\r\n                    var element = this.modelsCollection.where({\"id\" : cname})[0];\r\n                    element.set(\"alignment\", alignment);\r\n                }\r\n            }).bind(this)\r\n\t\t});\r\n\t\t//$( \".sortable\" ).disableSelection();\r\n\t},\r\n    ApplyHoverEvent : function(){\r\n\t\tvar temp = this;\r\n\t\t$(\".droppedObject\").hover(function(obj){\r\n\t\t\t\t\t\t\t\ttemp.OnHoverIn(obj.currentTarget)\r\n\t\t\t\t\t\t\t},function(obj){});\r\n\t},\r\n\r\n\tOnHoverIn : function(obj){\r\n\t\tvar element = this.model.getElement($(obj).attr(\"cname\"));\r\n        this.currentHoverElement = obj;\r\n\t\t//this.m_PropertyToolbar.setElement(obj);\r\n\t},\r\n    onDrop : function(target,droppedObject){\r\n        if ($(droppedObject).hasClass(\"dropped\")) return;\r\n        var cname = $(droppedObject).attr(\"cname\");\r\n        var elementType =  FormMaker.DBElements[$(droppedObject).data(\"type\")];\r\n        var inputType = FormMaker.DBType[$(droppedObject).data(\"input-type\")];\r\n        var leftLabel = $(droppedObject).data(\"label\");\r\n        var name = $(droppedObject).data(\"name\");\r\n        var dropDownEnum = $(droppedObject).data(\"enum\");\r\n        var description = $(droppedObject).data(\"description\");\r\n        var id = this.getNextId();\r\n        var fieldName = FL.dd.t.entities[this.entityLoaded.csingular].getFieldCName(name);\r\n        var alignment = target.id == \"designerCol1\" ? \"left\" : \"right\";\r\n        \r\n        var element = {\r\n            \"element\" : elementType || FormMaker.Elements.Text,\r\n            \"leftLabel\" : leftLabel,\r\n            \"name\" : name,\r\n            \"type\" : inputType,\r\n            \"value\" : dropDownEnum,\r\n            \"id\" : id,\r\n            \"fieldName\" : fieldName\r\n        };\r\n        if (cname){\r\n            element = this.model.getElement(cname);\r\n            element = jQuery.extend(true,{},element);\r\n            var id = this.getNextId();\r\n            element.id = id;\r\n            element.cname = cname;\r\n        }\r\n        element.entityName = this.entityLoaded.csingular;\r\n        element.alignment = alignment;\r\n        \r\n        this.addElement(target.id,element);\r\n        $(droppedObject).remove();\r\n    },\r\n    addElement: function(id,element){\r\n        var obj = new FormMaker[element.element]({el : \"#\"+id,model : element});\r\n        this.listenTo(obj, FormMaker.Events.ElementClick,this.onElementClick.bind(this));\r\n        this.listenTo(obj, FormMaker.Events.ValueChange,this.onValueChange.bind(this));\r\n        obj.loadData(element);\r\n        obj.setParent(\"#\"+id);\r\n        obj.render();\r\n        this.droppedElements[element.id] = obj;\r\n        this.modelsCollection.set(obj.getModel(),{remove:false});\r\n        \r\n\t\tthis.propertiesPanel.setElementProperties(element);\r\n        this.setTypeField(element);\r\n        $(\"body\").css(\"cursor\",\"default\");\r\n\t},\r\n    onValueChange: function(data){\r\n        this.propertiesPanel.setElementProperties(data);\r\n    },\r\n    onElementClick: function(data){\r\n        this.propertiesPanel.setElementProperties(data);\r\n        this.setTypeField(data);\r\n    },\r\n    onTypeChange: function(data){\r\n        var elementView = this.droppedElements[data.id];\r\n        if (!elementView) return;\r\n        var model = elementView.getModel();\r\n        model.set(\"element\", data.value);\r\n\r\n        var obj =  new FormMaker[data.value]({el : elementView.getParentSelector(),model : model});\r\n        this.listenTo(obj, FormMaker.Events.ElementClick,this.onElementClick.bind(this));\r\n        this.listenTo(obj, FormMaker.Events.ValueChange,this.onValueChange.bind(this));\r\n        obj.loadData(model.toJSON());\r\n        obj.renderBefore(elementView);\r\n\r\n        this.removeElement(elementView)\r\n        this.droppedElements[data.id] = obj;\r\n        this.modelsCollection.set(obj.getModel(),{remove:false});\r\n        this.propertiesPanel.setElementProperties(model.toJSON());\r\n    },\r\n    setTypeField: function(data){\r\n        this.$(\"#type #Type\" + data.element).prop(\"checked\",true);\r\n    },\r\n    removeElement: function(element){\r\n        element.remove()\r\n        delete this.droppedElements[element.model.get(\"id\")];\r\n        this.modelsCollection.remove(element.model);\r\n        this.propertiesPanel.setElementProperties({});\r\n    },\r\n    getNextId : function(){\r\n        return \"Element\" + (++this.elementCount);\r\n    },\r\n    onPropertyChange: function(data){\r\n        var elementView = this.droppedElements[data.id];\r\n        if (elementView)\r\n            elementView.update(data);\r\n        this.modelsCollection.set(elementView.getModel(),{remove:false});\r\n    },\r\n    save: function(){\r\n        this.modelsCollection.saveToDB();\r\n        var left = this.modelsCollection.where({\"alignment\" : \"left\"})\r\n                    .reduce(function(prev,curr){\r\n                        var json = curr.toJSON();\r\n                        var jsonToSave = {\r\n                            fCN : json.fieldName,\r\n                            leftLabel : json.leftLabel,\r\n                            alignment : json.alignment\r\n                        };\r\n                        prev.push(jsonToSave);\r\n                        return prev;\r\n                    },[]);\r\n        var right = this.modelsCollection.where({\"alignment\" : \"right\"})\r\n                    .reduce(function(prev,curr){\r\n                        var json = curr.toJSON();\r\n                        var jsonToSave = {\r\n                            fCN : json.fieldName,\r\n                            leftLabel : json.leftLabel,\r\n                            alignment : json.alignment\r\n                        };\r\n                        prev.push(jsonToSave);\r\n                        return prev;\r\n                    },[]);\r\n        var form = {\r\n            \"eCN\" : this.entityLoaded.csingular,\r\n            \"left\" : left, \r\n            \"right\" : right\r\n        }\r\n        return form;\r\n    },\r\n    setEntity: function(entity){\r\n        this.entityLoaded = entity;\r\n    },\r\n    loadJson: function(data){\r\n        var leftElements = data.left;\r\n        var rightElements = data.right;\r\n        $.each(leftElements,(function(i,element){\r\n            this.addElement(\"designerCol1\",element);\r\n        }).bind(this));\r\n        $.each(rightElements,(function(i,element){\r\n            this.addElement(\"designerCol2\",element);\r\n        }).bind(this))\r\n    }\r\n});\r\n"]}