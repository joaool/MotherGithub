{"version":3,"sources":["FLAPI.js"],"names":[],"mappings":"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","file":"FLAPI-compiled.js","sourcesContent":["// jQuery(document).ready(function($){\r\n/**\r\n * data dictionary UI methods\r\n */\r\n    // FL = FL || {}; //gives undefined if FL is undefined \r\n    // FL = {};\r\n    // // a=\"A\";\r\n    // b=\"B\";\r\n    // var a = (typeof a === 'undefined') ? b : a;//if a is defined returns \"A\" otherwise returns the content of b\r\n    // alert(\"zzz=\"+a);//sets \"B\"\r\n\r\nFL = (typeof FL === 'undefined') ? {} : FL;\r\nFL[\"API\"] = (function () {//name space FL.API\r\n    var internalTest = function (x) {//\r\n        alert(\"internalTest() -->\" + x);\r\n    };\r\n    var tokenClear = function () {\r\n        token = {\r\n            \"clientName\": null,\r\n            \"userName\": null,\r\n            \"userPassWord\": null,\r\n            \"domainName\": null,\r\n            \"dbName\": null,\r\n            // \"fl\":fl, //to maintain from start to end\r\n            // \"fa\":fa,\r\n            \"appDef\": null,\r\n            \"appDescription\": null,\r\n            \"appMenuLevel\": null,\r\n            \"appRestrictions\": null,\r\n            \"error\": null\r\n        };\r\n        return token;\r\n    };\r\n    //-------- PROMISE WRAPPERS ------------------\r\n    var _applicationFullCreate = function (jsonParam) {\r\n        //ex _applicationFullCreate({\"adminName\": \"nico@framelink.co\", \"adminPassWord\": \"coLas\"}, function (err, myApp){\r\n        FL.common.printToConsole(\"....................................>beginning _applicationFullCreate....\");\r\n        var def = $.Deferred();\r\n        // var fl = new flMain();//FL.server.fl\r\n        var fl = FL.fl;\r\n        var fa = new fl.app();\r\n        // fl.setTraceClient(2);\r\n        fl.applicationFullCreate(jsonParam, function (err, myApp) {\r\n            // fl.applicationFullCreate({\"adminName\": \"joao@framelink.co\", \"adminPassWord\": \"oLiVeIrA\"}, function (err, myApp){\r\n            // err = \"abc\";\r\n            if (err) {\r\n                FL.login.token = tokenClear();\r\n                // FL.login.token = {\r\n                // \t\"clientName\":null,\r\n                // \t\"userName\":null,\r\n                // \t\"userPassWord\":null,\r\n                // \t\"domainName\":null,\r\n                // \t\"dbName\":null,\r\n                // \t// \"fl\":fl, //to maintain from start to end\r\n                // \t// \"fa\":fa,\r\n                // \t\"appDef\":null,\r\n                // \t\"appDescription\":null,\r\n                // \t\"appMenuLevel\":null,\r\n                // \t\"appRestrictions\":null,\r\n                // \t\"error\":null\t\t\t\t\t\t\r\n                // };\r\n                FL.common.printToConsole(\"=================================>ERROR ON _applicationFullCreate err=\" + err);\r\n                def.reject(\"ERROR ON _applicationFullCreate err=\" + err);\r\n            } else {\r\n                // myAppFC=myApp;\r\n                FL.common.printToConsole(\"....................................>_applicationFullCreate RESPONSE OK ON _applicationFullCreate....\");\r\n                FL.login.token = {\r\n                    \"clientName\": myApp.clientName,\r\n                    \"userName\": myApp.userName,\r\n                    \"userPassWord\": myApp.userPassWord,\r\n                    \"domainName\": myApp.domainName,\r\n                    \"dbName\": myApp.dbName,\r\n                    \"fl\": fl,\r\n                    \"fa\": fa,\r\n                    \"appDef\": null,\r\n                    \"appDescription\": null,\r\n                    \"appMenuLevel\": null,\r\n                    \"appRestrictions\": null,\r\n                    \"error\": null\r\n                };\r\n                def.resolve();\r\n            }\r\n        });\r\n        return def.promise();\r\n    };\r\n    var _login = function () {//notice that login can be done without any application =>FL.login.token.appDef = null;\r\n        FL.common.printToConsole(\"....................................>beginning _login....\");\r\n        var def = $.Deferred();\r\n        var fl = FL.fl; //new flMain();\r\n        // var fa = new fl.app();\r\n        // var currentURL =window.location.href;\r\n        // var server = FL.common.stringAfterLast(currentURL,\"//\");\r\n        // server = FL.common.stringBeforeFirst(server,\"/\");\r\n        // // alert(server);\r\n        // if (server ==\"localhost\")\r\n        // \tserver = \"test.framelink.co\";\r\n        fl.serverName(FL.common.getServerName());\r\n        if (fl.getsId() != undefined) {//if getsId() has a session number it is connected !. We need to disconnect\r\n            var disconnectPromise = _disconnect();\r\n            disconnectPromise.done(function () {\r\n                FL.dd.clear();\r\n                fl.login({\r\n                    \"username\": FL.login.token.userName,\r\n                    \"password\": FL.login.token.userPassWord,\r\n                    \"domain\": FL.login.token.domainName\r\n                }, function (err, data) {\r\n                    // err = \"abc\";\r\n                    if (err) {\r\n                        // alert(\"ERROR ON _login\");\r\n                        FL.common.printToConsole(\"============================>ERROR ON _login\");\r\n                        FL.login.token.error = \"_login\";\r\n                        return def.reject(\"ERROR ON _login err=\" + err);\r\n                    } else {\r\n                        var appDef = data.applications[0];//it has a single application because it was just created\r\n                        if (appDef) {\r\n                            FL.common.printToConsole(\"....................................>fl.login RESPONSE OK ON _login....\");\r\n                            FL.login.token.appDef = appDef;\r\n                            FL.login.token.appDescription = appDef.description;\r\n\r\n\r\n                            return def.resolve();\r\n\r\n                        } else {\r\n                            FL.login.token.appDef = null;\r\n                            FL.login.token.appDescription = null;\r\n                            FL.common.printToConsole(\"....................................>fl.login RESPONSE OK ON _login but ERROR:no application available....\");\r\n                            return def.reject(\"no application available\");\r\n                        }\r\n                    }\r\n                });\r\n\r\n            });\r\n            disconnectPromise.fail(function () {\r\n                def.reject(\"disconnect failed inside _login\");\r\n            });\r\n        } else {\r\n            FL.dd.clear();\r\n            fl.login({\r\n                \"username\": FL.login.token.userName,\r\n                \"password\": FL.login.token.userPassWord,\r\n                \"domain\": FL.login.token.domainName\r\n            }, function (err, data) {\r\n                // err = \"abc\";\r\n                if (err) {\r\n                    // alert(\"ERROR ON _login\");\r\n                    FL.common.printToConsole(\"============================>ERROR ON _login\");\r\n                    FL.login.token.error = \"_login\";\r\n                    def.reject(\"ERROR ON _login err=\" + err);\r\n                } else {\r\n                    var appDef = data.applications[0];//it has a single application because it was just created\r\n                    if (appDef) {\r\n                        FL.common.printToConsole(\"....................................>fl.login RESPONSE OK ON _login....\");\r\n                        FL.login.token.appDef = appDef;\r\n                        FL.login.token.appDescription = appDef.description;\r\n                        return def.resolve();\r\n                    } else {\r\n                        FL.login.token.appDef = null;\r\n                        FL.login.token.appDescription = null;\r\n                        FL.common.printToConsole(\"....................................>fl.login RESPONSE OK ON _login but ERROR:no application available....\");\r\n                        return def.reject(\"no application available\");\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        return def.promise();\r\n    };\r\n    var _connect = function () {\r\n        // ex jsonParam = {\"username\": myApp.userName, \"password\": myApp.userPassWord, \"domain\": myApp.domainName}\r\n        FL.common.printToConsole(\"....................................>beginning _connect....\");\r\n        var def = $.Deferred();\r\n        // var fl = FL.fl; //new flMain();\r\n        var fa = FL.login.token.fa;//new fl.app();\r\n        fa.connect(FL.login.token.appDef, function (err, data2) {\r\n            // err = \"abc\";\r\n            if (err) {\r\n                FL.common.printToConsole(\"=============================>ERROR ON _connect\");\r\n                FL.login.token.error = \"_connect\";\r\n                def.reject(err);\r\n            } else {\r\n                FL.common.printToConsole(\"....................................>fa.connect RESPONSE OK ON _connect....\");\r\n                FL.login.token.dbName = FL.login.token.appDef.dbName;\r\n                // alert(\"OK USER CREATED AND CONNECTED  ->\"+JSON.stringify(FL.login.token));\r\n                FL.common.printToConsole(\"=====================================>_connect: OK USER CONNECTED  ->\" + JSON.stringify(FL.login.token));\r\n                var md = new FL.fl.mandrill();\r\n                md.init({key: FL.common.getMandrillKey()}, function (err, data) {\r\n                    if (err) {\r\n                        alert(\"_connect --> error in Mandrill initialization \");\r\n                        return def.reject(\"_connect --> error in Mandrill initialization\");\r\n                    } else {\r\n                        FL.common.printToConsole(\"_connect --> Mandrill initialization Successfull\");\r\n                        return def.resolve();\r\n                    }\r\n                });//call once\r\n            }\r\n        });\r\n        return def.promise();\r\n    };\r\n    var _disconnect = function () {\r\n        FL.common.printToConsole(\"....................................>beginning _disconnect....\" + JSON.stringify(FL.login.token));\r\n        var def = $.Deferred();\r\n        var fl = FL.fl;//new flMain();\r\n        var fa = FL.login.token.fa;//new fl.app();\r\n        // var fa = new fl.app();\r\n        // var fl= token.fl;\r\n        // var fa= token.fa;\r\n        fa.disconnect(function (err, data) {\r\n            FL.common.printToConsole(\".............................fa.disconnect ON _disconnect....\");\r\n            // err = \"abc\";\r\n            if (err) {\r\n                alert(\"ERROR ON _disconnect err=\" + err);\r\n                FL.common.printToConsole(\"======================>ERROR ON _disconnect err=\" + err);\r\n                def.reject(err);\r\n            } else {\r\n                FL.common.printToConsole(\"=====================================>_disconnect: OK USER DISCONNECTED  ->token=\" + JSON.stringify(FL.login.token));\r\n                def.resolve();\r\n            }\r\n        });\r\n        return def.promise();\r\n    };\r\n    var _isUserExist = function (userName) {\r\n        FL.common.printToConsole(\"....................................>beginning _isUserExist....\" + JSON.stringify(FL.login.token), \"API\");\r\n        var def = $.Deferred();\r\n        var fl = FL.fl;//new flMain();\r\n        // if(!fl){\r\n        // \tfl = new flMain();\r\n        // \tFL.fl = fl;\r\n        // }\t\t\r\n        fl.isUserExist({\r\n            \"adminName\": \"nico@framelink.co\",\r\n            \"adminPassWord\": \"coLas\",\r\n            \"userName\": userName\r\n        }, function (err, result) {\r\n            FL.common.printToConsole(\".............................fa.isUserExist ON _isUserExist....\");\r\n            // err = \"abc\";\r\n            if (err) {\r\n                // alert(\"ERROR ON _isUserExist err=\"+err);\r\n                FL.common.printToConsole(\"======================>ERROR ON _isUserExist err=\" + err);\r\n                def.reject(\"ERROR ON _isUserExist err=\" + err);\r\n            } else {\r\n                FL.common.printToConsole(\"=====================================>_isUserExist: OK \");\r\n                var exists = false;\r\n                if (result)\r\n                    exists = true;\r\n                def.resolve(exists);\r\n            }\r\n        });\r\n        return def.promise();\r\n    };\r\n    var _applicationRemove = function () {\r\n        var def = $.Deferred();\r\n        var fl = FL.fl; //new flMain();\r\n        // var fl = new flMain();\r\n        // var fa = FL.login.token.fa;//new fl.app();\r\n        fl.applicationRemove({\r\n            \"adminName\": FL.login.token.userName,\r\n            \"adminPassWord\": FL.login.token.userPassWord,\r\n            \"domain\": FL.login.token.domainName\r\n        }, function (err, data) {\r\n            FL.common.printToConsole(\"............................._applicationRemove....\");\r\n            // err = \"abc\";\r\n            if (err) {\r\n                alert(\"ERROR ON _applicationRemove err=\" + err);\r\n                FL.common.printToConsole(\"======================>ERROR ON _applicationRemove err=\" + err);\r\n                def.reject(err);\r\n            } else {\r\n                FL.login.token.appDef = null;\r\n                FL.common.printToConsole(\"=====================================>_applicationRemove: OK APPLICATION REMOVED  ->token=\" + JSON.stringify(FL.login.token));\r\n                def.resolve();\r\n            }\r\n        });\r\n        return def.promise();\r\n    };\r\n    var _applicationCreate = function (appDescription) {\r\n        var def = $.Deferred();\r\n        var fl = FL.fl; //new flMain();\r\n        // var fl = new flMain();\r\n        // var fa = FL.login.token.fa;//new fl.app();\r\n        fl.applicationCreate({\r\n            \"adminName\": FL.login.token.userName, \"adminPassWord\": FL.login.token.userPassWord, \"domainPrefix\": \"test\",\r\n            \"description\": appDescription\r\n        }, function (err, data) {\r\n            FL.common.printToConsole(\"............................._applicationCreate....\");\r\n            // err = \"abc\";\r\n            if (err) {\r\n                // alert(\"ERROR ON _applicationCreate err=\"+err);\r\n                FL.common.printToConsole(\"======================>ERROR ON _applicationCreate err=\" + err);\r\n                def.reject(\"ERROR ON _applicationCreate err=\" + err);\r\n            } else {\r\n                FL.login.token.appDef = data.d;\r\n                FL.login.token.domainName = data.d['domainName'];\r\n                FL.login.token.appDescription = appDescription;\r\n                FL.common.printToConsole(\"=====================================>_applicationCreate: OK APPLICATION CREATED  ->token=\" + JSON.stringify(FL.login.token));\r\n                def.resolve();\r\n            }\r\n        });\r\n        return def.promise();\r\n    };\r\n    var _clientRemove = function () {\r\n        var def = $.Deferred();\r\n        var fl = FL.fl; //new flMain();\r\n        var fa = FL.login.token.fa;//new fl.app();\r\n        fl.clientRemove({\r\n            \"adminName\": \"nico@framelink.co\",\r\n            \"adminPassWord\": \"coLas\",\r\n            \"clientName\": FL.login.token.clientName\r\n        }, function (err, data) {\r\n            // fl.clientRemove({\"adminName\": FL.login.token.userName, \"adminPassWord\": FL.login.token.userPassWord, \"clientName\": FL.login.token.clientName}, function (err, data){\r\n            FL.common.printToConsole(\"............................._clientRemove....\");\r\n            // err = \"abc\";\r\n            if (err) {\r\n                alert(\"ERROR ON _clientRemove err=\" + err);\r\n                FL.common.printToConsole(\"======================>ERROR ON _clientRemove err=\" + err);\r\n                def.reject(err);\r\n            } else {\r\n                var oldUserName = FL.login.token.userName;\r\n                FL.login.token = tokenClear();\r\n                // alert(\"_clientRemove DONE user=\" + oldUserName + \"was removed!  ->token=\"+JSON.stringify(FL.login.token));\r\n                FL.common.printToConsole(\"=====================================>_clientRemove DONE user=\" + oldUserName + \"was removed! ->token=\" + JSON.stringify(FL.login.token));\r\n                def.resolve();\r\n            }\r\n        });\r\n        return def.promise();\r\n    };\r\n    var _applicationFinalize = function (userName, appDescription) {\r\n        var def = $.Deferred();\r\n        FL.login.token.appDescription = \"application of user \" + userName;\r\n        if (appDescription)\r\n            FL.login.token.appDescription = appDescription;\r\n        var fl = FL.fl; //new flMain();\r\n        var fa = FL.login.token.fa;//new fl.app();\r\n        // fl.applicationFinalize({\"adminName\":\"nico@framelink.co\",\"adminPassWord\":\"coLas\",\r\n        // \t\t\"userName\":FL.login.token.userName,\"clientName\":FL.login.token.clientName,\"domainName\":FL.login.token.domainName,\r\n        // \t\t\"newUserName\":userName,\"newClientName\":userName,\r\n        // \t\t\"newDescription\":FL.login.token.appDescription}, function(err, data){\r\n        fl.applicationFinalize({\r\n            \"adminName\": FL.login.token.userName,\r\n            \"adminPassWord\": FL.login.token.userPassWord,\r\n            \"userName\": FL.login.token.userName,\r\n            \"clientName\": FL.login.token.clientName,\r\n            \"domainName\": FL.login.token.domainName,\r\n            \"newUserName\": userName,\r\n            \"newClientName\": userName,\r\n            \"newDescription\": FL.login.token.appDescription\r\n        }, function (err, data) {\r\n\r\n            FL.common.printToConsole(\"............................._applicationFinalize....with:\" + userName + \"/\" + appDescription);\r\n            // err = \"abc\";\r\n            if (err) {\r\n                // alert(\"ERROR ON _applicationFinalize err=\"+err);\r\n                FL.common.printToConsole(\"======================>ERROR ON _applicationFinalize err=\" + err);\r\n                var errMsg = \"ERROR ON _applicationFinalize err=\" + err;\r\n                var posIndex = err.indexOf(\"already exist\");//HACK this means that the error is because the user already exists\r\n                if (posIndex >= 0)\r\n                    errMsg = \"existing user ERROR \" + err;\r\n                def.reject(errMsg);\r\n            } else {\r\n                // FL.login.token = {\r\n                //\t\"clientName\":null,\r\n                //\t\"userName\":null,\r\n                //\t\"userPassWord\":null,\r\n                //\t\"domainName\":null,\r\n                //\t\"fl\":fl,\r\n                //\t\"fa\":fa,\r\n                //\t\"appDef\":null,\r\n                //\t\"appDescription\":null,\r\n                //\t\"appMenuLevel\":null,\r\n                //\t\"appRestrictions\":null,\r\n                //\t\"error\":\"fl.applicationFullCreate\"\r\n                //};\t\t\t\t\r\n                FL.login.token.clientName = userName;\r\n                FL.login.token.userName = userName;\r\n                // FL.login.token.userPassWord = null;\r\n                FL.common.printToConsole(\"=====================================>_applicationFinalize: OK ->token=\" + JSON.stringify(FL.login.token));\r\n                def.resolve();\r\n            }\r\n        });\r\n        return def.promise();\r\n    };\r\n    var _userChangePassWord = function (password) {\r\n        var def = $.Deferred();\r\n        var fl = FL.fl; //new flMain();\r\n        // var fl = new flMain();\r\n        // var fa = FL.login.token.fa;//new fl.app();\r\n        fl.userChangePassWord({\r\n            \"adminName\": \"nico@framelink.co\", \"adminPassWord\": \"coLas\",\r\n            \"userName\": FL.login.token.userName, \"userPassWord\": password\r\n        }, function (err, result) {\r\n            FL.common.printToConsole(\"............................._userChangePassWord....TO \" + password);\r\n            // err = \"abc\";\r\n            if (err) {\r\n                alert(\"ERROR ON _userChangePassWord err=\" + err);\r\n                FL.common.printToConsole(\"======================>ERROR ON _userChangePassWord err=\" + err);\r\n                def.reject(err);\r\n            } else {\r\n                FL.login.token.userPassWord = password;\r\n                FL.common.printToConsole(\"=====================================>_userChangePassWord: OK Password changed to \" + password + \"  ->token=\" + JSON.stringify(FL.login.token));\r\n                def.resolve();\r\n            }\r\n        });\r\n        return def.promise();\r\n    };\r\n    var _userChangeNameAndPassWord = function (newUserName, newPassword) { //XXXXXX\r\n        var def = $.Deferred();\r\n        var fl = FL.fl; //new flMain();\r\n        // var fl = new flMain();\r\n        // var fa = FL.login.token.fa;//new fl.app();\r\n        fl.userChangePassWord({\r\n            \"adminName\": \"nico@framelink.co\", \"adminPassWord\": \"coLas\",\r\n            \"userName\": FL.login.token.userName, \"userPassWord\": password\r\n        }, function (err, result) {\r\n            FL.common.printToConsole(\"............................._userChangePassWord....TO \" + password);\r\n            // err = \"abc\";\r\n            if (err) {\r\n                alert(\"ERROR ON _userChangePassWord err=\" + err);\r\n                FL.common.printToConsole(\"======================>ERROR ON _userChangePassWord err=\" + err);\r\n                def.reject(err);\r\n            } else {\r\n                FL.login.token.userPassWord = password;\r\n                FL.common.printToConsole(\"=====================================>_userChangePassWord: OK Password changed to \" + password + \"  ->token=\" + JSON.stringify(FL.login.token));\r\n                def.resolve();\r\n            }\r\n        });\r\n        return def.promise();\r\n    };\r\n    //-------- END OF LOGIN WRAPPERS ------------------\t\t\r\n\r\n    //-------- OTHER WRAPPERS ------------------\t\t\r\n    var _getFullDictionary = function () {\r\n        var def = $.Deferred();\r\n        var fl = FL.fl; //new flMain();\r\n        if (!fl) {\r\n            // FL.common.printToConsole(\"======================>ERROR ON _getFullDictionary ->no connection\");\r\n            def.reject(\"ERROR: no connection available\");\r\n        } else {\r\n            var fEnt = new fl.entity();\r\n            fEnt.getAllWithField({\"query\": {}}, function (err, entities) {\r\n                FL.common.printToConsole(\".............................fEnt.getAllWithField ON _getFullDictionary\");\r\n                // err = \"abc\";\r\n                if (err) {\r\n                    // alert(\"ERROR ON _getFullDictionary err=\"+err);\r\n                    FL.common.printToConsole(\"======================>ERROR ON _getFullDictionary err=\" + err);\r\n                    def.reject(err);\r\n                } else {\r\n                    FL.common.printToConsole(\"=====================================>_getFullDictionary: OK ->entites=\" + JSON.stringify(entities));\r\n                    def.resolve(entities);\r\n                }\r\n            });\r\n        }\r\n        return def.promise();\r\n    };\r\n    var _entity_update = function (json) {\r\n        //ex \tvar removeTablePromise =_entity_update({query:{\"_id\":ecn},update:{$set:{\"3\":'$'+ecn} } });\r\n        var def = $.Deferred();\r\n        var fl = FL.fl; //new flMain();\r\n        if (!fl) {\r\n            // FL.common.printToConsole(\"======================>ERROR ON _getFullDictionary ->no connection\");\r\n            return def.reject(\"ERROR: no connection available\");\r\n        }\r\n        var fEnt = new fl.entity();\r\n        fEnt.update(json, function (err, data) {\r\n            FL.common.printToConsole(\".............................fEnt.update ON _getFullDictionary\");\r\n            // err = \"abc\";\r\n            if (err) {\r\n                // alert(\"ERROR ON _getFullDictionary err=\"+err);\r\n                FL.common.printToConsole(\"======================>ERROR ON _getFullDictionary err=\" + err);\r\n                return def.reject(err);\r\n            } else {\r\n                FL.common.printToConsole(\"=====================================>_entity_update: OK \");\r\n                return def.resolve(data);\r\n            }\r\n        });\r\n        return def.promise();\r\n    };\r\n    var _addWithFields = function (entityJSON) {//creates an entity with the fields in server, with one single call\r\n        var def = $.Deferred();\r\n        var fl = FL.fl; //new flMain();\r\n        // var fl = new flMain();\r\n        // var fa = FL.login.token.fa;//new fl.app();\r\n        var fEntity = new fl.entity();\r\n        fEntity.addWithFields(entityJSON, function (err, data) {\r\n            FL.common.printToConsole(\"............................._addWithFields....\");\r\n            // err = \"abc\";\r\n            if (err) {\r\n                // alert(\"ERROR ON _addWithFields err=\"+err);\r\n                FL.common.printToConsole(\"======================>ERROR ON _addWithFields err=\" + err);\r\n                def.reject(\"ERROR: _addWithFields err=\" + err);\r\n            } else {\r\n                var entityName = entityJSON[\"3\"];//the same as oEntity.singular\r\n                var oEntity = FL.dd.getEntityBySingular(entityName);\r\n                var eCN = data[0]['_id'];\r\n                oEntity.csingular = eCN;\r\n                for (var i = 0; i < data[0].fields.length; i++) {//\r\n                    FL.dd.setFieldCompressedName(entityName, data[0].fields[i].d[\"3\"], data[0].fields[i][\"_id\"]);//xSingular,fieldName,fieldCN\r\n                }\r\n                FL.dd.setSync(entityName, true);\r\n\r\n                FL.common.printToConsole(\"=====================================>_addWithFields: OK \" + entityName + \" stored on server and local Dict in synch\");\r\n                def.resolve();\r\n            }\r\n        });\r\n        return def.promise();\r\n    };\r\n    var _fieldUpdate = function (obj) {//updates a field with _id=field_id defined inside object obj with all field definitions\r\n        //obj - {_id:field_id,name_3:x1,description_4:x2,label_K:x3,type_M:x4,typeUI_9:x5,enumerable_N:x6} - all keys must be supplied\r\n        var def = $.Deferred();\r\n        var fl = FL.fl; //new flMain();\r\n        // var fl = new flMain();\r\n        // var fa = FL.login.token.fa;//new fl.app();\r\n        var fField = new fl.field();\r\n        var field_id = obj._id;\r\n        fField.update({\r\n            \"query\": {\"_id\": field_id},\r\n            \"update\": {\r\n                \"3\": obj.name_3,\r\n                \"4\": obj.description_4,\r\n                \"K\": obj.label_K,\r\n                \"M\": obj.type_M,\r\n                \"9\": obj.typeUI_9,\r\n                \"N\": obj.enumerable_N,\r\n                \"O\": obj.Nico_O,\r\n                \"P\": obj.Nico_P\r\n            }\r\n        }, function (err, data) {\r\n            FL.common.printToConsole(\"............................._fieldUpdate....\");\r\n            // err = \"abc\";\r\n            if (err) {\r\n                // alert(\"ERROR ON _addWithFields err=\"+err);\r\n                FL.common.printToConsole(\"======================>ERROR ON _fieldUpdate err=\" + err);\r\n                def.reject(\"ERROR: _fieldUpdate err=\" + err);\r\n            } else {\r\n                FL.common.printToConsole(\"=====================================>_fieldUpdate: OK \");\r\n                def.resolve(data);\r\n            }\r\n        });\r\n        return def.promise();\r\n    };\r\n    var _fieldUpdateMultiple = function (arrOf_Obj) { //updates multiple fields\r\n        var def = $.Deferred();\r\n        var promise = FL.API.queueManager(\"_fieldUpdate\", \"ignored\", arrOf_Obj);\r\n        promise.done(function (result) {\r\n            return def.resolve(arrOf_IdToRemove.length);\r\n        });\r\n        promise.fail(function (err) {\r\n            return def.reject(err);\r\n        });\r\n        return def.promise();\r\n    };\r\n    var _userCreate = function (userName, userPassWord, userType) {//username is always an email\r\n        // fl.userCreate({\"adminName\": \"nico@framelink.co\", \"adminPassWord\": \"coLas\", \"userName\": \"toto@gmail.com\", \"userPassWord\": \"dodo12345\", \r\n        //\t\t\"userType\": 'user'}, function (err, data){\r\n        var def = $.Deferred();\r\n        var fl = FL.fl; //new flMain();\r\n        // if(!fl){\r\n        // \tfl = new flMain();\r\n        // }\r\n        // fl.userChangePassWord({\"adminName\":\"nico@framelink.co\", \"adminPassWord\":\"coLas\",\r\n        //\t\"userName\":FL.login.token.userName, \"userPassWord\":password}, function(err, result){\r\n        fl.userCreate({\r\n            \"adminName\": \"nico@framelink.co\",\r\n            \"adminPassWord\": \"coLas\",\r\n            \"userName\": userName,\r\n            \"userPassWord\": userPassWord,\r\n            \"userType\": userType\r\n        }, function (err, data) {//userType: user/clientAdmin/admin\r\n            FL.common.printToConsole(\"............................._userCreate....TO \" + password);\r\n            // err = \"abc\";\r\n            if (err) {\r\n                // alert(\"ERROR ON _userCreate err=\"+err);\r\n                FL.common.printToConsole(\"======================>ERROR ON _userCreate err=\" + err);\r\n                // test if user already exists..\r\n                if (err = \"Name already exists\") {\r\n                    FL.login.token.userName = userName;\r\n                    // FL.login.token.userPassWord = userPassWord;\r\n                    FL.fl = fl;\r\n                    FL.common.printToConsole(\"=====================================>_userCreate: OK user already exists  ->token=\" + JSON.stringify(FL.login.token));\r\n                    def.resolve();\r\n                } else {\r\n                    def.reject(err);\r\n                }\r\n            } else {\r\n                // FL.login.token = {\r\n                //\t\"clientName\":null,\r\n                //\t\"userName\":null,\r\n                //\t\"userPassWord\":null,\r\n                //\t\"domainName\":null,\r\n                //\t\"fl\":fl,\r\n                //\t\"fa\":fa,\r\n                //\t\"appDef\":null,\r\n                //\t\"appDescription\":null,\r\n                //\t\"appMenuLevel\":null,\r\n                //\t\"appRestrictions\":null,\r\n                //\t\"error\":\"fl.applicationFullCreate\"\t\t\t\t\t\r\n                FL.login.token.userName = userName;\r\n                FL.login.token.userPassWord = userPassWord;\r\n                FL.fl = fl;\r\n                FL.common.printToConsole(\"=====================================>_userCreate: OK  ->token=\" + JSON.stringify(FL.login.token));\r\n                def.resolve();\r\n            }\r\n        });\r\n        return def.promise();\r\n    };\r\n    var _restoreMainMenuStyleANDfontFamily = function () {//restores main menu, style and fontFamily\r\n        var def = $.Deferred();\r\n        var fl = FL.fl; //new flMain();\r\n        // var fl = new flMain();\r\n        // var fa = FL.login.token.fa;//new fl.app();\r\n        FL.login.appToken = {\r\n            \"menu\": null,\r\n            \"style\": null,\r\n            \"fontFamily\": null,\r\n            \"homePage\": null,\r\n            \"error\": null\r\n        };\r\n        var fd = new fl.data();\r\n        fd.findOne(\"40\", {\"query\": {\"_id\": 1}}, function (err, data) {\r\n            FL.common.printToConsole(\"............................._restoreMainMenuStyleANDfontFamily....\");\r\n            // err = \"abc\";\r\n            if (err) {\r\n                // alert(\"ERROR ON _addWithFields err=\"+err);\r\n                FL.login.appToken.error = \"_restoreMainMenuStyleANDfontFamily err=\" + err;\r\n                FL.common.printToConsole(\"======================>ERROR ON \" + FL.login.appToken.error);\r\n                def.reject(\"ERROR: \" + FL.login.appToken.error);\r\n            } else {\r\n                FL.common.printToConsole(\"=====================================>_restoreMainMenuStyleANDfontFamily: OK checks for nulls\");\r\n                var retData = null;\r\n                var oMenu = FL.login.defaultMenu;\r\n                var style = FL.login.defaultStyle;\r\n                var fontFamily = FL.login.defaultFontFamily;\r\n                if (!data) {\r\n                    FL.common.printToConsole(\"=====================================>_restoreMainMenuStyleANDfontFamily: OK With null data\");\r\n                } else {\r\n                    if (!data.d) {\r\n                        FL.common.printToConsole(\"=====================================>_restoreMainMenuStyleANDfontFamily: OK With null data.d\");\r\n                    } else {\r\n                        if (data.d[\"45\"])//menu\r\n                            oMenu = data.d[\"45\"];\r\n                        if (data.d[\"46\"])//style\r\n                            style = data.d[\"46\"];\r\n                        if (data.d[\"47\"])//fontFamily\r\n                            fontFamily = data.d[\"47\"];\r\n                        FL.common.printToConsole(\"=====================================>_restoreMainMenuStyleANDfontFamily: OK \");\r\n                    }\r\n                }\r\n                retData = {oMenu: oMenu, style: style, fontFamily: fontFamily};\r\n                FL.login.appToken.menu = oMenu;\r\n                FL.login.appToken.style = style;\r\n                FL.login.appToken.fontFamily = fontFamily;\r\n                FL.login.appToken.homePage = null;\r\n                FL.login.appToken.error = null;\r\n                def.resolve(retData);\r\n            }\r\n        });\r\n        return def.promise();\r\n    };\r\n    var insertMacrosOnHomePage = function (textHTML) {\r\n        //only supports:<%= appDescription %>, <%= shortUserName %> and <%= userName %>\r\n        var templateFunction = _.template(textHTML);\r\n        var pos = FL.login.token.userName.indexOf(\"@\");\r\n        var shortUserName = FL.login.token.userName.substring(0, pos);\r\n        var templateArg = {\r\n            appDescription: FL.login.token.appDescription,\r\n            userName: FL.login.token.userName,\r\n            shortUserName: shortUserName\r\n        };\r\n        return templateFunction(templateArg);\r\n    };\r\n    var _restorePage = function () {//restores main menu, style and fontFamily\r\n        var def = $.Deferred();\r\n        var fl = FL.fl; //new flMain();\r\n        var pagNo = getPageNo(\"home\");\r\n        // var fl = new flMain();\r\n        // var fa = FL.login.token.fa;//new fl.app();\r\n        var fd = new fl.data();\r\n        fd.findOne(\"43\", {\"query\": {\"_id\": pagNo}}, function (err, data) {\r\n            FL.common.printToConsole(\"............................._restorePage....\");\r\n            // err = \"abc\";\r\n            if (err) {\r\n                // alert(\"ERROR ON _addWithFields err=\"+err);\r\n                FL.common.printToConsole(\"======================>ERROR ON _restorePage err=\" + err);\r\n                def.reject(\"ERROR: _restorePage err=\" + err);\r\n            } else {\r\n                var retData = insertMacrosOnHomePage(FL.login.defaultPage);\r\n                // data = null;\r\n                if (!data) {\r\n                    FL.common.printToConsole(\"=====================================>_restorePage: OK With null data\");\r\n                } else {\r\n                    // data.d = null;\r\n                    if (!data.d) {\r\n                        FL.common.printToConsole(\"=====================================>_restorePage: OK With null data.d\");\r\n                    } else {\r\n                        // data.d.html = null;\r\n                        if (!data.d.html) {\r\n                            FL.common.printToConsole(\"=====================================>_restorePage: OK With null data.d.html\");\r\n                        } else {\r\n                            retData = data.d.html;\r\n                            FL.common.printToConsole(\"=====================================>_restorePage: OK \");\r\n                        }\r\n                    }\r\n                }\r\n                def.resolve(retData);\r\n            }\r\n        });\r\n        return def.promise();\r\n    };\r\n    var _saveMainMenuStyleANDfontFamily = function () {//updates menu,style and fontFamily defined on FL.login.appToken. to server - inspired on FL.server.saveMainMenu\r\n        //it tries to update if it fails (because _id:1  does not exist) then inserts\r\n        var def = $.Deferred();\r\n        var fl = FL.fl; //new flMain();\r\n        // var fl = new flMain();\r\n        // var fa = FL.login.token.fa;//new fl.app();\r\n        var fd = new fl.data();\r\n        var oMenu = FL.login.appToken.menu;// instead of localStorage.storedMenu;//Retrieve last saved menu\r\n        var lastStyleStr = FL.login.appToken.style;// instead of localStorage.style;// Retrieve last saved style ex.red or spacelab\r\n        var lastFontFamilyStr = FL.login.appToken.fontFamily;//instead of localStorage.fontFamily;// Retrieve last saved fontFamily ex.impact or georgia\r\n        fd.update(\"40\", {\r\n            \"query\": {\"_id\": 1},\r\n            \"update\": {\"45\": oMenu, \"46\": lastStyleStr, \"47\": lastFontFamilyStr}\r\n        }, function (err, data) {\r\n            FL.common.printToConsole(\"............................._saveMainMenuStyleANDfontFamily....\");\r\n            // err = \"abc\";\r\n            if (err) {\r\n                alert(\"======================>ERROR ON _saveMainMenuStyleANDfontFamily err=\" + err);\r\n                FL.API.serverCallBlocked = false;\r\n                def.reject(\"ERROR: _saveMainMenuStyleANDfontFamily err=\" + err);\r\n            } else {\r\n                if (data.count == 0) {//data.count == 0 =>we need to insert\r\n                    FL.common.printToConsole(\"=====================================>_saveMainMenuStyleANDfontFamily: OK no existing record, we need to insert\");\r\n                    fd.insert(\"40\", {\r\n                        _id: 1,\r\n                        d: {\"45\": oMenu, \"46\": lastStyleStr, \"47\": lastFontFamilyStr}\r\n                    }, function (err, data) {\r\n                        FL.API.serverCallBlocked = false;\r\n                        FL.common.printToConsole(\"............................._saveMainMenuStyleANDfontFamily...trying to insert...\");\r\n                        // err = \"abc\";\r\n                        if (err) {\r\n                            alert(\"======================>ERROR ON _saveMainMenuStyleANDfontFamily FAIL TO INSERT err=\" + err);\r\n                            def.reject(\"ERROR: _saveMainMenuStyleANDfontFamily FAIL TO INSERT err=\" + err);\r\n                        } else {\r\n                            FL.common.printToConsole(\"=====================================>_saveMainMenuStyleANDfontFamily: INSERTED OK \");\r\n                            def.resolve();\r\n                        }\r\n                    });\r\n                } else {\r\n                    FL.API.serverCallBlocked = false;\r\n                    FL.common.printToConsole(\"=====================================>_saveMainMenuStyleANDfontFamily: OK \");\r\n                    def.resolve();\r\n                }\r\n            }\r\n        });\r\n        return def.promise();\r\n    };\r\n    var _saveHomePage = function () {//save page in FL.login.appToken.homePage - inspired in FL.server.savePage\r\n        var def = $.Deferred();\r\n        var fl = FL.fl; //new flMain();\r\n        var pagNo = getPageNo(\"home\");\r\n        // var fl = new flMain();\r\n        // var fa = FL.login.token.fa;//new fl.app();\r\n        var htmlContent = FL.login.appToken.homePage;\r\n        var fd = new fl.data();\r\n        fd.update(\"43\", {\"query\": {\"_id\": pagNo}, \"update\": {html: htmlContent}}, function (err, data) {\r\n            FL.common.printToConsole(\"............................._saveHomePage....\");\r\n            // err = \"abc\";\r\n            if (err) {\r\n                // alert(\"ERROR ON _addWithFields err=\"+err);\r\n                FL.common.printToConsole(\"======================>ERROR ON _saveHomePage err=\" + err);\r\n                def.reject(\"ERROR: _saveHomePage err=\" + err);\r\n            } else {\r\n                if (data.count == 0) {//data.count == 0 =>we need to insert\r\n                    FL.common.printToConsole(\"=====================================>_saveHomePage: OK no existing record, we need to insert\");\r\n                    fd.insert(\"43\", {_id: pagNo, d: {html: htmlContent}}, function (err, data) {\r\n                        FL.common.printToConsole(\"............................._saveHomePage...trying to insert...\");\r\n                        // err = \"abc\";\r\n                        if (err) {\r\n                            FL.common.printToConsole(\"======================>ERROR ON _saveHomePage FAIL TO INSERT err=\" + err);\r\n                            def.reject(\"ERROR: _saveHomePage FAIL TO INSERT err=\" + err);\r\n                        } else {\r\n                            FL.common.printToConsole(\"=====================================>_saveHomePage: INSERTED OK \");\r\n                            def.resolve();\r\n                        }\r\n                    });\r\n                } else {\r\n                    FL.common.printToConsole(\"=====================================>_saveHomePage: OK \");\r\n                    def.resolve();\r\n                }\r\n            }\r\n        });\r\n        return def.promise();\r\n    };\r\n    var rebuildsLocalDictionaryFromServer = function (entities) {//interprets entity JSON received from server to local dd\r\n        FL.common.printToConsole(\"rebuildsLocalDictionaryFromServer xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx entities=\" + entities + \" xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\");\r\n        var sucess = null;\r\n        var oEntity = null;\r\n        // FL.common.printToConsole(\"&&&&&&&&&&&&&&&&&&& begin syncLocalDictionary &&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&\");\r\n        FL.dd.clear();//clears local dictionary\r\n\r\n        // FL.common.printToConsole(\"%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% after FL.dd.clear %%%%%%%%%%%%%%%%%\");\r\n        // FL.dd.displayEntities();\r\n        // FL.common.printToConsole(\"%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\");\r\n\r\n        // FL.common.printToConsole(\"--- *** Entities *** ---\");\r\n        for (var i = 0; i < entities.length; i++) {\r\n            // FL.common.printToConsole(\"Entity eCN=\" + entities[i]._id + \" singular=\" + entities[i].d[\"3\"] );\r\n            success = FL.dd.createEntity(entities[i].d[\"3\"], entities[i].d[\"4\"]);//singular,description ex:(\"client\",\"company we may invoice\")\r\n            oEntity = FL.dd.entities[entities[i].d[\"3\"]];\r\n            oEntity.plural = entities[i].d[\"E\"];\r\n            oEntity.csingular = entities[i]._id;\r\n            // FL.common.printToConsole(\"--- *** fields *** ---\");\r\n            for (var fieldIndex = 0; fieldIndex < entities[i].fields.length; fieldIndex++) {//boucle fields\r\n                // FL.common.printToConsole(\"--->field fCN=\" + entities[i].fields[fieldIndex]._id + \" fieldName=\" + entities[i].fields[fieldIndex].d[\"3\"] );\r\n                //{\"_id\":fCN,\"name_3\":oAttribute.name, \"description_4\":oAttribute.description, 'label_K': oAttribute.label,'typeUI_9':oAttribute.typeUI, 'type_M': oAttribute.type, 'enumerable_N':oAttribute.enumerable,'Nico_O':false, 'Nico_P':oAttribute.specialTypeDef};\r\n                FL.dd.addAttribute(entities[i].d[\"3\"], entities[i].fields[fieldIndex].d[\"3\"], entities[i].fields[fieldIndex].d[\"4\"], entities[i].fields[fieldIndex].d[\"K\"], entities[i].fields[fieldIndex].d[\"M\"], entities[i].fields[fieldIndex].d[\"9\"], entities[i].fields[fieldIndex].d[\"N\"], null, entities[i].fields[fieldIndex].d[\"P\"]);\r\n                //addAttribute uses a local compressed name. Now we have to force the field compressed name comming from server\t\t\t\t\t\t\t\t\r\n                FL.dd.setFieldCompressedName(entities[i].d[\"3\"], entities[i].fields[fieldIndex].d[\"3\"], entities[i].fields[fieldIndex]._id);\r\n            }\r\n            // FL.common.printToConsole(\"--- *** relations *** ---\");\r\n            var rCN = null;\r\n            var relationName = null;\r\n            var withEntityCN = null;\r\n            var side = null;\r\n            var verb = null;\r\n            var cardinality = null;\r\n            var semantic = null;\r\n            var storedHere = null;\r\n            var relation = null;\r\n            oEntity.relations = [];\r\n            for (var relationIndex = 0; relationIndex < entities[i].relations.length; relationIndex++) {//boucle relations\r\n                // FL.common.printToConsole(\"--->relation  rCN=\" + entities[i].relations[relationIndex]._id );\r\n                relation = {};\r\n                relation[\"rCN\"] = entities[i].relations[relationIndex]._id;\r\n                relation[\"withEntityCN\"] = entities[i].relations[relationIndex].d[\"00\"][0][\"U\"];\r\n                relation[\"withEntity\"] = null;\r\n                relation[\"verb\"] = entities[i].relations[relationIndex].d[\"00\"][0][\"V\"];\r\n                relation[\"cardinality\"] = entities[i].relations[relationIndex].d[\"00\"][0][\"W\"];\r\n                relation[\"side\"] = entities[i].relations[relationIndex].d[\"00\"][0][\"Z\"];\r\n                relation[\"storedHere\"] = entities[i].relations[relationIndex].d[\"00\"][0][\"Y\"];//if true this is the side to read the relation from left to rigth\r\n                relation[\"semantic\"] = null;\r\n                //semantic = to be formed in local dictionary ex://\"customer has many orders\"\r\n                //FL.dd.addRelation(entities[i].d[\"3\"],rCN,withEntity,verb,cardinality,side,storedHere);\r\n                //we cannot use addRelation() because withEntity is unknown here. we only know its compressed name = withEntityCN\r\n                //    because of this it is impossible to call FL.dd.relationSemantics\r\n                //    we need a second pass to fill withEntity and semantic\r\n                oEntity.relations.push(relation);\r\n            }\r\n        }\r\n        //When we sync in a serial way we are creating relations before having the other side entity.\r\n        //Synchronizing relations needs 2 steps. Step 1 is done above saving  the auxiliary \"withEntityCN\" without filling \"withEntity\"\r\n        // - Step 2 is done below filling \"withEntity\" from \"withEntityCN\" (saved in step 1) and setting sync=true at entity level. \r\n        FL.dd.relationPass2();//goes thru all entities and for all relations of each entity fills withEntity and semantic using withEntityCN\r\n        // FL.dd.displayEntities();\r\n        // FL.common.printToConsole(\"&&&&&&&&&&&&&&&&&&&& end syncLocalDictionary &&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&\");\r\n    };\r\n    var getPageNo = function (pagName) { //to be used by savePage and restorePage\r\n        var pageNoObj = {\"home\": 1, \"about\": 2};\r\n        return pageNoObj[pagName];\r\n    };\r\n    //-------- END OF OTHER WRAPPERS ------------------\t\t\r\n\r\n    //-------- Exchage data WRAPPERS ------------------\t\t\r\n    var _findAll = function (ecn, query, projection) { //entity compressed name\r\n        var def = $.Deferred();\r\n        var fl = FL.fl; //new flMain();\r\n        var fd = new fl.data();\r\n        // var fl = new flMain();\r\n        // var fa = FL.login.token.fa;//new fl.app();\r\n        var findAllParam = {};\r\n        if (!query)\r\n            findAllParam.query = {};\r\n        else\r\n            findAllParam.query = query;\r\n        if (projection)\r\n            findAllParam.projection = projection;\r\n\r\n\r\n        // fd.findAll(ecn, {\"query\":query}, function(err, data){\r\n        fd.findAll(ecn, findAllParam, function (err, data) {\r\n            // fd.findAll(ecn, {\"query\":query,\"projection\":projection}, function(err, data){\r\n            FL.common.printToConsole(\"............................._findAll...\");\r\n            // err = \"abc\";\r\n            if (err) {\r\n                alert(\"ERROR ON _findAll err=\" + err);\r\n                FL.common.printToConsole(\"======================>ERROR ON _findAll err=\" + err);\r\n                def.reject(err);\r\n            } else {\r\n                FL.common.printToConsole(\"=====================================>_findAll: OK \");\r\n                def.resolve(data);//data is an array\r\n            }\r\n        });\r\n        return def.promise();\r\n    };\r\n    var nicoTestDuplicateIds = function (arrToTest) {//checks if any of the  _id's value is repeated\r\n        var is_Duplicated = false;\r\n        var testJSON = {};\r\n        _.each(arrToTest, function (element) {\r\n            if (!_.isUndefined(element[\"_id\"])) {\r\n                if (!_.isUndefined(testJSON[element[\"_id\"]])) {\r\n                    is_Duplicated = true;\r\n                }\r\n                testJSON[element[\"_id\"]] = \"1\";//_ide is placed as key....\r\n            }\r\n        });\r\n        return is_Duplicated;\r\n    };\r\n    var _insert = function (eCN, arrToSend) { //entity compressed name, arr with records to store\r\n        //format of arrToSend ->[\"_id\":\"1234\",{\"d\":{\"51\":\"cli1\",\"52\":\"Lx\",\"53\":\"Pt\"}},{\"d\":{\"51\":\"cli2\",\"52\":\"Sintra\",\"53\":\"Pt\"}}]\r\n        var def = $.Deferred();\r\n        var fl = FL.fl; //new flMain();\r\n        var fd = new fl.data();\r\n        // var fl = new flMain();\r\n        // var fa = FL.login.token.fa;//new fl.app();\r\n        // var testJSON = {};\r\n        // _.each(arrToSend,function(element){\r\n        // \tif(!_.isUndefined(element[\"_id\"])){\r\n        // \t\tif( !_.isUndefined( testJSON[ element[\"_id\" ] ] ) ){\r\n        // \t\t\talert(\"FL.API _insert -> Repeated _id - protection to prevent server blockage activated !!!!\");\r\n        // \t\t\treturn def.reject(\"Duplicate _id -protection to prevent server blockage\");\r\n        // \t\t}\r\n        // \t\ttestJSON[element[\"_id\"]] = \"1\";\r\n        // \t}\r\n        // });\r\n        if (nicoTestDuplicateIds(arrToSend)) {\r\n            alert(\"FL.API _insert -> Repeated _id - protection to prevent server blockage activated !!!!\");\r\n            return def.reject(\"Duplicate _id -protection to prevent server blockage\");\r\n        }\r\n        fd.insert(eCN, arrToSend, function (err, data) {\r\n            FL.common.printToConsole(\"............................._insert...\");\r\n            // err = \"abc\";\r\n            if (err) {\r\n                alert('_insert: err=' + JSON.stringify(err));\r\n                // FL.common.printToConsole(\"======================>ERROR ON _insert err=\"+err);\r\n                return def.reject(err);\r\n            } else {\r\n                FL.common.printToConsole(\"=====================================>_insert: OK \");\r\n                return def.resolve(data);//data is an array\r\n            }\r\n        });\r\n        return def.promise();\r\n    };\r\n    var _update = function (ecn, _idValue, jsonToSend) { //update a single row within table ecn entity compressed name, _idValue and jsonToSend (a single record)\r\n        //\tformat of jsonToSend ->{\"51\":\"cli1\",\"52\":\"Lx\",\"53\":\"Pt\"}\r\n        var def = $.Deferred();\r\n        var fl = FL.fl; //new flMain();\r\n        var fd = new fl.data();\r\n\r\n        fd.update(ecn, {\r\n            \"query\": {\"_id\": _idValue},\r\n            \"update\": jsonToSend,\r\n            \"options\": {\"upsert\": true}\r\n        }, function (err, result) {\r\n            FL.common.printToConsole(\"............................._update....i_id=\" + _idValue + \" To ->\" + JSON.stringify(jsonToSend));\r\n            if (err) {\r\n                FL.common.printToConsole(\"======================>ERROR ON _update err=\" + err);\r\n                def.reject(err);\r\n            } else {\r\n                FL.common.printToConsole(\"=====================================>_update: OK \" + result.count + \" records were updated.\");\r\n                def.resolve(result.count);\r\n            }\r\n        });\r\n        return def.promise();\r\n    };\r\n    var _remove = function (ecn, _id) { //remove  a single row within table ecn (entity compressed name)\r\n        var def = $.Deferred();\r\n        var fl = FL.fl; //new flMain();\r\n        var fd = new fl.data();\r\n        fd.remove(ecn, {\"query\": {_id: _id}}, function (err, result) {\r\n            // FL.common.printToConsole(\"............................._remove....i_id=\"+_id);\r\n            if (err) {\r\n                FL.common.printToConsole(\"======================>ERROR ON _remove err=\" + err);\r\n                def.reject(err);\r\n            } else {\r\n                FL.common.printToConsole(\"=====================================>_remove: OK \");\r\n                def.resolve(result);\r\n            }\r\n        });\r\n        return def.promise();\r\n    };\r\n    var _removeAll = function (ecn) { //remove  all rows of table ecn \r\n        var def = $.Deferred();\r\n        var fl = FL.fl; //new flMain();\r\n        var fd = new fl.data();\r\n        fd.remove(ecn, {\"query\": {}, options: {single: false}}, function (err, result) {\r\n            if (err) {\r\n                FL.common.printToConsole(\"======================>ERROR ON _removeAll err=\" + err);\r\n                return def.reject(err);\r\n            } else {\r\n                FL.common.printToConsole(\"=====================================>_removeAll: OK \");\r\n                return def.resolve(result);\r\n            }\r\n        });\r\n        return def.promise();\r\n    };\r\n    var _removeMultiple = function (ecn, arrOf_IdToRemove) { //remove  a single row within table ecn (entity compressed name)\r\n        var def = $.Deferred();\r\n        var spinner = FL.common.loaderAnimationON('spinnerDiv');\r\n        var promise = FL.API.queueManager(\"_remove\", ecn, arrOf_IdToRemove);\r\n        promise.done(function (result) {\r\n            spinner.stop();\r\n            return def.resolve(arrOf_IdToRemove.length);\r\n        });\r\n        promise.fail(function (err) {\r\n            spinner.stop();\r\n            return def.reject(err);\r\n        });\r\n        return def.promise();\r\n    };\r\n    var _dummy = function (ecn, _id) { //remove  a single row within table ecn (entity compressed name)\r\n        var def = $.Deferred();\r\n        setTimeout(function () {\r\n            FL.common.printToConsole(\"***********************************************************************************************\");\r\n            FL.common.printToConsole(\"**************************  _dummy-------------------->execution=\" + _id);\r\n            FL.common.printToConsole(\"***********************************************************************************************\");\r\n            def.resolve(1);\r\n            // def.reject(\"dummy failure !\");\r\n        }, 600);\r\n        return def.promise();\r\n    };\r\n    var queueManager = function (funcName, param1, arrToDispatch) { //call a function each 200 milisecondsremove  a single row within table ecn (entity compressed name)\r\n        // calls the same asynchronous function several times assuring that after the first call all subsequent calls are done after a successfull completion of the previous call.\r\n        //   funcName = name of the function to be called...it must be in the list: _dummy,_remove,_fieldUpdate,updateAttribute\r\n        //\t param1 - a parameter constant between calls\r\n        //   arrToDispatch - array where each element is passed in each call (one at a time)\r\n        //\t\tfor \"_remove\" - a list of _ids to remove\r\n        //\t\tfor \"_fieldUpdate\" - a list of objects. Each object has {name_3:x1,description_4:x2,label_K:x3,type_M:x4,typeUI_9:x5,enumerable_N:x6}\r\n        //\t\tfor \"updateAttribute\" - runs FL.dd.updateAttribute() for multiple attributes. Each element of arrayToDispatch is an object\r\n        //\t\t\twith {singular:xSingular,oldname:xOldname,name_3:x1,description_4:x2,label_K:x3,type_M:x4,typeUI_9:x5,enumerable_N:x6}\r\n        //\t\t\texample: var promise = FL.API.queueManager(\"updateAttribute\",\"dummy\",bufferChangeObjs);\r\n        // returns a promise  valid if all calls were successfully done, or a promise fillure  if any of the calls failled\r\n        //    Parameters to adjust:\r\n        //\t\t\tdelay = time to wait between tries\r\n        //\t\t\tmaxRefused = just in case fuse.... a high number to prevent infinite loops\r\n\r\n        // TESTING\r\n        // var promise = FL.API.queueManager(\"_dummy\",\"abc\",[230,231,232,233]);\r\n        // promise.done(function(result){\r\n        // \talert(\"queueManager - PROMISE DONE!!!\");\r\n        // });\r\n        // promise.fail(function(result){\r\n        // \talert(\"queueManager - PROMISE FAIL!!!\");\r\n        // });\r\n        var def = $.Deferred();\r\n\r\n        // var param1=param1;\r\n\r\n        var numberOfEl = arrToDispatch.length;\r\n        var delay = 200;//time between tries to call promise\r\n        var counter = 0;//number of well succeded calls\r\n        var refusedCounter = 0;//number of refused calls\r\n        var maxRefused = 200;//limit of refused - more than this limit =>error\r\n        var next = true;\r\n        var intervalId = setInterval(function () {\r\n            if (next) {\r\n                if (counter < numberOfEl) {\r\n                    next = false;\r\n                    promise = null;\r\n                    if (funcName == \"_dummy\")\r\n                        promise = _dummy(param1, arrToDispatch[counter]);\r\n                    else if (funcName == \"_remove\")\r\n                        promise = _remove(param1, arrToDispatch[counter]);\r\n                    else if (funcName == \"_fieldUpdate\")\r\n                        promise = _fieldUpdate(arrToDispatch[counter]);//no constant parameter between calls\r\n                    else if (funcName == \"updateAttribute\") {\r\n                        var changeObj = arrToDispatch[counter];\r\n                        promise = FL.dd.updateAttribute(changeObj.singular, changeObj.oldname, changeObj);\r\n                    } else {\r\n                        FL.common.printToConsole(\"***************************  execution=rejected !!! ->Invalid funcName=\" + funcName);\r\n                        clearInterval(intervalId);\r\n                        return def.reject(\"function name ->\" + funcName + \" is INVALID.\");\r\n                    }\r\n                    promise.done(function (result) {\r\n                        counter += 1;\r\n                        if (counter == numberOfEl) {\r\n                            clearInterval(intervalId);\r\n                            return def.resolve(counter);\r\n                        }\r\n                        next = true;\r\n                    });\r\n                    promise.fail(function (err) {\r\n                        FL.common.printToConsole(\"***************************  execution=fail !!! ->\" + funcName + \" failure. Err=\" + err);\r\n                        clearInterval(intervalId);\r\n                        return def.reject(\"Error in \" + funcName + \" err=\" + err);\r\n                    });\r\n                }\r\n            } else {\r\n                if (refusedCounter > maxRefused) {\r\n                    clearInterval(intervalId);\r\n                    alert(\"queueManager ERROR more than \" + maxRefused + \" =>too many refusals.\")\r\n                    return def.reject(\"Refusals max exceeded !\");\r\n                }\r\n                FL.common.printToConsole(\"***********************************************************************************************\");\r\n                FL.common.printToConsole(\"***************************  step execution=refused -> \" + counter + \" --->\" + arrToDispatch[counter]);\r\n                FL.common.printToConsole(\"***********************************************************************************************\");\r\n                refusedCounter++;\r\n            }\r\n        }, delay);\r\n        return def.promise();\r\n    };\r\n    var _checkServerCallBlocked = function () {//waits until FL.API.serverCallBlocked is true or a limit is exceeded\r\n        var def = $.Deferred();\r\n        if (FL.API.serverCallBlocked) {\r\n            var delay = 100;//time between tries to check if FL.API.serverCallBlocked was set to false\r\n            var counter = 0;//number of check attempts\r\n            var maxRefused = 100;//limit of refused - more than this limit =>error\r\n            var intervalId = setInterval(function () {\r\n                counter++;\r\n                FL.common.printToConsole(\"_checkServerCallBlocked counter=\" + counter + \"/\" + maxRefused, \"checkServerCall\");\r\n                if (counter >= maxRefused) {\r\n                    clearInterval(intervalId);\r\n                    FL.API.serverCallBlocked = false;\r\n                    return def.reject(\"_checkServerCallBlocked limit of tries exceeded ->counter=\" + counter);\r\n                }\r\n                if (!FL.API.serverCallBlocked) {\r\n                    clearInterval(intervalId);\r\n                    return def.resolve(counter);\r\n                }\r\n            }, delay);\r\n        } else {\r\n            FL.common.printToConsole(\"No checkServerCallBlocked ->passed on first attempt\", \"checkServerCall\");\r\n            return def.resolve();\r\n        }\r\n        return def.promise();\r\n    };\r\n    var convertRecordsTo_arrToSend = function (entityName, recordsArray, withId) {//used by saveTable()\r\n        //withId flag (default = false) if true all _id will be forced in the add.\r\n        //Converts format: [{\"name\":cli1,\"city\":\"Lx\",\"country\":\"Pt\"},{..},....] to \r\n        //\tformat of arrToSend ->[{\"d\":{\"51\":\"cli1\",\"52\":\"Lx\",\"53\":\"Pt\"}},{\"d\":{\"51\":\"cli2\",\"52\":\"Sintra\",\"53\":\"Pt\"}}]\t\r\n        // or (if withId=true) Converts format: [{\"_id\":\"3f1\",name\":cli1,\"city\":\"Lx\",\"country\":\"Pt\"},{..},....] to \r\n        //\tformat of arrToSend ->[{\"_id\":\"3f1\",\"d\":{\"51\":\"cli1\",\"52\":\"Lx\",\"53\":\"Pt\"}},{\"_id\":\"3f2\",\"d\":{\"51\":\"cli2\",\"52\":\"Sintra\",\"53\":\"Pt\"}}]\t\r\n\r\n        var retArr = _.map(recordsArray, function (element) {\r\n            return convertOneRecordTo_arrToSend(entityName, element, withId);\r\n        });\r\n        return retArr;\r\n    };\r\n    var convertOneRecordTo_arrToSend = function (entityName, recordEl, withId) {\r\n        //withId flag (default = false) if true all _id will be forced in the add.\r\n        //Converts format: {\"name\":cli1,\"city\":\"Lx\",\"country\":\"Pt\"} to {\"d\":{\"51\":\"cli1\",\"52\":\"Lx\",\"53\":\"Pt\"}}  OR\r\n        //\t\t\t\t{\"_id\":\"3f1\",name\":cli1,\"city\":\"Lx\",\"country\":\"Pt\"} to {\"_id\":\"3f1\",\"d\":{\"51\":\"cli1\",\"52\":\"Lx\",\"53\":\"Pt\"} if withId=true\r\n        var retObj = {};\r\n        var fCN = null;\r\n        var oEntity = FL.dd.getEntityBySingular(entityName);\r\n        if (withId)\r\n            var _id = recordEl._id;\r\n        recordEl = _.omit(recordEl, \"_id\");\r\n        _.each(recordEl, function (value, key) {\r\n            fCN = oEntity.L2C[key];//with key ( a logical name) we get the compressed name\r\n            retObj[fCN] = value;\r\n        });\r\n        if (withId)\r\n            return {\"_id\": _id, d: retObj, r: []};\r\n        return {d: retObj, r: []};\r\n    };\r\n    var _mandrillRejectListForSender = function (senderEmail) { //update a single row within table ecn entity compressed name, _idValue and jsonToSend (a single record)\r\n        //\tformat of jsonToSend ->{\"51\":\"cli1\",\"52\":\"Lx\",\"53\":\"Pt\"}\r\n        var def = $.Deferred();\r\n        var fl = FL.fl; //new flMain();\r\n        // var fd = new fl.data();\r\n        var md = new fl.mandrill();\r\n        md.rejectList({include_expired: true, sender: senderEmail}, function (err, data) {\r\n            FL.common.printToConsole(\"............................._mandrillRejectListForSender....result=\" + JSON.stringify(data));\r\n            if (err) {\r\n                FL.common.printToConsole(\"======================>ERROR ON _mandrillRejectListForSender err=\" + err);\r\n                def.reject(err);\r\n            } else {\r\n                FL.common.printToConsole(\"=====================================>_mandrillRejectListForSender: OK \");\r\n                def.resolve(data);\r\n            }\r\n        });\r\n        return def.promise();\r\n    };\r\n    var _mandrillDeleteFromReject = function (arrayOfEmails) { //update a single row within table ecn entity compressed name, _idValue and jsonToSend (a single record)\r\n        //\tformat of jsonToSend ->{\"51\":\"cli1\",\"52\":\"Lx\",\"53\":\"Pt\"}\r\n        var def = $.Deferred();\r\n        var fl = FL.fl; //new flMain();\r\n        // var fd = new fl.data();\r\n        var md = new fl.mandrill();\r\n        md.rejectDelete({email: arrayOfEmails[0]}, function (err, data) {\r\n            FL.common.printToConsole(\"............................._mandrillDeleteFromReject....->\" + JSON.stringify(data));\r\n            if (err) {\r\n                FL.common.printToConsole(\"======================>ERROR ON _mandrillDeleteFromReject err=\" + err);\r\n                def.reject(err);\r\n            } else {\r\n                FL.common.printToConsole(\"=====================================>_mandrillDeleteFromReject: OK deleted=\" + data.deleted);\r\n                FL.common.printToConsole(\"............................._mandrillDeleteFromReject...SUCCESS .->\" + JSON.stringify(data));\r\n                def.resolve();\r\n            }\r\n        });\r\n        return def.promise();\r\n    };\r\n    var _test = function () {\r\n        FL.common.printToConsole(\"--- test ----\");\r\n    };\r\n    //-------- END OF OTHER WRAPPERS ------------------\t\t\r\n    return {\r\n        xx: \"test\",\r\n        fl: new flMain(),//FL.server.fl\r\n        fa: null,\r\n        data: {},\r\n        offline: true,\r\n        trace: true,//to be removed\r\n        debug: true,//if it is false  no console log will be shown\r\n        debugStyle: 0,// 0=>means shows numbers to jump to, 1=> no line Numbers to jump to (this only works if debug=true)\r\n\r\n        // getPageNo: function(pagName){ //to be used by savePage and restorePage\r\n        //\tvar pageNoObj = {\"home\":1,\"about\":2};\r\n        //\treturn  pageNoObj[pagName];\r\n        // },\r\n        debugFiltersToShow: null,\r\n        serverCallBlocked: false, //HACK to prevent server call (menu calling a grid) before last call is dispatched (ex:cell update) - a promise must be resolved to unblock\r\n        clearServerToken: function () {\r\n            FL.login.token = tokenClear();\r\n        },\r\n        convertOneRecordTo_arrToSend: function (entityName, recordEl) {\r\n            return convertOneRecordTo_arrToSend(entityName, recordEl);\r\n        },\r\n        queueManager: function (funcName, param1, arrToDispatch) {\r\n            return queueManager(funcName, param1, arrToDispatch);\r\n        },\r\n        checkServerCallBlocked: function () {\r\n            return _checkServerCallBlocked();\r\n        },\r\n        convertArrC2LForEntity: function (entityName, serverArr) {//serverArr =>[{\"_id\":123,d:{},r:[]},{\"_id\":124,d:{},r:[]},....{\"_id\":125,d:{},r:[]}]\r\n            //Use the dictionary for entityName to convert compressed field names in keys in serverArr to logical field names\r\n            //Ex: from server [{\"d\":{\"01\":true,\"02\":\"Super 1\",\"00\":1},\"r\":[]},{\"d\":{\"01\":false,\"02\":\"Super 2\",\"00\":2},\"r\":[]}]\r\n            //     ==============> [{\"_id\":123,id:1,\"shipped\":true,\"product\":\"Super 1\",\"id\":1},{\"_id\":124,id:2,\"shipped\":false,\"product\":\"Super 2\",\"id\":2}]\t\r\n            // If serverArr elements inside d object have no compressed name corresponding to \"id\" in local dictionary, id will be added\r\n            // if serverArr elements have a \"_id\" property/value \"_id\" will be included in the return array \r\n            var oEntity = FL.dd.getEntityBySingular(entityName);\r\n            var arrOfCKeys = null;\r\n            var arrOfValues = null;\r\n            var arrOfLKeys = null;\r\n            var dContent = null;\r\n            var el = null;\r\n            var index = 1;\r\n            var retArr = _.map(serverArr, function (element) {//each element is JSON =>{\"_id\":123,d:{},r:[]}\r\n                dContent = element.d;//only d will be processed. d is a JSON ex.=>{ \"62\":1, \"63\":true,\"64\":\"Super 1\" }\r\n                arrOfCKeys = _.keys(dContent);//ex. [\"62\",\"63\",\"64\"]\r\n                arrOfValues = _.values(dContent);//ex. [1,true,\"Super1\"]\r\n                arrOfLKeys = _.map(arrOfCKeys, function (element2) {\r\n                    var logicalName = oEntity.C2L[element2];\r\n                    // return oEntity.C2L[element2]; \r\n                    return logicalName;\r\n                });\r\n                el = _.object(arrOfLKeys, arrOfValues);//reassembles the object from two aligned arrays\r\n                if (!el.id)\r\n                    el[\"id\"] = index;\r\n                index++;\r\n                if (element._id)\r\n                    el[\"_id\"] = element._id;\r\n                return el;\r\n            });\r\n            return retArr;\r\n        },\r\n        prepareTrialApp: function () {///create adHoc client, create adHoc user, create adHoc app \r\n            var def = $.Deferred();\r\n            // var fl = new flMain();//FL.server.fl\r\n            var fl = FL.fl;\r\n            FL.common.printToConsole(\"....................................>beginning prepareTrialApp....\");\r\n            var prepareTrialAppPromise = _applicationFullCreate({\r\n                \"adminName\": \"nico@framelink.co\",\r\n                \"adminPassWord\": \"coLas\"\r\n            })\r\n                .then(_login).then(_connect);\r\n            prepareTrialAppPromise.done(function () {\r\n                FL.common.printToConsole(\">>>>> prepareTrialAppPromise SUCCESS <<<<<\");\r\n                def.resolve();\r\n            });\r\n            prepareTrialAppPromise.fail(function (err) {\r\n                FL.common.printToConsole(\">>>>> prepareTrialAppPromise FAILURE <<<<<\");\r\n                def.reject(err);\r\n            });\r\n            return def.promise();\r\n\r\n            // to generate unique userName\r\n            // var seconds = new Date().getTime() / 1000;\r\n            // var userName = \"toto\"+ seconds;\r\n        },\r\n        removeClientWithOneApp: function () {//remove client, remove user, remove app - only works for subscribers with a single app\r\n            FL.common.printToConsole(\"....................................>beginning removeClientWithOneApp....with token=\" + JSON.stringify(FL.login.token));\r\n            var def = $.Deferred();\r\n            var removeClientWithOneAppPromise = _disconnect().then(_applicationRemove).then(_clientRemove);\r\n            removeClientWithOneAppPromise.done(function () {\r\n                FL.common.printToConsole(\">>>>> removeClientWithOneApp SUCCESS <<<<<\");\r\n                def.resolve();\r\n            });\r\n            removeClientWithOneAppPromise.fail(function () {\r\n                FL.common.printToConsole(\">>>>> removeClientWithOneApp FAILURE <<<<<\");\r\n                def.reject();\r\n            });\r\n            return def.promise();\r\n        },\r\n        removeTrialApp: function () {//remove client, remove user, remove app - only works for subscribers with a single app\r\n            FL.common.printToConsole(\"....................................>beginning removeTrialApp....with token=\" + JSON.stringify(FL.login.token));\r\n            var def = $.Deferred();\r\n            var removeTrialAppPromise = _disconnect().then(_applicationRemove).then(_clientRemove);\r\n            removeTrialAppPromise.done(function () {\r\n                FL.common.printToConsole(\">>>>> removeTrialApp SUCCESS <<<<<\");\r\n                def.resolve();\r\n            });\r\n            removeTrialAppPromise.fail(function () {\r\n                FL.common.printToConsole(\">>>>> removeTrialApp FAILURE <<<<<\");\r\n                def.reject();\r\n            });\r\n            return def.promise();\r\n        },\r\n        registerTrialApp: function (userName, password, appDescription) {//change adHoc client name, user name, passordd and appDescrition \r\n            FL.common.printToConsole(\"....................................>beginning registerTrialApp....with token=\" + JSON.stringify(FL.login.token));\r\n            var def = $.Deferred();\r\n            // var registerTrialApp=_applicationFinalize(userName,appDescription).then(function(){_userChangePassWord(password);});\r\n            var registerTrialApp = _applicationFinalize(userName, appDescription).then(function () {\r\n                return _userChangePassWord(password);\r\n            });\r\n\r\n            registerTrialApp.done(function () {\r\n                FL.common.printToConsole(\">>>>> registerTrialApp SUCCESS <<<<<\");\r\n                def.resolve();\r\n            });\r\n            registerTrialApp.fail(function (err) {\r\n                FL.common.printToConsole(\">>>>> registerTrialApp FAILURE <<<<< \" + err);\r\n                def.reject(err);\r\n            });\r\n            return def.promise();\r\n        },\r\n        removeUserAndApps: function (userName, password) {//remove client, remove user, remove app \r\n            FL.common.printToConsole(\"....................................>beginning removeUserAndApps....with token=\" + JSON.stringify(FL.login.token));\r\n            var def = $.Deferred();\r\n            FL.login.token.userName = userName;\r\n            FL.login.token.userPassWord = password;\r\n            FL.login.token.domainName = \"xxx\";\r\n            var removeUserAndAppsPromise = _login().then(_applicationRemove).then(_clientRemove);\r\n            removeUserAndAppsPromise.done(function () {\r\n                FL.common.printToConsole(\">>>>> removeUserAndApps SUCCESS <<<<<\");\r\n                def.resolve();\r\n            });\r\n            removeUserAndAppsPromise.fail(function () {\r\n                FL.common.printToConsole(\">>>>> removeUserAndApps FAILURE <<<<<\");\r\n                def.reject();\r\n            });\r\n            return def.promise();\r\n        },\r\n        createUserAndDefaultApp: function (userName, userPassWord, appDescription) {///creates a client, create user and create first app \r\n            var def = $.Deferred();\r\n            FL.common.printToConsole(\"%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\");\r\n            // var fl = new flMain();//FL.server.fl\r\n            var fl = FL.fl;\r\n            // var fa = new fl.app();\r\n            // fl.setTraceClient(2);\r\n            // def.fail(function(){\r\n            // \talert(\"error on connectAdHocUser ! \");\r\n            // });\r\n            if (!appDescription)\r\n                appDescription = \"my App\";\r\n            FL.common.printToConsole(\"....................................>beginning createUserAndDefaultApp....\");\r\n            var createUserAndDefaultAppPromise = _applicationFullCreate({\r\n                \"adminName\": \"nico@framelink.co\", \"adminPassWord\": \"coLas\",\r\n                userName: userName, userPassWord: userPassWord, appDescription: appDescription\r\n            })\r\n                .then(_login).then(_connect);\r\n            createUserAndDefaultAppPromise.done(function () {\r\n                FL.common.printToConsole(\">>>>> createUserAndDefaultAppPromise SUCCESS <<<<<\");\r\n                FL.common.printToConsole(\"%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\");\r\n                return def.resolve();\r\n            });\r\n            createUserAndDefaultAppPromise.fail(function (err) {\r\n                FL.common.printToConsole(\">>>>> createUserAndDefaultAppPromise FAILURE <<<<<\");\r\n                FL.common.printToConsole(\"%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\");\r\n                return def.reject(err);\r\n            });\r\n            return def.promise();\r\n\r\n            // to generate unique userName\r\n            // var seconds = new Date().getTime() / 1000;\r\n            // var userName = \"toto\"+ seconds;\r\n        },\r\n        disconnect: function () {//change adHoc client name, user name, passordd and appDescrition \r\n            FL.common.printToConsole(\"....................................>beginning disconnect....current token=\" + JSON.stringify(FL.login.token));\r\n            var def = $.Deferred();\r\n            var disconnect = _disconnect();\r\n            disconnect.done(function () {\r\n                FL.common.printToConsole(\">>>>> disconnect SUCCESS <<<<<\");\r\n                FL.login.token = tokenClear();\r\n                return def.resolve();\r\n            });\r\n            disconnect.fail(function (err) {\r\n                FL.common.printToConsole(\">>>>> disconnect FAILURE <<<<< \" + err);\r\n                return def.reject(err);\r\n            });\r\n            return def.promise();\r\n        },\r\n        connectUserToDefaultApp: function (userName, password) {//\r\n            //if userName/password exists but has no application, one application is created\r\n            // FL.common.printToConsole(\"....................................>beginning connectUserToDefaultApp....with token=\"+JSON.stringify(FL.login.token));\r\n            FL.common.printToConsole(\"....................................>beginning connectUserToDefaultApp....\");\r\n            var def = $.Deferred();\r\n            var tokenBackup = FL.login.token;//if it fails we will recover the initial token with this backup\r\n            var fl = null;\r\n            var fa = null;\r\n            // if (FL === null || FL.login === null || FL.login.token === null){//FL.login.token is null\r\n            // if (FL.login === null || FL.login.token === null){//FL.login.token is null\r\n            if (FL.fl === null) {//FL.login.token is null\r\n                alert(\"connectUserToDefaultApp ->FL.fl === null !!!!\");\r\n                fl = new flMain();\r\n                fa = new fl.app();\r\n                FL.login.token[\"fl\"] = fl;\r\n                FL.login.token[\"fa\"] = fa;\r\n            } else {//FL.login.token exists\r\n                if (FL.fl) {\r\n                    fl = FL.fl; //new flMain();\r\n                } else {\r\n                    fl = new flMain();\r\n                }\r\n                fa = new fl.app();\r\n                FL.login.token[\"fl\"] = fl;\r\n                FL.login.token[\"fa\"] = fa;\r\n            }\r\n            FL.login.token.userName = userName;\r\n            FL.login.token.userPassWord = password;\r\n            var connectUserToDefaultApp = _login()\r\n                .then(_connect);\r\n            connectUserToDefaultApp.done(function () {\r\n                FL.common.printToConsole(\">>>>> connectUserToDefaultApp SUCCESS <<<<<\");\r\n                def.resolve();\r\n            });\r\n            connectUserToDefaultApp.fail(function (err) {\r\n                if (err == \"no application available\") {//we will try to recover the error creating one application\r\n                    // alert(\"Recovering from no application\");\r\n                    FL.common.printToConsole(\"....................................>connectUserToDefaultApp....Recovering from no application...\");\r\n                    var applicationCreatePromise = _applicationCreate(\"automatic sample\");\r\n                    applicationCreatePromise.done(function () {\r\n                        FL.common.printToConsole(\"....................................>connectUserToDefaultApp applicationCreate DONE\");\r\n                        def.resolve();\r\n                    });\r\n                    applicationCreatePromise.fail(function (err) {\r\n                        FL.common.printToConsole(\"....................................>connectUserToDefaultApp applicationCreate FAIL\");\r\n                        def.reject(\"ERROR:connectUserToDefaultApp ->applicationCreate FAIL err=\" + err);\r\n                    });\r\n                } else {\r\n                    FL.common.printToConsole(\">>>>> connectUserToDefaultApp FAILURE <<<<< Error:\" + err);\r\n                    FL.login.token = tokenBackup;\r\n                    def.reject(err);\r\n                }\r\n            });\r\n            return def.promise();\r\n        },\r\n        isConnected: function () {//returns true if is connected, false otherwise\r\n            isConnected = false;\r\n            var tk = FL.login.token[\"fl\"];\r\n            var conn = null;\r\n            if (tk) {\r\n                conn = tk.getsId();//flMain.getsId() - it will return a number if it is connected\r\n                // FL.common.printToConsole(\"FL.API.isConnected() -->conn=\"+conn);\r\n                if (!isNaN(conn))\r\n                    isConnected = true;\r\n            }\r\n            return isConnected;\r\n        },\r\n        isUserExist: function (userName) {\r\n            var def = $.Deferred();\r\n            FL.common.printToConsole(\"....................................>beginning isUserExist....with token=\" + JSON.stringify(FL.login.token), \"API\");\r\n            var isUserExistPromise = _isUserExist(userName);\r\n            isUserExistPromise.done(function (exists) {\r\n                FL.common.printToConsole(\">>>>> isUserExist SUCCESS <<<<< exist=\" + exists, \"API\");\r\n                return def.resolve(exists);\r\n            });\r\n            isUserExistPromise.fail(function (err) {\r\n                FL.common.printToConsole(\">>>>> isUserExist FAILURE <<<<<\", \"API\");\r\n                return def.reject(err);\r\n            });\r\n            return def.promise();\r\n        },\r\n        temporaryRebuildsLocalDictionaryFromServer: function (entities) {\r\n            // FL.common.printToConsole(\"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx entities=\" + entities + \" xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\");\r\n            FL.common.printToConsole(\"xxxxxxxxx #$%#%#%5 xxxxxxx\");\r\n        },\r\n        syncLocalDictionary: function () {//clears local dictionary and updates it from server dictionary\r\n            FL.common.printToConsole(\"....................................>beginning syncLocalDictionary....with token=\" + JSON.stringify(FL.login.token));\r\n            var def = $.Deferred();\r\n            //_getFullDictionary->FL.dd.clear()->rebuildsLocalDictionary()\r\n            // temporaryRebuildsLocalDictionaryFromServer(\"ABC\");\r\n            // _test();\r\n            var syncLocalDictionary = _getFullDictionary();\r\n            syncLocalDictionary.done(function (entities) {\r\n                FL.common.printToConsole(\">>>>> syncLocalDictionary SUCCESS <<<<< entities=\" + entities);\r\n                FL.dd.clear();\r\n                if (entities) {\r\n                    FL.common.printToConsole(\">>>>> syncLocalDictionary -> does temporaryRebuildsLocalDictionaryFromServer(entities)\");\r\n                    rebuildsLocalDictionaryFromServer(entities);//interprets entity JSON received from server to local dd\r\n                    // FL.common.printToConsole(\"%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% after rebuildsLocalDictionaryFromServer %%%%%%%%%%%%%%%%%\");\r\n                    FL.dd.displayEntities();\r\n                } else {\r\n                    FL.common.printToConsole(\">>>>> syncLocalDictionary -> dictionary is empty in server\");\r\n                }\r\n                return def.resolve();\r\n            });\r\n            syncLocalDictionary.fail(function (err) {\r\n                FL.common.printToConsole(\">>>>> syncLocalDictionary FAILURE <<<<< \" + err);\r\n                def.reject();\r\n            });\r\n            return def.promise();\r\n        },\r\n        prepareJSONFromLocalEntity: function (entityName) {//prepares JSON with entity and fields to be sent to _addWithFields\r\n            var oEntity = FL.dd.getEntityBySingular(entityName);\r\n            var eCN = null;\r\n            var entityJSON = {\"3\": oEntity.singular, \"4\": oEntity.description, 'E': oEntity.plural, fields: []};\r\n            for (var i = 0; i < oEntity.attributes.length; i++) {//mounts field array\r\n                var attribute = oEntity.attributes[i];\r\n                // var attrJSON = {\"3\":attribute.name, \"4\":attribute.description, 'K': attribute.label, 'M': attribute.type, 'O':false,'N':attribute.enumerableArr};\r\n                var attributeType = attribute.type;\r\n                // if(attributeType == \"enumerable\")\r\n                //\tattributeType = \"string\";\r\n                var attrJSON = {\r\n                    \"3\": attribute.name,\r\n                    \"4\": attribute.description,\r\n                    'K': attribute.label,\r\n                    '9': attribute.typeUI,\r\n                    'M': attribute.type,\r\n                    'O': false,\r\n                    'N': attribute.enumerable\r\n                };\r\n                //\"O\" - attribute.repetable\r\n                entityJSON.fields.push(attrJSON);\r\n            }\r\n            return entityJSON;\r\n        },\r\n        syncLocalDictionaryToServer: function (entityName) {//synch table entityName existing in local dictionary with server dict\r\n            // entityName - singular name as it is in local dd\r\n            FL.common.printToConsole(\"....................................>beginning syncLocalDictionaryToServer....with token=\" + JSON.stringify(FL.login.token));\r\n            var def = $.Deferred();\r\n            var entityJSON = this.prepareJSONFromLocalEntity(entityName);\r\n            // alert(\"entityJSON = \"+JSON.stringify(entityJSON));\r\n            var addWithFields = _addWithFields(entityJSON);\r\n            addWithFields.done(function () {\r\n                FL.common.printToConsole(\">>>>> syncLocalDictionaryToServer SUCCESS <<<<<\");\r\n                return def.resolve();\r\n            });\r\n            addWithFields.fail(function (err) {\r\n                FL.common.printToConsole(\">>>>> syncLocalDictionaryToServer FAILURE <<<<< \" + err);\r\n                return def.reject();\r\n            });\r\n            return def.promise();\r\n        },\r\n        updateDictionaryEntityProperties: function (eCN, oProperties) {//works with FL.dd.updateEntityBySingular to update singular,plural and description properties to server\r\n            //ex:updateDictionaryEntityProperties(\"50\",{singular:singular,plural:xPlural,description:description});entityName,{singular:singular,plural:xPlural,description:description});\r\n            var def = $.Deferred();\r\n            var propertiesJSON = {\r\n                query: {\"_id\": eCN},\r\n                update: {$set: {\"3\": oProperties.singular, \"E\": oProperties.plural, \"4\": oProperties.description}}\r\n            };\r\n            var entityUpdatePromise = _entity_update(propertiesJSON);\r\n            entityUpdatePromise.done(function (result) {\r\n                FL.common.printToConsole(\">>>>> updateDictionaryEntityProperties SUCCESS count=\" + result + \"<<<<<\");\r\n                return def.resolve(result);\r\n            });\r\n            entityUpdatePromise.fail(function (err) {\r\n                FL.common.printToConsole(\">>>>> updateDictionaryEntityProperties FAILURE <<<<< \" + err);\r\n                return def.reject(err);\r\n            });\r\n            return def.promise();\r\n        },\r\n        updateDictionaryAttribute: function (fCN, oAttribute) {//works with FL.dd.updateAttribute to update attribute to server\r\n            var def = $.Deferred();\r\n            var attrJSON = {\r\n                \"_id\": fCN,\r\n                \"name_3\": oAttribute.name,\r\n                \"description_4\": oAttribute.description,\r\n                'label_K': oAttribute.label,\r\n                'typeUI_9': oAttribute.typeUI,\r\n                'type_M': oAttribute.type,\r\n                'enumerable_N': oAttribute.enumerable,\r\n                'Nico_O': false,\r\n                'Nico_P': oAttribute.specialTypeDef\r\n            };\r\n            //var attrJSON = {\"_id\":fCN,\"name_3\":oAttribute.name, \"description_4\":oAttribute.description, 'label_K': oAttribute.label,'typeUI_9':oAttribute.typeUI, 'type_M': oAttribute.type, 'enumerable_N':oAttribute.enumerable,'Nico_O':false };\r\n            var fieldUpdatePromise = _fieldUpdate(attrJSON);\r\n            fieldUpdatePromise.done(function (result) {\r\n                FL.common.printToConsole(\">>>>> updateDictionaryAttribute SUCCESS <<<<<\");\r\n                return def.resolve(result);\r\n            });\r\n            fieldUpdatePromise.fail(function (err) {\r\n                FL.common.printToConsole(\">>>>> updateDictionaryAttribute FAILURE <<<<< \" + err);\r\n                return def.reject(err);\r\n            });\r\n            return def.promise();\r\n        },\r\n        updateDictionaryAllAttributes: function (entityName, singular, description, newAttributesArr) {//updates the dict with all content related to table\r\n            // entityName - original entity name to be updated\r\n            // singular - new entity  name (eventually the same as entityName )\r\n            // description - new entity description\r\n            // newAttributesArr - new array of objects each element corresponding to a diferent attribute - and extra key: oldName must be included with the old attribute Name\r\n            //\t\tex: {name:\"address\",description:\"address to send invoices\",label:\"Address\",type:\"string\",typeUI:\"textbox\",enumerable:null,key:false,oldName:\"Address\"}\r\n            // if it fails the dictionary  it is not rolled back - the roll back task must be done above this code (ex.FLGrid2 updateDictionaryAndTypesInServer)\r\n            var def = $.Deferred();\r\n            var xPlural = FL.dd.plural(singular, \"En\");  //+\"s\";\r\n            var updatePromise = FL.dd.updateEntityBySingular(entityName, {\r\n                singular: singular,\r\n                plural: xPlural,\r\n                description: description\r\n            });\r\n            updatePromise.done(function (result) {\r\n                FL.common.printToConsole(\">>>>> updateEntityBySingular SUCCESS count=\" + result + \"<<<<<\", \"API\");\r\n                // return def.resolve(result);});\r\n\r\n                var bufferChangeObjs = [];\r\n                _.each(newAttributesArr, function (element) {//change type based on old attributes\r\n                    if (element.name != \"id\") {\r\n                        var changeObj = {\r\n                            name: element.name,\r\n                            description: element.description,\r\n                            label: element.label,\r\n                            type: element.type,\r\n                            typeUI: element.typeUI,\r\n                            enumerable: element.enumerable\r\n                        };\r\n                        changeObj[\"singular\"] = singular;\r\n                        changeObj[\"oldname\"] = element.oldName;\r\n                        bufferChangeObjs.push(changeObj);\r\n                    }\r\n                }, this);\r\n                var promise = FL.API.queueManager(\"updateAttribute\", \"dummy\", bufferChangeObjs);\r\n                promise.done(function (result) {\r\n                    FL.dd.setSync(entityName, true)\r\n                    return def.resolve(result);\r\n                });\r\n                promise.fail(function (err) {\r\n                    return def.reject(err);\r\n                });\r\n            });\r\n            updatePromise.fail(function (err) {\r\n                FL.common.printToConsole(\">>>>> updateEntityBySingular  FAILURE <<<<< \" + err, \"API\");\r\n                return def.reject(err);\r\n            });\r\n            return def.promise();\r\n        },\r\n        loadAppDataForSignInUser2: function () {//loads (local dict + menu + style + fontFamily) from server\r\n            FL.common.printToConsole(\"....................................>beginning loadAppDataForSignInUser2....with token=\" + JSON.stringify(FL.login.token));\r\n            var def = $.Deferred();\r\n            //syncLocalDictionary ->restoreMainMenu  if it succeds -> restorePage\r\n            var loadAppDataForSignInUser = FL.API.syncLocalDictionary()\r\n                .then(_restoreMainMenuStyleANDfontFamily);\r\n            loadAppDataForSignInUser.done(function (menuData) {\r\n                //data dictionary was loaded + menu was loaded\r\n                FL.dd.displayEntities();\r\n                var oMenu = FL.login.appToken.menu; //or menuData.oMenu\r\n                var style = FL.login.appToken.style; //or menuData.style\r\n                var fontFamily = FL.login.appToken.fontFamily; //or menuData.fontFamily\r\n                var homePage = null; //or menuData.oMenu\r\n                FL.common.printToConsole(\">>>>> loadAppDataForSignInUser2 SUCCESS loading menu+style+font <<<<< style=\" + style + \" font=\" + fontFamily + \"\\nmenu=\" + JSON.stringify(oMenu));\r\n                var homePagePromise = _restorePage();\r\n                homePagePromise.done(function (homeHTML) {\r\n                    var appDescription = FL.login.token.appDescription;\r\n                    // FL.login.appToken.homePage = homeHTML;\r\n                    FL.login.appToken.homePage = insertMacrosOnHomePage(homeHTML);//only supports:<%= appDescription %>, <%= shortUserName %> and <%= userName %>\r\n                    FL.common.printToConsole(\">>>>> loadAppDataForSignInUser2 FULL SUCCESS <<<<< appToken=\" + JSON.stringify(FL.login.appToken));\r\n                    def.resolve(menuData, FL.login.appToken.homePage, appDescription);\r\n                });\r\n                homePagePromise.fail(function (err) {\r\n                    FL.common.printToConsole(\">>>>> loadAppDataForSignInUser2 FAILURE <<<<< error retrieving Home page error=\" + err);\r\n                    def.reject();\r\n                });\r\n            });\r\n            loadAppDataForSignInUser.fail(function (err) {\r\n                FL.common.printToConsole(\">>>>> loadAppDataForSignInUser2 FAILURE <<<<<\" + err);\r\n                def.reject();\r\n            });\r\n            return def.promise();\r\n        },\r\n        setHomePage: function (homeHTML) {\r\n            FL.login.appToken.homePage = homeHTML;\r\n        },\r\n        setMenu: function (oMenu) {\r\n            FL.login.appToken.menu = oMenu;\r\n        },\r\n        setStyle: function (style) {\r\n            FL.login.appToken.style = style;\r\n        },\r\n        setFontFamily: function (fontFamily) {\r\n            FL.login.appToken.fontFamily = fontFamily;\r\n        },\r\n        saveHomePage: function (homeHTML) {//\r\n            //can be used without parameter (it will use FL.login.appToken.homePage ) or with parameter\r\n            if (homeHTML)\r\n                FL.login.appToken.homePage = homeHTML;\r\n            FL.common.printToConsole(\"....................................>beginning saveHomePage....with appToken=\" + JSON.stringify(FL.login.appToken));\r\n            var def = $.Deferred();\r\n            var saveHomePage = _saveHomePage();\r\n            saveHomePage.done(function () {\r\n                FL.common.printToConsole(\">>>>> saveHomePage SUCCESS <<<<< \");\r\n                def.resolve();\r\n            });\r\n            saveHomePage.fail(function (err) {\r\n                FL.common.printToConsole(\">>>>> saveHomePage FAILURE <<<<<\" + err);\r\n                def.reject();\r\n            });\r\n            return def.promise();\r\n        },\r\n        save_Menu_style_fontFamily: function () {//\r\n            //it will use FL.login.appToken.oMenu, FL.login.appToken.style, and FL.login.appToken.fontFamily,\r\n            FL.common.printToConsole(\"....................................>beginning save_Menu_style_fontFamily....with appToken=\" + JSON.stringify(FL.login.appToken));\r\n            var def = $.Deferred();\r\n            var save_Menu_style_fontFamily = _saveMainMenuStyleANDfontFamily();\r\n            save_Menu_style_fontFamily.done(function () {\r\n                FL.common.printToConsole(\">>>>> save_Menu_style_fontFamily SUCCESS <<<<< \");\r\n                def.resolve();\r\n            });\r\n            save_Menu_style_fontFamily.fail(function (err) {\r\n                FL.common.printToConsole(\">>>>> save_Menu_style_fontFamily FAILURE <<<<<\" + err);\r\n                def.reject(err);\r\n            });\r\n            return def.promise();\r\n        },\r\n        loadDefaultApp: function (loginObject) {//returns menuData,homeHTML for user loginObject or \r\n            //\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\terr={code:<[1,2,3,4]>,message:<error message>}\t\r\n            //\t1-user not existing  2-isUserExist faillure  3-connectUserToDefaultApp faillure  \r\n            //\t4-loadAppDataForSignInUser2 faillure 5-wrong password on existing user\r\n            //  Check if user exists with FL.API.isUserExist\r\n            //\t\tif it exists => FL.API.connectUserToDefaultApp\r\n            //\t\t\tif it is connected  =>FL.API.loadAppDataForSignInUser2  =>loads dd and returns menuData and homeHTML\r\n            //\t\t\t\tNow we have the dictionary loaded and objects menuData and homeHTML\r\n            var def = $.Deferred();\r\n            FL.common.printToConsole(\"....................................>beginning loadDefaultApp....\", \"API\");\r\n            var existingUserPromise = FL.API.isUserExist(loginObject.email);\r\n            existingUserPromise.done(function (exist) {\r\n                if (exist) {//the user exists\r\n                    FL.common.printToConsole(loginObject.email + \" exists !!!!\", \"login\");\r\n                    var setupExistingUserPromise = FL.API.connectUserToDefaultApp(loginObject.email, loginObject.password);\r\n                    setupExistingUserPromise.done(function () {\r\n                        var loadAppPromise = FL.API.loadAppDataForSignInUser2();//gets data dictionary + main menu + style + fontFamily + home page\r\n                        loadAppPromise.done(function (menuData, homeHTML) {\r\n                            return def.resolve(menuData, homeHTML);\r\n                        });\r\n                        loadAppPromise.fail(function (err) {\r\n                            FL.common.printToConsole(\"loadAppDataForSignInUser2 FAILURE  <<<<< error=\" + err, \"API\");\r\n                            return def.reject({\r\n                                code: 4,\r\n                                message: \"loadAppDataForSignInUser2 FAILURE  <<<<< error=\" + err\r\n                            });\r\n                        });\r\n                    });\r\n                    setupExistingUserPromise.fail(function (err) {\r\n                        if (err.indexOf(\"Access denied\") >= 0) {//user exist but password is wrong\r\n                            return def.reject({code: 5, message: \"wrong password for existing user\"});\r\n                        } else {\r\n                            FL.common.printToConsole(\"connectUserToDefaultApp FAILURE  <<<<< error=\" + err, \"API\");\r\n                            return def.reject({\r\n                                code: 3,\r\n                                message: \"connectUserToDefaultApp FAILURE  <<<<< error=\" + err\r\n                            });\r\n                        }\r\n                    });\r\n                } else {//user does not exist !!!\r\n                    FL.common.printToConsole(\"FL.API.loadDefaultApp >>>>> user \" + loginObject.email + \" does not exist !\", \"API\");\r\n                    return def.reject({code: 1, message: \"user \" + loginObject.email + \" does not exist !\"});\r\n                }\r\n            });\r\n            existingUserPromise.fail(function (err) {\r\n                FL.common.printToConsole(\"FL.API.loadDefaultApp >>>>> isUserExist FAILURE Service no accessible<<<<<\", \"API\");\r\n                return def.reject({code: 2, message: \"isUserExist FAILURE\"});\r\n            });\r\n            return def.promise();\r\n        },\r\n        loadDefaultAppByAPI_Key: function (API_Key) {//returns menuData,homeHTML for API_key or \r\n            //\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\terr={code:<[1,2,3,4]>,message:<error message>}\t\r\n            //\t1-user not existing  2-isUserExist faillure  3-connectUserToDefaultApp faillure  4-loadAppDataForSignInUser2 faillure\t\t\t\t\r\n            // API_Key - is the database access key\r\n            var def = $.Deferred();\r\n            FL.common.printToConsole(\"....................................>beginning loadDefaultAppByAPI_Key....\", \"API\");\r\n            var pairString = FL.common.enc(API_Key, -1);//pairString is \"{email:x1,password:x2}\". Encripted with API_Key = FL.common.enc(pairString,1);\r\n            var loginObject = JSON.parse(pairString);\r\n            var loadDefaultAppPromise = FL.API.loadDefaultApp(loginObject)\r\n                .then(function (menuData, homeHTML) {\r\n                    return def.resolve(menuData, homeHTML);\r\n                }\r\n                , function (err) {\r\n                    return def.reject(err);\r\n                });\r\n            return def.promise();\r\n        },\r\n        generateAPI_key: function (loginObject) {//loginObject has format {email:x1,password:x3,domain:x4};->domain key is optional \r\n            return FL.common.enc(JSON.stringify(loginObject), 1);\r\n        },\r\n        removeTable: function (entityName) {//remove existing or unexisting table - after this we are sure that table does not exist\r\n            //assumes a connection to an application exists\r\n            //Temporary instead of removing --> we rename tables on server to unique names beginning by $+ecn\r\n            //\r\n            // if logical name does not exists in local dictionary for sure it does not exist in server - no remove to do\r\n            // if logical name exists in local dictionary in synch with server remove the table in server\r\n            // if logical name exists in local dictionary but is not in synch ->force synchronization of local dict.\r\n            //    (because synchoronization clears all local dict items we save the local entry in local var oEntity)\r\n            //    After synch:\r\n            //        \tif logical name is not in local it is not in server ->nothing needs to be done in server - we \r\n            //\t\t\t    only need to reintroduce oEntity in local dictionary\r\n            //\t\t\tif logical name is in local it is also in server ->we need to remove it and to reintroduce oEntity \r\n            //\t\t\t\tin local dictionary\r\n            FL.common.printToConsole(\"........>beginning removeTable....with appToken=\" + JSON.stringify(FL.login.appToken));\r\n            var def = $.Deferred();\r\n            //forces synch from server to be sure \r\n            var ecn = FL.dd.getCEntity(entityName);\r\n            if (ecn === null) {\r\n                FL.common.printToConsole(\"........FL.API.removeTable() table=\" + entityName + \" not in local dict -> not necessary to remove it\");\r\n                return def.resolve();//not necessary to remove a table not existing in local dict\r\n            } else {//the table exists in local dict but may be unsynchronized\r\n                var oEntity = FL.dd.entities[entityName];\r\n                if (oEntity.sync) {//table exists and is in sync with server\t\r\n                    FL.common.printToConsole(\"........FL.API.removeTable() table=\" + entityName + \" is sync with local dict -> will be removed form server\");\r\n                    var removeTablePromise = _entity_update({query: {\"_id\": ecn}, update: {$set: {\"3\": '$' + ecn}}});\r\n                    removeTablePromise.then(function () {\r\n                        return def.resolve();\r\n                    }, function (err) {\r\n                        return def.reject(err);\r\n                    });\r\n                } else {//table in local dict but may exist in server (if no synch was done...)\r\n                    FL.common.printToConsole(\"........FL.API.removeTable() table=\" + entityName + \" is in local dict but unsync with server -> we force a synchronization\");\r\n                    var syncPromise = FL.API.syncLocalDictionary();\r\n                    syncPromise.done(function () {\r\n                        var ecnAfterSync = FL.dd.getCEntity(entityName);\r\n                        if (ecnAfterSync === null) {//entity name does not exists in the server\r\n                            FL.common.printToConsole(\"........FL.API.removeTable() table=\" + entityName + \" not in server dict -> not necessary to remove it\");\r\n                            FL.dd.entities[entityName] = oEntity;\r\n                            return def.resolve();//not necessary to remove a table not existing table in server\r\n                        } else {//entity name exists in the server\r\n                            //we need to remove the table from the server \r\n                            FL.common.printToConsole(\"........FL.API.removeTable() table=\" + entityName + \" not in sync with local dict but exists in server -> will be removed form server\");\r\n                            var removeTablePromise = _entity_update({\r\n                                query: {\"_id\": ecn},\r\n                                update: {$set: {\"3\": '$' + ecn}}\r\n                            });\r\n                            removeTablePromise.then(function () {\r\n                                return def.resolve();\r\n                            }, function (err) {\r\n                                return def.reject(err);\r\n                            });\r\n                            //because FL.API.syncLocalDictionary() cleared the local dictionary we need to add oEntity to the local dict\r\n                            FL.dd.entities[entityName] = oEntity;\r\n                            return def.resolve();//Table was removed from server and unsynched <entityName> was resetted in local dict.\r\n                        }\r\n                    });\r\n                    syncPromise.fail(function () {\r\n                        return def.reject();\r\n                    });\r\n                }\r\n            }\r\n            return def.promise();\r\n        },\r\n        saveTable: function (entityName, recordsArray) {//creates a table (overriding any existing one) and saves a set of records in it\r\n            //assumes a login to an application exists - if table is not in synch it synchs it\r\n            //recordsArray [{\"number\":12,\"code\":\"abc\"},....]\r\n            //returns array with input data and _id for each record\r\n            FL.common.printToConsole(\"....................................>beginning saveTable....with appToken=\" + JSON.stringify(FL.login.appToken));\r\n            var def = $.Deferred();\r\n            var ecn = FL.dd.getCEntity(entityName);\r\n            //begins by removeTable, then sync local dict  to server, then inserting lines\r\n            // var remove_synch = FL.API.removeTable(entityName).then(FL.API.syncLocalDictionaryToServer(entityName));\r\n            // var remove_synch = FL.API.removeTable(entityName).then(FL.API.syncLocalDictionaryToServer(entityName));\r\n            FL.API.removeTable(entityName)\r\n                .then(function () {\r\n                    return FL.API.syncLocalDictionaryToServer(entityName);\r\n                })\r\n                .then(function () {\r\n                    ecn = FL.dd.getCEntity(entityName);\r\n                    FL.common.printToConsole(\">>>>>saveTable --> remove and synch SUCCESS <<<<<\");\r\n                    FL.common.printToConsole(\"+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\");\r\n                    var arrToSend = convertRecordsTo_arrToSend(entityName, recordsArray);\r\n                    FL.common.printToConsole(\"saveTable --->\" + JSON.stringify(arrToSend));\r\n                    FL.common.printToConsole(\"+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\");\r\n                    insertPromise = _insert(ecn, arrToSend);\r\n                    insertPromise.then(function (data) {\r\n                        FL.common.printToConsole(\">>>>>saveTable Ok\");\r\n                        return def.resolve(data);\r\n                    }, function (err) {\r\n                        return def.reject(err);\r\n                    });\r\n                    //data has the format:\r\n                    // [{\"d\":{\"55\":\"Jojox\",\"56\":\"123\"},\"v\":0,\"_id\":\"546963669b04c9107942d32d\"},{\"d\":{\"55\":\"Anton\",\"56\":\"456\"},\"v\":0,\"_id\":\"546963669b04c9107942d32e\"}]\r\n                    // return def.resolve();\r\n                }\r\n            ).fail(\r\n                function (err) {\r\n                    FL.common.printToConsole(\">>>>>saveTable --> remove and synch FAILURE <<<<< \" + err);\r\n                    return def.reject(err);\r\n                }\r\n            );\r\n            return def.promise();\r\n        },\r\n        //we need table CRUD: addRecordsToTable,getRecordsFromTable, updateRecordsToTable, removeRecordsFromTable\r\n        // Method addRecordsToTable - has parameters  (entityName,recordsArray)\r\n        //\t\twhere recordsArray has the format [{\"number\":12,\"code\":\"abc\"},....]\r\n        // Methods getRecordsFromTable,updateRecordsToTable and removeRecordsFromTable - has parameters  (entityName,recordsId,withTS)\r\n        //\t\twhere recordsId has the format [{\"_id\":1,timeStamp:\"A\"},{\"_id\":4},....]\r\n        addRecordsToTable: function (entityName, recordsArray, withId) {//add one or several records to existing table\r\n            //assumes a login to an application exists and entitName exists in local and is in sync\r\n            //recordsArray [{\"number\":12,\"code\":\"abc\"},....]\r\n\r\n            //withId flag (default = false) if true all _id will be forced in the add.\r\n            FL.common.printToConsole(\"....................................>beginning addRecordsToTable....with appToken=\" + JSON.stringify(FL.login.appToken));\r\n            var def = $.Deferred();\r\n            if (_.isUndefined(withId))\r\n                var withId = false;\r\n            var ecn = FL.dd.getCEntity(entityName);\r\n            if (ecn === null) {\r\n                FL.common.printToConsole(\"........FL.API.addRecordsToTable() table=\" + entityName + \" not in local dict !\");\r\n                return def.reject(\"addRecordsToTable <table=\" + entityName + \"> does not exist in local dict !\");//\r\n            } else {//the table exists in local dict but may be unsynchronized\r\n                var oEntity = FL.dd.entities[entityName];\r\n                if (!oEntity.sync) {//table exists in local dict but is not in sync with server\t\r\n                    FL.common.printToConsole(\"........FL.API.addRecordsToTable() <table=\" + entityName + \"> exists in local dict but is not in sync\");\r\n                    return def.reject(\"addRecordsToTable <table=\" + entityName + \"> not in sync !\");//\r\n                } else {//table exists and is in sync\r\n                    FL.common.printToConsole(\"........FL.API.addRecordsToTable() table=\" + entityName + \" is ok. We will insert!\");\r\n                    var arrToSend = convertRecordsTo_arrToSend(entityName, recordsArray, withId);\r\n                    insertPromise = _insert(ecn, arrToSend);\r\n                    insertPromise.then(function (data) {\r\n                        return def.resolve(data);\r\n                    }, function (err) {\r\n                        return def.reject(err);\r\n                    });\r\n                }\r\n            }\r\n            return def.promise();\r\n        },\r\n        addRecordsToTableByCN: function (eCN, recordsArray, withId) {//add one or several records to existing table\r\n            // eCN - Entity compressed name\r\n            // recordsArray - array where each element is a JSON with pairs fCN:<content to insert>\r\n            //   ex:[{\"51\":125,\"52\":\"abc\"},....]\r\n\r\n            //the same as addRecordsToTable() but by compressed name\r\n            //assumes a login to an application exists and entitName exists in local and is in sync\r\n            //recordsArray [{\"number\":12,\"code\":\"abc\"},....]\r\n\r\n            //withId flag (default = false) if true all _id will be forced in the add.\r\n            FL.common.printToConsole(\"....................................>beginning addRecordsToTable....with appToken=\" + JSON.stringify(FL.login.appToken));\r\n            var def = $.Deferred();\r\n            if (_.isUndefined(withId))\r\n                var withId = false;\r\n            var ecn = eCN;//FL.dd.getCEntity(entityName);\r\n            var entityName = FL.dd.getEntityByCName(ecn);\r\n            if (ecn === null) {\r\n                FL.common.printToConsole(\"........FL.API.addRecordsToTable() table=\" + entityName + \" not in local dict !\");\r\n                return def.reject(\"addRecordsToTable <table=\" + entityName + \"> does not exist in local dict !\");//\r\n            } else {//the table exists in local dict but may be unsynchronized\r\n                var oEntity = FL.dd.entities[entityName];\r\n                if (!oEntity.sync) {//table exists in local dict but is not in sync with server\t\r\n                    FL.common.printToConsole(\"........FL.API.addRecordsToTable() <table=\" + entityName + \"> exists in local dict but is not in sync\");\r\n                    return def.reject(\"addRecordsToTable <table=\" + entityName + \"> not in sync !\");//\r\n                } else {//table exists and is in sync\r\n                    FL.common.printToConsole(\"........FL.API.addRecordsToTable() table=\" + entityName + \" is ok. We will insert!\");\r\n                    var arrToSend = convertRecordsTo_arrToSend(entityName, recordsArray, withId);\r\n                    insertPromise = _insert(ecn, arrToSend);\r\n                    insertPromise.then(function (data) {\r\n                        return def.resolve(data);\r\n                    }, function (err) {\r\n                        return def.reject(err);\r\n                    });\r\n                }\r\n            }\r\n            return def.promise();\r\n        },\r\n        updateRecordToTable: function (entityName, record) {//update a single record to existing table\r\n            //assumes a login to an application exists and entitName exists in local and is in sync\r\n            //record is a JSON containing a _id key {\"_id\":12345,\"id\":1,\"code\":\"abc\"}\r\n            FL.common.printToConsole(\"....................................>beginning updateRecordToTable....with appToken=\" + JSON.stringify(FL.login.appToken));\r\n            var def = $.Deferred();\r\n            var ecn = FL.dd.getCEntity(entityName);\r\n            if (ecn === null) {\r\n                FL.common.printToConsole(\"........FL.API.updateRecordToTable() table=\" + entityName + \" not in local dict !\");\r\n                return def.reject(\"updateRecordToTable table=\" + entityName + \" does not exist\");//\r\n            } else {//the table exists in local dict but may be unsynchronized\r\n                var oEntity = FL.dd.entities[entityName];\r\n                if (!oEntity.sync) {//table exists in local dict but is not in sync with server\t\r\n                    FL.common.printToConsole(\"........FL.API.updateRecordToTable() table=\" + entityName + \" exists in local dict but is not in sync\");\r\n                    return def.reject(\"updateRecordToTable table=\" + entityName + \" not in sync\");//\r\n                } else {//table exists and is in sync\r\n                    FL.common.printToConsole(\"........FL.API.updateRecordToTable() table=\" + entityName + \" is ok. We will insert!\");\r\n                    var arrToSend = convertOneRecordTo_arrToSend(entityName, record);//returns {\"d\":{\"51\":\"cli1\",\"52\":\"Lx\",\"53\":\"Pt\"}} \r\n                    if (record._id) {\r\n                        FL.common.printToConsole(\"update ->\" + record._id + \" record=\" + JSON.stringify(record));\r\n                        var updatePromise = _update(ecn, record._id, arrToSend.d);\r\n                        updatePromise.done(function (count) {\r\n                            FL.common.printToConsole(\">>>>> updatePromise SUCCESS <<<<< \" + count + \" record updated!\");\r\n                            def.resolve(count);\r\n                        });\r\n                        updatePromise.fail(function (err) {\r\n                            FL.common.printToConsole(\">>>>> updatePromise FAILURE <<<<<\" + err);\r\n                            def.reject(err);\r\n                        });\r\n                        // return def.resolve(data);\r\n                    } else {\r\n                        FL.common.printToConsole(\"........FL.API.updateRecordToTable() table=\" + entityName + \" is ok but _id is missing\");\r\n                        return def.reject(\"updateRecordToTable table=\" + entityName + \" -->error: missing _id\");//\r\n                    }\r\n                    // insertPromise.then(function(data){return def.resolve(data);},function(err){return def.reject(err);});\r\n                }\r\n            }\r\n            return def.promise();\r\n        },\r\n        // removeRecordFromTable: function(entityName,record) {//removes a single record from a table\r\n        removeRecordFromTable: function (entityName, arrOf_Id) {//removes all _id in the array arrOf_Id\r\n            //assumes a login to an application exists and entitName exists in local and is in sync\r\n            //record is a JSON containing a _id key {\"_id\":12345,\"id\":1,\"code\":\"abc\"}\r\n            //arrOf_Id is an array containing _id keys [12345,12312343]\r\n            FL.common.printToConsole(\"....................................>beginning removeRecordFromTable....with appToken=\" + JSON.stringify(FL.login.appToken));\r\n            var def = $.Deferred();\r\n            var ecn = FL.dd.getCEntity(entityName);\r\n            if (ecn === null) {\r\n                FL.common.printToConsole(\"........FL.API.removeRecordFromTable() table=\" + entityName + \" not in local dict !\");\r\n                return def.reject(\"removeRecordFromTable table=\" + entityName + \" does not exist\");//\r\n            } else {//the table exists in local dict but may be unsynchronized\r\n                var oEntity = FL.dd.entities[entityName];\r\n                if (!oEntity.sync) {//table exists in local dict but is not in sync with server\t\r\n                    FL.common.printToConsole(\"........FL.API.removeRecordFromTable() table=\" + entityName + \" exists in local dict but is not in sync\");\r\n                    return def.reject(\"removeRecordFromTable table=\" + entityName + \" not in sync\");//\r\n                } else {//table exists and is in sync\r\n                    FL.common.printToConsole(\"........FL.API.removeRecordFromTable() table=\" + entityName + \" is ok. We will remove!\");\r\n                    // if(record._id){\r\n                    if (arrOf_Id.length > 0) {\r\n                        // FL.common.printToConsole(\"remove ->\"+record._id+\" record=\"+JSON.stringify(record));\r\n                        FL.common.printToConsole(\"remove -> _Ids in array \" + JSON.stringify(arrOf_Id));\r\n                        // var removePromise = _remove(ecn,record._id);\r\n                        var removePromise = _removeMultiple(ecn, arrOf_Id);\r\n                        removePromise.done(function (count) {\r\n                            FL.common.printToConsole(\">>>>> removePromise SUCCESS <<<<< record removed!\");\r\n                            def.resolve(count);\r\n                        });\r\n                        removePromise.fail(function (err) {\r\n                            FL.common.printToConsole(\">>>>> removePromise FAILURE <<<<<\" + err);\r\n                            def.reject(err);\r\n                        });\r\n                        // return def.resolve(data);\r\n                    } else {\r\n                        FL.common.printToConsole(\"........FL.API.removeRecordFromTable() table=\" + entityName + \" is ok but _id is missing\");\r\n                        return def.reject(\"removeRecordFromTable table=\" + entityName + \" -->error: array of _ids is empty\");//\r\n                    }\r\n                    // insertPromise.then(function(data){return def.resolve(data);},function(err){return def.reject(err);});\r\n                }\r\n            }\r\n            return def.promise();\r\n        },\r\n        removeAllRecords: function (eCN) {//remove all records from eCN\r\n            var def = $.Deferred();\r\n            var removeAllPromise = _removeAll(eCN);\r\n            removeAllPromise.done(function (count) {\r\n                FL.common.printToConsole(\">>>>> removeAllPromise SUCCESS <<<<< \");\r\n                return def.resolve(count);\r\n            });\r\n            removeAllPromise.fail(function (err) {\r\n                FL.common.printToConsole(\">>>>> removeAllPromise FAILURE <<<<<\" + err);\r\n                return def.reject(err);\r\n            });\r\n            return def.promise();\r\n        },\r\n        loadTable: function (entityName) {//returns the full content of a table from server\r\n            //assumes a login to an application exists\r\n            FL.common.printToConsole(\"....................................>beginning loadTable....with appToken=\" + JSON.stringify(FL.login.appToken));\r\n            var def = $.Deferred();\r\n            var ecn = FL.dd.getCEntity(entityName);\r\n            var loadTable = _findAll(ecn);\r\n            //fd.findAll(ecn, {\"query\":{}}, function(err, data){..})\r\n            loadTable.done(function (dataArray) {\r\n                FL.common.printToConsole(\">>>>> loadTable SUCCESS <<<<< \");\r\n                //dataArray has a format: [{\"_id\":1,\"d\":{\"53\":\"line 1 content of field1\",\"54\":\"line 1 content of field2\"},\"v\":0},\r\n                //\t\t\t\t\t\t\t{\"_id\":2,\"d\":{\"53\":\"line 2 content of field1\",\"54\":\"line 2 content of field2\"},\"v\":0}...,]\r\n                var arrLocallyTranslated = FL.API.convertArrC2LForEntity(entityName, dataArray);//dataArray =>[{\"_id\":123,d:{},r:[]},{\"_id\":124,d:{},r:[]},....{\"_id\":125,d:{},r:[]}]\r\n                //arrLocallyTranslated is flatted with the format:\r\n                // alert(\"arrLocallyTranslated=\"+arrLocallyTranslated);\r\n                //[{\"_id\":123234234,\"id\":1,produto\":\"High\",\"nome\":\"Rota dos Numeros, Lda\",\"marca\":\"Rota dos Numeros\",\"morada\":\"Av Ceuta, 21 B\",\"cod postal\":\"2700-188\",\"localidade\":\"Amadora\",\"telefone\":\"21 4945431 \",\"email\":\"rota.dos.numeros@sapo.pt \",\"id\":1,\"_id\":\"545b4f9afa2b1a3233bb6781\"},\r\n                def.resolve(arrLocallyTranslated);\r\n            });\r\n            loadTable.fail(function (err) {\r\n                FL.common.printToConsole(\">>>>> loadTable FAILURE <<<<<\" + err);\r\n                def.reject(err);\r\n            });\r\n            return def.promise();\r\n        },\r\n        xloadTableByCN: [\r\n            {eCN: \"6A\", _id: \"1\", fCN: \"51\"},\r\n            {eCN: \"6A\", _id: \"1\", fCN: \"51\"},\r\n            {eCN: \"6A\", _id: \"1\", fCN: \"51\"},\r\n        ],\r\n        loadTableByCN: function (eCN) {//returns the full content of a table from server \r\n            // format:\r\n            //    [{\"_id\":1,\"d\":{\"53\":\"line 1 content of field1\",\"54\":\"line 1 content of field2\"},\"v\":0},\r\n            //  \t{\"_id\":2,\"d\":{\"53\":\"line 2 content of field1\",\"54\":\"line 2 content of field2\"},\"v\":0}...,]\r\n            //\r\n            //assumes a login to an application exists\r\n            FL.common.printToConsole(\"....................................>beginning loadTableByCN....with appToken=\" + JSON.stringify(FL.login.appToken));\r\n            var def = $.Deferred();\r\n            // var eCN = FL.dd.getCEntity(entityName);\r\n            var loadTable = _findAll(eCN);\r\n            //fd.findAll(eCN, {\"query\":{}}, function(err, data){..})\r\n            loadTable.done(function (dataArray) {\r\n                FL.common.printToConsole(\">>>>> loadTableByCN SUCCESS <<<<< \");\r\n                def.resolve(dataArray);\r\n            });\r\n            loadTable.fail(function (err) {\r\n                FL.common.printToConsole(\">>>>> loadTableByCN FAILURE <<<<<\" + err);\r\n                def.reject(err);\r\n            });\r\n            return def.promise();\r\n        },\r\n        openTable: function (eCN) {\r\n            // use openTable(\"50\").id(\"1\") - returns {\"53\":\"line 1 content of field1\",\"54\":\"line 1 content of field2\"}\r\n            // use openTable(\"50\").id(\"1\")[\"53\"] - returns \"line 1 content of field1\"\r\n            // use openTable(\"50\").search({\"63\":\"jojo\"}).read[\"63\"]\r\n\r\n            FL.common.printToConsole(\"....................................>beginning loadTableByCN....with appToken=\" + JSON.stringify(FL.login.appToken));\r\n            var def = $.Deferred();\r\n            var loadPromise = this.loadTableByCN(eCN);\r\n            loadPromise.done(function (dataArray) {\r\n                //dataArray format--> [{\"_id\":1,\"d\":{\"53\":\"line 1 content of field1\",\"54\":\"line 1 content of field2\"},\"v\":0},...]\r\n                FL.common.printToConsole(\">>>>> openTable SUCCESS <<<<< \", \"API\");\r\n                var tableObj = {\r\n                    getId: function (id) {//returns the record with _id=id\r\n                        //example FL.API.openTable(\"6A\").getId(\"55a3ab0a3906b70f79d02bf4\") => JSON with all fCN:content\r\n                        //example FL.API.openTable(\"6A\").getId(\"55a3ab0a3906b70f79d02bf4\")[\"6C\"]=>\"Microsoft\"\r\n                        var recordEl = _.find(this.data, function (element) {\r\n                            return element._id == id;\r\n                        });\r\n                        if (_.isUndefined(recordEl)) {\r\n                            recordEl = null;\r\n                        }\r\n                        return recordEl.d;//returns a JSON with {fCN1:<content1>,fCN2:<content2>,...fCNn:<contentn>]\r\n                    },\r\n                    getColumn: function (fCN) {//returns an array with the content of fCN of each record\r\n                         //var colArr = _.pluck(this.data, fCN);//cannot be used because of d.fCN\r\n                        if(!fCN)\r\n                            fCN = this.defaultFCN;//if argument is missing default is used\r\n                        var colArr = [];\r\n                        _.each(this.data, function(element){\r\n                            colArr.push(element.d[fCN]);\r\n                          });\r\n                        return colArr;\r\n                    },\r\n                    setDefaultFCN: function(fCN){\r\n                        this.defaultFCN = fCN;\r\n                    },\r\n                    data: dataArray,\r\n                    defaultFCN:null\r\n                };\r\n                 def.resolve(tableObj);\r\n            });\r\n            loadPromise.fail(function (err) {\r\n                FL.common.printToConsole(\">>>>> openTable FAILURE <<<<<\" + err);\r\n                def.reject(err);\r\n            });\r\n            return def.promise();\r\n        },\r\n        loadTableId: function (entityName, field2) {//returns only the _id field and optionally a second field from server\r\n            //assumes a login to an application exists\r\n            FL.common.printToConsole(\"....................................>beginning loadTableId....with appToken=\" + JSON.stringify(FL.login.appToken));\r\n            var def = $.Deferred();\r\n            var ecn = FL.dd.getCEntity(entityName);\r\n            if (!ecn) {\r\n                alert(\"Error in FL.API.loadTableId the table <<\" + entityName + \">> not in local dictiionary!\");\r\n                return def.reject(\"Error in FL.API.loadTableId the table <<\" + entityName + \">> not in local dictiionary!\");\r\n            }\r\n            var projections = {\"_id\": 1};\r\n            if (field2) {\r\n                var fCN = FL.dd.getFieldCompressedName(entityName, field2);\r\n                projections[fCN] = 1;\r\n            }\r\n            // var loadTableId=_findAll(ecn,{},{\"_id\":1});\r\n            var loadTableId = _findAll(ecn, {}, projections);\r\n            loadTableId.done(function (dataArray) {\r\n                FL.common.printToConsole(\">>>>> loadTableId SUCCESS <<<<< \");\r\n                //dataArray has a format: [{\"_id\":1,\"d\":{\"53\":\"line 1 content of field1\",\"54\":\"line 1 content of field2\"},\"v\":0},\r\n                //\t\t\t\t\t\t\t{\"_id\":2,\"d\":{\"53\":\"line 2 content of field1\",\"54\":\"line 2 content of field2\"},\"v\":0}...,]\r\n                var arrLocallyTranslated = FL.API.convertArrC2LForEntity(entityName, dataArray);//dataArray =>[{\"_id\":123,d:{},r:[]},{\"_id\":124,d:{},r:[]},....{\"_id\":125,d:{},r:[]}]\r\n                //arrLocallyTranslated is flatted with the format:\r\n                // alert(\"arrLocallyTranslated=\"+arrLocallyTranslated);\r\n                //[{\"_id\":123234234,\"id\":1,produto\":\"High\",\"nome\":\"Rota dos Numeros, Lda\",\"marca\":\"Rota dos Numeros\",\"morada\":\"Av Ceuta, 21 B\",\"cod postal\":\"2700-188\",\"localidade\":\"Amadora\",\"telefone\":\"21 4945431 \",\"email\":\"rota.dos.numeros@sapo.pt \",\"id\":1,\"_id\":\"545b4f9afa2b1a3233bb6781\"},\r\n                def.resolve(arrLocallyTranslated);\r\n            });\r\n            loadTableId.fail(function (err) {\r\n                FL.common.printToConsole(\">>>>> loadTableId FAILURE <<<<<\" + err);\r\n                def.reject(err);\r\n            });\r\n            return def.promise();\r\n        }\r\n        ,\r\n        syncLocalStoreToServer: function () {//saves menu,style and font to server, retrieving them from localStore\r\n            var def = $.Deferred();\r\n            var lastMenuStr = localStorage.storedMenu\r\n            var lastStyleStr = localStorage.style;// Retrieve last saved style ex.red or spacelab\r\n            var lastFontFamilyStr = localStorage.fontFamily;// Retrieve last saved fontFamily ex.impact or georgia\r\n            var oMenu = JSON.parse(lastMenuStr);\r\n            FL.API.setMenu(oMenu);\r\n            FL.API.setStyle(lastStyleStr);\r\n            FL.API.setFontFamily(lastFontFamilyStr);\r\n            var promise = FL.API.save_Menu_style_fontFamily();\r\n            promise.done(function () {\r\n                FL.common.printToConsole(\">>>>> syncLocalStoreToServer SUCCESS <<<<< \");\r\n                def.resolve();\r\n            });\r\n            promise.fail(function (err) {\r\n                FL.common.printToConsole(\">>>>> syncLocalStoreToServer FAILURE <<<<<\" + err);\r\n                def.reject(err);\r\n            });\r\n\r\n            // FL.server.saveMainMenu(oMenu,lastStyleStr,lastFontFamilyStr,function(err){\r\n            // \tFL.common.printToConsole(\"FL.server syncLocalStoreToServer() -> menu style and font saved on server -->\"+err);\r\n            // \t// alert(\"FLMenu2.js saveMenuToLocalAndServer called FL.server.saveMainMenu with style=\"+lastStyleStr+ \" font=\"+lastFontFamilyStr);\r\n            // });\r\n            return def.promise();\r\n        }\r\n        ,\r\n        XcreateHistoMails_ifNotExisting: function () {//checks if histoMails exist. If not creates it\r\n            var eCN = FL.dd.getCEntity(\"_histoMail\");\r\n            // eCN = 23;\r\n            var def = $.Deferred();\r\n            FL.common.printToConsole(\">>>>>> createHistoMails_ifNotExisting eCN=\" + eCN);\r\n            if (eCN === null) { // does not exist we should create it\r\n                FL.common.printToConsole(\"....................................>beginning createHistoMails_ifNotExisting....with token=\" + JSON.stringify(FL.login.token));\r\n                FL.dd.createEntity(\"_histoMail\", \"mails histo entity\");//update local dict\r\n                FL.dd.addAttribute(\"_histoMail\", 'msg', 'events log', 'mail event', 'string', 'textbox', null);\r\n                // FL.dd.displayEntities();\r\n                var synch = FL.API.syncLocalDictionaryToServer('_histoMail');\r\n                synch.done(function () {\r\n                    FL.common.printToConsole(\">>>>>createHistoMails_ifNotExisting syncLocalDictionaryToServer SUCCESS <<<<<\");\r\n                    def.resolve();\r\n                });\r\n                synch.fail(function (err) {\r\n                    FL.common.printToConsole(\">>>>>createHistoMails_ifNotExisting syncLocalDictionaryToServer FAILURE <<<<< \" + err);\r\n                    def.reject(err);\r\n                });\r\n            } else {\r\n                FL.common.printToConsole(\">>>>>createHistoMails_ifNotExisting _histoMail exists !\");\r\n                def.resolve();//it exists already\r\n            }\r\n            return def.promise();\r\n        }\r\n        ,\r\n        createTableHistoMails_ifNotExisting: function (entityName) {// createHistoMails_ifNotExisting: function(entityName) {//creates \"_histoMail_<eCN>\" where eCN is the Entity Compressed name of entityName\r\n            //Note: entityName must exist\r\n            var def = $.Deferred();\r\n            if (!FL.dd.isEntityInLocalDictionary(entityName)) {\r\n                alert(\"createTableHistoMails_ifNotExisting ERROR entity \" + entityName + \" does not exist in Local Data Dictionary\");\r\n            } else {\r\n                var histoName = FL.dd.histoMailPeer(entityName);\r\n                var eCN = FL.dd.getCEntity(histoName);\r\n                FL.common.printToConsole(\">>>>>> createTableHistoMails_ifNotExisting for \" + entityName + \". Peer table is \" + histoName + \" with eCN=\" + eCN + \" for table\");\r\n                if (eCN === null) { // does not exist in local DD we should create it\r\n                    FL.common.printToConsole(\"....................................>beginning createTableHistoMails_ifNotExisting....with token=\" + JSON.stringify(FL.login.token));\r\n                    // FL.dd.createEntity(histoName,\"mails histo peer for initial name=\"+entityName);//update local dict\r\n                    // FL.dd.addAttribute(histoName,'msg','events log','mail event','string','textbox',null);\r\n                    FL.dd.createHistoMailPeer(entityName);\r\n                    // FL.dd.displayEntities();\r\n                    var synch = FL.API.syncLocalDictionaryToServer(histoName);\r\n                    synch.done(function () {\r\n                        FL.common.printToConsole(\">>>>>createTableHistoMails_ifNotExisting syncLocalDictionaryToServer SUCCESS <<<<<\");\r\n                        def.resolve();\r\n                    });\r\n                    synch.fail(function (err) {\r\n                        FL.common.printToConsole(\">>>>>createTableHistoMails_ifNotExisting syncLocalDictionaryToServer FAILURE <<<<< \" + err);\r\n                        def.reject(err);\r\n                    });\r\n                } else {\r\n                    FL.common.printToConsole(\">>>>>createTableHistoMails_ifNotExisting _histoMail exists !\");\r\n                    def.resolve();//it exists already\r\n                }\r\n            }\r\n            return def.promise();\r\n        }\r\n        ,\r\n        createTemplates_ifNotExisting: function () {//checks if templates exist. If not creates it\r\n            var eCN = FL.dd.getCEntity(\"_templates\");\r\n            // eCN = 23;\r\n            var def = $.Deferred();\r\n            FL.common.printToConsole(\">>>>>> createTemplates_ifNotExisting eCN=\" + eCN);\r\n            if (eCN === null) { // does not exist we should create it\r\n                FL.common.printToConsole(\"....................................>beginning createTemplates_ifNotExisting....with token=\" + JSON.stringify(FL.login.token));\r\n                FL.dd.createEntity(\"_templates\", \"templates entity\");//update local dict\r\n                FL.dd.addAttribute(\"_templates\", 'jsonTemplate', 'json of template', 'json of template', 'string', 'textbox', null);\r\n                // FL.dd.displayEntities();\r\n                var synch = FL.API.syncLocalDictionaryToServer('_templates');\r\n                synch.done(function () {\r\n                    FL.common.printToConsole(\">>>>>createTemplates_ifNotExisting syncLocalDictionaryToServer SUCCESS <<<<<\");\r\n                    def.resolve();\r\n                });\r\n                synch.fail(function (err) {\r\n                    FL.common.printToConsole(\">>>>>createTemplates_ifNotExisting syncLocalDictionaryToServer FAILURE <<<<< \" + err);\r\n                    def.reject(err);\r\n                });\r\n            } else {\r\n                FL.common.printToConsole(\">>>>>createTemplates_ifNotExisting _templates exists !\");\r\n                def.resolve();//it exists already\r\n            }\r\n            return def.promise();\r\n        }\r\n        ,\r\n        mailRecipientsOfTemplate: function (entityName, templateName) {//for list entityName and templateName returns all emails received in Webhook\r\n            //assumes a login to an application exists\r\n            FL.common.printToConsole(\"....................................>beginning mailRecipientsOfTemplate....with appToken=\" + JSON.stringify(FL.login.appToken));\r\n            var def = $.Deferred();\r\n            // var eCN = FL.dd.getCEntity(entityName);\r\n            // var eCN = FL.dd.getCEntity(\"_histoMail\");\r\n            // var fCN = FL.dd.getFieldCompressedName(\"_histoMail\",\"msg\");//the field to search within eCN\r\n\r\n            var histoName = FL.dd.histoMailPeer(entityName);\r\n            var eCN = FL.dd.getCEntity(histoName);\r\n            var fCN = FL.dd.getFieldCompressedName(histoName, \"msg\");//the field to search within eCN\r\n\r\n            var par1 = {};\r\n            par1[fCN + '.metadata.NName'] = templateName;\r\n            // par1[fCN+'.sender'] = sender;\r\n\r\n            var par2 = {};\r\n            // par2[fCN+'.sender'] = 1;\r\n            par2[fCN + '.email'] = 1;\r\n\r\n\r\n            // var mailRecipientsTable=_findAll(eCN,{fCN+'.metadata.NName':templateName},{fCN+'.sender':1});\r\n            var mailRecipientsTable = _findAll(eCN, par1, par2);\r\n            //fd.findAll(ecn, {\"query\":{}}, function(err, data){..})\r\n            mailRecipientsTable.done(function (data) {\r\n                FL.common.printToConsole(\">>>>> mailRecipientsTable SUCCESS <<<<< \");\r\n                recipientsArray = _.map(data, function (element) {//extracts emails only\r\n                    var xObj = element.d[fCN];\r\n                    return xObj.email;\r\n                });\r\n                def.resolve(recipientsArray);\r\n            });\r\n            mailRecipientsTable.fail(function (err) {\r\n                FL.common.printToConsole(\">>>>> mailRecipientsOfTemplate FAILURE <<<<<\" + err);\r\n                def.reject(err);\r\n            });\r\n            return def.promise();\r\n        }\r\n        ,\r\n        upsertByKey: function (keyFieldValue, entityName, record) {\r\n            //upsert record for <keyField>=<keyFieldValue> in table entityName\r\n            //record is a JSON that may contain _id key ex: {\"_id\":12345,\"id\":1,\"code\":\"abc\"}\r\n            FL.common.printToConsole(\"....................................>beginning upsertByKey....with appToken=\" + JSON.stringify(FL.login.appToken));\r\n            var def = $.Deferred();\r\n            var eCN = FL.dd.getCEntity(entityName);\r\n            if (eCN === null) {\r\n                FL.common.printToConsole(\"........FL.API.upsertByKey() table=\" + entityName + \" not in local dict !\");\r\n                return def.reject(\"upsertByKey table=\" + entityName + \" does not exist in local dict !\");\r\n            } else {//the table exists in local dict but may be unsynchronized\r\n                var oEntity = FL.dd.entities[entityName];\r\n                if (!oEntity.sync) {//table exists in local dict but is not in sync with server\r\n                    FL.common.printToConsole(\"........FL.API.upsertByKey() table=\" + entityName + \" exists in local dict but is not in sync\");\r\n                    return def.reject(\"upsertByKey table=\" + entityName + \" not in sync\");//\r\n                } else {//table exists and is in sync\r\n                    FL.common.printToConsole(\"........FL.API.upsertByKey() table=\" + entityName + \" is ok. We will upsert!\");\r\n                    // var _id = record[\"_id\"];//it can be null or existing\r\n                    var recordWithFCN = convertOneRecordTo_arrToSend(entityName, record);//returns {\"d\":{\"51\":\"cli1\",\"52\":\"Lx\",\"53\":\"Pt\"}}\r\n                    var upsertPromise = this.upsertByKeyOnECN(keyFieldValue, eCN, recordWithFCN.d);\r\n                    upsertPromise.done(function () {\r\n                        FL.common.printToConsole(\">>>>> FL.API.upsertByKey() upsertPromise SUCCESS <<<<< record updated!\");\r\n                        return def.resolve();\r\n                    });\r\n                    upsertPromise.fail(function (err) {\r\n                        FL.common.printToConsole(\">>>>> FL.API.upsertByKey() upsertPromise FAILURE <<<<<\" + err);\r\n                        return def.reject(err);\r\n                    });\r\n                }\r\n            }\r\n            return def.promise();\r\n        }\r\n        ,\r\n        upsertByKeyOnECN: function (keyFieldValue, eCN, recordWithFCN) {//upsert for <keyField>=<keyFieldValue>for list entityName and templateName returns all emails received in Webhook\r\n            //if _id exists =>direct update\r\n            //upsert record with field compressed names  for <fCNkey>=<keyFieldValue> in table with compressed name eCN\r\n            // assumes that: eCN exists and fCNKey exists in local dict and is in synch with server\r\n            //ex FL.API.upsertByKeyOnECN('51','123','50',{\"d\":{\"51\":\"cli1\",\"52\":\"Lx\",\"53\":\"Pt\"}});\r\n            FL.common.printToConsole(\"....................................>beginning upsertByKeyOnECN....with appToken=\" + JSON.stringify(FL.login.appToken));\r\n            var def = $.Deferred();\r\n\r\n            _update(eCN, keyFieldValue, recordWithFCN)\r\n                .then(function () {\r\n                    return def.resolve();\r\n                }\r\n                , function (err) {\r\n                    FL.common.printToConsole(\">>>> upsertByKeyOnECN with _id =>unable to insert\");\r\n                    return def.reject(\"upsertByKeyOnECN with _id unable to insert err=\" + err);\r\n                });\r\n            return def.promise();\r\n        }\r\n        ,\r\n        mandrillRejectListForSender: function (senderEmail) {//get reject list from mandrill only for sender=sender\r\n            FL.common.printToConsole(\"....................................>beginning mandrillRejectListForSender....with appToken=\" + JSON.stringify(FL.login.appToken));\r\n            var def = $.Deferred();\r\n            _mandrillRejectListForSender(senderEmail)\r\n                .then(function (data) {\r\n                    return def.resolve(data);\r\n                }\r\n                , function (err) {\r\n                    FL.common.printToConsole(\">>>> mandrillRejectListForSender FAILURE\");\r\n                    return def.reject(\"mandrillRejectListForSender FAILURE err=\" + err);\r\n                });\r\n            return def.promise();\r\n        }\r\n        ,\r\n        mandrillDeleteFromReject: function (arrayOfEmails) {//get reject list from mandrill only for sender=sender\r\n            FL.common.printToConsole(\"....................................>beginning mandrillDeleteFromReject....with appToken=\" + JSON.stringify(FL.login.appToken));\r\n            var def = $.Deferred();\r\n            _mandrillDeleteFromReject(arrayOfEmails)\r\n                .then(function (data) {\r\n                    return def.resolve(data);\r\n                }\r\n                , function (err) {\r\n                    FL.common.printToConsole(\">>>> mandrillDeleteFromReject FAILURE\");\r\n                    return def.reject(\"mandrillDeleteFromReject FAILURE err=\" + err);\r\n                });\r\n            return def.promise();\r\n        }\r\n        ,\r\n        customTable: function (entityProps) {\r\n            // Ex FL.API.customTable({singular:\"shipment\"});\r\n            //uses --> FL.dd.createEntity(\"sales rep\",\"employee responsable for sales\");\r\n            var def = $.Deferred();\r\n            var singularDefault = FL.dd.nextEntityBeginningBy(\"unNamed\");\r\n            entityProps = _.extend({singular: singularDefault, description: null}, entityProps);\r\n            if (!entityProps.description)\r\n                entityProps.description = entityProps.singular + \"'s description\";\r\n            FL.dd.createEntity(entityProps.singular, entityProps.description);\r\n            var singular = entityProps.singular;\r\n            var oEntity = FL.dd.entities[entityProps.singular];\r\n\r\n            // FL.API.data[entityName]={\r\n            // \tname:entityName,tfunc:function(){FL.common.printToConsole(\"--> \"+this.name);}\r\n            // };\r\n\r\n            // it works !\r\n            // FL.API.data[singular]={\r\n            // \tname :singular,\r\n            // \tget:function(prop){\r\n            // \t\tvar oEntity = FL.dd.entities[singular];\r\n            // \t\treturn oEntity[prop];\r\n            // \t},\r\n            // \tset:function(prop,value){\r\n            // \t\tvar oEntity = FL.dd.entities[singular];\r\n            // \t\toEntity[prop] = value;\r\n            // \t}\r\n            // };\r\n\r\n            function entity(entityProps) {\r\n                this.name = entityProps.singular;\r\n                this.description = entityProps.description;\r\n                var oEntity = FL.dd.entities[singular];\r\n                this.eCN = oEntity.csingular;\r\n            };\r\n            entity.prototype.get = function (prop) {\r\n                var oEntity = FL.dd.entities[singular];\r\n                return oEntity[prop];\r\n            };\r\n            entity.prototype.set = function (prop, value) {\r\n                var oEntity = FL.dd.entities[singular];\r\n                oEntity[prop] = value;\r\n            };\r\n            FL.API.data[singular] = new entity(entityProps);\r\n\r\n            return def.resolve();\r\n            // def.reject();//to test\r\n            return def.promise();\r\n            // alert(\"FL.server.test() -->\"+x);\r\n        }\r\n        ,\r\n        getFLContextFromBrowserLocationBar: function () {//to be used at the entry point of independent applications\r\n            //reads the browser adress bar to get the connection string then connects to the default application\r\n            var def = $.Deferred();\r\n            if (FL.API.isConnected()) {\r\n                // alert(\"getFLContextFromBrowserLocationBar --> independent app already connected !!! how is this possible ?\");\r\n                def.reject(\"getFLContextFromBrowserLocationBar --> independent app already connected !!! how is this possible ?\");\r\n            } else {\r\n                var fullUrl = window.location.href;\r\n                var connectionString = FL.common.getTag(fullUrl, \"connectionString\", \"#\");\r\n                if (connectionString) {\r\n                    connectionString = FL.common.enc(connectionString, -1);\r\n                    var loginObject = JSON.parse(connectionString);//ex {\"email\":\"toto114@toto.com\",\"userName\":\"\",\"password\":\"123\"}\r\n\r\n                    var fl = new flMain();//only place where this must exist !!!!\r\n                    FL.fl = fl;\r\n                    fl.serverName(FL.common.getServerName());\r\n\r\n                    var spinner = FL.common.loaderAnimationON('spinnerDiv');\r\n                    var connectionPromise = FL.API.connectUserToDefaultApp(loginObject.email, loginObject.password)\r\n                        // .then(function(){return appSetup(loginObject);})\r\n                        .then(function () {\r\n                            spinner.stop();\r\n                            FL.common.printToConsole(\">>>>> getFLContextFromBrowserLocationBar -> SUCCESS connecting to default app !<<<<< \");\r\n                            FL.common.printToConsole(\"after connection->\" + JSON.stringify(FL.login.token));\r\n                            def.resolve();\r\n                        }, function (err) {\r\n                            spinner.stop();\r\n                            FL.common.printToConsole(\">>>>> getFLContextFromBrowserLocationBar FAILURE <<<<<\" + err);\r\n                            def.reject(err);\r\n                        });\r\n                } else {\r\n                    alert(\"getFrameLinkContext --> No connectionString available !!!\");\r\n                    return;\r\n                }\r\n            }\r\n            return def.promise();\r\n        }\r\n        ,\r\n        nicoTestDuplicateIds: function (arrToTest) {\r\n            return nicoTestDuplicateIds(arrToTest);\r\n        }\r\n        ,\r\n        nicoTestDuplicateIds: function (arrToTest) {\r\n            return nicoTestDuplicateIds(arrToTest);\r\n        }\r\n        ,\r\n        testFunc: function (x) {\r\n            alert(\"FL.server.test() -->\" + x);\r\n        }\r\n    }\r\n        ;\r\n})\r\n();\r\n// });"]}