{"version":3,"sources":["FLAPI.js"],"names":[],"mappings":"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","file":"FLAPI-compiled.js","sourcesContent":["// jQuery(document).ready(function($){\r\n\t/**\r\n\t* data dictionary UI methods \r\n\t*/\r\n\t// FL = FL || {}; //gives undefined if FL is undefined \r\n\t// FL = {};\r\n\t// // a=\"A\";\r\n\t// b=\"B\";\r\n\t// var a = (typeof a === 'undefined') ? b : a;//if a is defined returns \"A\" otherwise returns the content of b\r\n\t// alert(\"zzz=\"+a);//sets \"B\"\r\n\r\n\tFL = (typeof FL === 'undefined') ? {} : FL;\r\n\tFL[\"API\"] = (function(){//name space FL.API\r\n\t\tvar internalTest = function(x) {//\r\n\t\t\talert(\"internalTest() -->\"+x);\r\n\t\t};\r\n\t\tvar tokenClear = function(){\r\n\t\t\ttoken = {\r\n\t\t\t\t\"clientName\":null,\r\n\t\t\t\t\"userName\":null,\r\n\t\t\t\t\"userPassWord\":null,\r\n\t\t\t\t\"domainName\":null,\r\n\t\t\t\t\"dbName\":null,\r\n\t\t\t\t// \"fl\":fl, //to maintain from start to end\r\n\t\t\t\t// \"fa\":fa,\r\n\t\t\t\t\"appDef\":null,\r\n\t\t\t\t\"appDescription\":null,\r\n\t\t\t\t\"appMenuLevel\":null,\r\n\t\t\t\t\"appRestrictions\":null,\r\n\t\t\t\t\"error\":null\r\n\t\t\t};\r\n\t\t\treturn token;\r\n\t\t};\r\n\t\t//-------- PROMISE WRAPPERS ------------------\r\n\t\tvar\t_applicationFullCreate = function(jsonParam) {\r\n\t\t\t//ex _applicationFullCreate({\"adminName\": \"nico@framelink.co\", \"adminPassWord\": \"coLas\"}, function (err, myApp){\r\n\t\t\tFL.common.printToConsole(\"....................................>beginning _applicationFullCreate....\");\r\n\t\t\tvar def = $.Deferred();\r\n\t\t\t// var fl = new flMain();//FL.server.fl\r\n\t\t\tvar fl = FL.fl; \r\n\t\t\tvar fa = new fl.app();\r\n\t\t\t// fl.setTraceClient(2);\r\n\t\t\tfl.applicationFullCreate(jsonParam, function (err, myApp){\r\n\t\t\t// fl.applicationFullCreate({\"adminName\": \"joao@framelink.co\", \"adminPassWord\": \"oLiVeIrA\"}, function (err, myApp){\r\n\t\t\t\t// err = \"abc\";\r\n\t\t\t\tif(err){\r\n\t\t\t\t\tFL.login.token = tokenClear();\r\n\t\t\t\t\t// FL.login.token = {\r\n\t\t\t\t\t// \t\"clientName\":null,\r\n\t\t\t\t\t// \t\"userName\":null,\r\n\t\t\t\t\t// \t\"userPassWord\":null,\r\n\t\t\t\t\t// \t\"domainName\":null,\r\n\t\t\t\t\t// \t\"dbName\":null,\r\n\t\t\t\t\t// \t// \"fl\":fl, //to maintain from start to end\r\n\t\t\t\t\t// \t// \"fa\":fa,\r\n\t\t\t\t\t// \t\"appDef\":null,\r\n\t\t\t\t\t// \t\"appDescription\":null,\r\n\t\t\t\t\t// \t\"appMenuLevel\":null,\r\n\t\t\t\t\t// \t\"appRestrictions\":null,\r\n\t\t\t\t\t// \t\"error\":null\t\t\t\t\t\t\r\n\t\t\t\t\t// };\r\n\t\t\t\t\tFL.common.printToConsole(\"=================================>ERROR ON _applicationFullCreate err=\"+err);\r\n\t\t\t\t\tdef.reject(\"ERROR ON _applicationFullCreate err=\"+ err);\r\n\t\t\t\t}else{\r\n\t\t\t\t\t// myAppFC=myApp;\r\n\t\t\t\t\tFL.common.printToConsole(\"....................................>_applicationFullCreate RESPONSE OK ON _applicationFullCreate....\");\r\n\t\t\t\t\tFL.login.token = {\r\n\t\t\t\t\t\t\"clientName\":myApp.clientName,\r\n\t\t\t\t\t\t\"userName\":myApp.userName,\r\n\t\t\t\t\t\t\"userPassWord\":myApp.userPassWord,\r\n\t\t\t\t\t\t\"domainName\":myApp.domainName,\r\n\t\t\t\t\t\t\"dbName\":myApp.dbName,\r\n\t\t\t\t\t\t\"fl\":fl,\r\n\t\t\t\t\t\t\"fa\":fa,\r\n\t\t\t\t\t\t\"appDef\":null,\r\n\t\t\t\t\t\t\"appDescription\":null,\r\n\t\t\t\t\t\t\"appMenuLevel\":null,\r\n\t\t\t\t\t\t\"appRestrictions\":null,\r\n\t\t\t\t\t\t\"error\":null\r\n\t\t\t\t\t};\r\n\t\t\t\t\tdef.resolve();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn def.promise();\r\n\t\t};\r\n\t\tvar _login = function() {//notice that login can be done without any application =>FL.login.token.appDef = null;\r\n\t\t\tFL.common.printToConsole(\"....................................>beginning _login....\");\r\n\t\t\tvar def = $.Deferred();\r\n\t\t\tvar fl = FL.fl; //new flMain();\r\n\t\t\t// var fa = new fl.app();\r\n\t\t\t// var currentURL =window.location.href;\r\n\t\t\t// var server = FL.common.stringAfterLast(currentURL,\"//\");\r\n\t\t\t// server = FL.common.stringBeforeFirst(server,\"/\");\r\n\t\t\t// // alert(server);\r\n\t\t\t// if (server ==\"localhost\")\r\n\t\t\t// \tserver = \"test.framelink.co\";\r\n\t\t\tfl.serverName(FL.common.getServerName());\r\n\t\t\tif(fl.getsId()!=undefined){//if getsId() has a session number it is connected !. We need to disconnect\r\n\t\t\t\tvar disconnectPromise = _disconnect();\r\n\t\t\t\tdisconnectPromise.done(function(){\r\n\t\t\t\t\tFL.dd.clear();\r\n\t\t\t\t\tfl.login({\"username\": FL.login.token.userName, \"password\": FL.login.token.userPassWord, \"domain\": FL.login.token.domainName}, function (err, data){\r\n\t\t\t\t\t\t// err = \"abc\";\r\n\t\t\t\t\t\tif(err){\r\n\t\t\t\t\t\t\t// alert(\"ERROR ON _login\");\r\n\t\t\t\t\t\t\tFL.common.printToConsole(\"============================>ERROR ON _login\");\r\n\t\t\t\t\t\t\tFL.login.token.error = \"_login\";\r\n\t\t\t\t\t\t\treturn def.reject(\"ERROR ON _login err=\"+err);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tvar appDef =data.applications[0];//it has a single application because it was just created\r\n\t\t\t\t\t\t\tif(appDef){\r\n\t\t\t\t\t\t\t\tFL.common.printToConsole(\"....................................>fl.login RESPONSE OK ON _login....\");\r\n\t\t\t\t\t\t\t\tFL.login.token.appDef = appDef;\r\n\t\t\t\t\t\t\t\tFL.login.token.appDescription = appDef.description;\r\n\t\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\t\treturn def.resolve();\r\n\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tFL.login.token.appDef = null;\r\n\t\t\t\t\t\t\t\tFL.login.token.appDescription = null;\r\n\t\t\t\t\t\t\t\tFL.common.printToConsole(\"....................................>fl.login RESPONSE OK ON _login but ERROR:no application available....\");\r\n\t\t\t\t\t\t\t\treturn def.reject(\"no application available\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t});\r\n\t\t\t\tdisconnectPromise.fail(function(){\r\n\t\t\t\t\tdef.reject(\"disconnect failed inside _login\");\r\n\t\t\t\t});\t\t\t\t\r\n\t\t\t}else{\r\n\t\t\t\tFL.dd.clear();\r\n\t\t\t\tfl.login({\"username\": FL.login.token.userName, \"password\": FL.login.token.userPassWord, \"domain\": FL.login.token.domainName}, function (err, data){\r\n\t\t\t\t\t// err = \"abc\";\r\n\t\t\t\t\tif(err){\r\n\t\t\t\t\t\t// alert(\"ERROR ON _login\");\r\n\t\t\t\t\t\tFL.common.printToConsole(\"============================>ERROR ON _login\");\r\n\t\t\t\t\t\tFL.login.token.error = \"_login\";\r\n\t\t\t\t\t\tdef.reject(\"ERROR ON _login err=\"+err);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar appDef =data.applications[0];//it has a single application because it was just created\r\n\t\t\t\t\t\tif(appDef){\r\n\t\t\t\t\t\t\tFL.common.printToConsole(\"....................................>fl.login RESPONSE OK ON _login....\");\r\n\t\t\t\t\t\t\tFL.login.token.appDef = appDef;\r\n\t\t\t\t\t\t\tFL.login.token.appDescription = appDef.description;\r\n\t\t\t\t\t\t\treturn def.resolve();\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tFL.login.token.appDef = null;\r\n\t\t\t\t\t\t\tFL.login.token.appDescription = null;\r\n\t\t\t\t\t\t\tFL.common.printToConsole(\"....................................>fl.login RESPONSE OK ON _login but ERROR:no application available....\");\r\n\t\t\t\t\t\t\treturn def.reject(\"no application available\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn def.promise();\r\n\t\t};\r\n\t\tvar _connect = function() {\r\n\t\t\t// ex jsonParam = {\"username\": myApp.userName, \"password\": myApp.userPassWord, \"domain\": myApp.domainName}\r\n\t\t\tFL.common.printToConsole(\"....................................>beginning _connect....\");\r\n\t\t\tvar def = $.Deferred();\r\n\t\t\t// var fl = FL.fl; //new flMain();\r\n\t\t\tvar fa = FL.login.token.fa;//new fl.app();\r\n\t\t\tfa.connect(FL.login.token.appDef, function(err, data2){\r\n\t\t\t\t// err = \"abc\";\r\n\t\t\t\tif(err){\r\n\t\t\t\t\tFL.common.printToConsole(\"=============================>ERROR ON _connect\");\r\n\t\t\t\t\tFL.login.token.error = \"_connect\";\r\n\t\t\t\t\tdef.reject(err);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tFL.common.printToConsole(\"....................................>fa.connect RESPONSE OK ON _connect....\");\r\n\t\t\t\t\tFL.login.token.dbName = FL.login.token.appDef.dbName;\r\n\t\t\t\t\t// alert(\"OK USER CREATED AND CONNECTED  ->\"+JSON.stringify(FL.login.token));\r\n\t\t\t\t\tFL.common.printToConsole(\"=====================================>_connect: OK USER CONNECTED  ->\"+JSON.stringify(FL.login.token));\r\n\t\t\t\t\tvar md = new FL.fl.mandrill();\r\n\t\t\t\t\tmd.init( {key:FL.common.getMandrillKey()},function(err,data){\r\n\t\t\t\t\t\tif(err){\r\n\t\t\t\t\t\t\talert(\"_connect --> error in Mandrill initialization \");\r\n\t\t\t\t\t\t\treturn def.reject(\"_connect --> error in Mandrill initialization\");\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tFL.common.printToConsole(\"_connect --> Mandrill initialization Successfull\");\r\n\t\t\t\t\t\t\treturn def.resolve();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});//call once\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn def.promise();\r\n\t\t};\r\n\t\tvar _disconnect = function(){\r\n\t\t\tFL.common.printToConsole(\"....................................>beginning _disconnect....\"+JSON.stringify(FL.login.token));\r\n\t\t\tvar def = $.Deferred();\r\n\t\t\tvar fl = FL.fl;//new flMain();\r\n\t\t\tvar fa = FL.login.token.fa;//new fl.app();\r\n\t\t\t// var fa = new fl.app();\r\n\t\t\t// var fl= token.fl;\r\n\t\t\t// var fa= token.fa;\r\n\t\t\tfa.disconnect(function(err,data){\r\n\t\t\t\tFL.common.printToConsole(\".............................fa.disconnect ON _disconnect....\");\r\n\t\t\t\t// err = \"abc\";\r\n\t\t\t\tif(err){\r\n\t\t\t\t\talert(\"ERROR ON _disconnect err=\"+err);\r\n\t\t\t\t\tFL.common.printToConsole(\"======================>ERROR ON _disconnect err=\"+err);\r\n\t\t\t\t\tdef.reject(err);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tFL.common.printToConsole(\"=====================================>_disconnect: OK USER DISCONNECTED  ->token=\"+JSON.stringify(FL.login.token));\r\n\t\t\t\t\tdef.resolve();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn def.promise();\r\n\t\t};\r\n\t\tvar _isUserExist = function(userName){\r\n\t\t\tFL.common.printToConsole(\"....................................>beginning _isUserExist....\"+JSON.stringify(FL.login.token),\"API\");\r\n\t\t\tvar def = $.Deferred();\r\n\t\t\tvar fl = FL.fl;//new flMain();\r\n\t\t\t// if(!fl){\r\n\t\t\t// \tfl = new flMain();\r\n\t\t\t// \tFL.fl = fl;\r\n\t\t\t// }\t\t\r\n\t\t\tfl.isUserExist({\"adminName\": \"nico@framelink.co\", \"adminPassWord\":\"coLas\",\"userName\":userName}, function(err, result){\r\n\t\t\t\tFL.common.printToConsole(\".............................fa.isUserExist ON _isUserExist....\");\r\n\t\t\t\t// err = \"abc\";\r\n\t\t\t\tif(err){\r\n\t\t\t\t\t// alert(\"ERROR ON _isUserExist err=\"+err);\r\n\t\t\t\t\tFL.common.printToConsole(\"======================>ERROR ON _isUserExist err=\"+err);\r\n\t\t\t\t\tdef.reject(\"ERROR ON _isUserExist err=\"+ err);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tFL.common.printToConsole(\"=====================================>_isUserExist: OK \");\r\n\t\t\t\t\tvar exists = false;\r\n\t\t\t\t\tif(result)\r\n\t\t\t\t\t\texists = true; \r\n\t\t\t\t\tdef.resolve(exists);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn def.promise();\r\n\t\t};\r\n\t\tvar _applicationRemove = function(){\r\n\t\t\tvar def = $.Deferred();\r\n\t\t\tvar fl = FL.fl; //new flMain();\r\n\t\t\t// var fl = new flMain();\r\n\t\t\t// var fa = FL.login.token.fa;//new fl.app();\r\n\t\t\tfl.applicationRemove({\"adminName\": FL.login.token.userName, \"adminPassWord\": FL.login.token.userPassWord, \"domain\": FL.login.token.domainName}, function (err, data){\r\n\t\t\t\tFL.common.printToConsole(\"............................._applicationRemove....\");\r\n\t\t\t\t// err = \"abc\";\r\n\t\t\t\tif(err){\r\n\t\t\t\t\talert(\"ERROR ON _applicationRemove err=\"+err);\r\n\t\t\t\t\tFL.common.printToConsole(\"======================>ERROR ON _applicationRemove err=\"+err);\r\n\t\t\t\t\tdef.reject(err);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tFL.login.token.appDef = null;\r\n\t\t\t\t\tFL.common.printToConsole(\"=====================================>_applicationRemove: OK APPLICATION REMOVED  ->token=\"+JSON.stringify(FL.login.token));\r\n\t\t\t\t\tdef.resolve();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn def.promise();\r\n\t\t};\r\n\t\tvar _applicationCreate = function(appDescription){\r\n\t\t\tvar def = $.Deferred();\r\n\t\t\tvar fl = FL.fl; //new flMain();\r\n\t\t\t// var fl = new flMain();\r\n\t\t\t// var fa = FL.login.token.fa;//new fl.app();\r\n\t\t\tfl.applicationCreate({\"adminName\": FL.login.token.userName, \"adminPassWord\": FL.login.token.userPassWord, \"domainPrefix\": \"test\",\r\n\t\t\t\t\"description\": appDescription}, function (err, data){\r\n\t\t\t\tFL.common.printToConsole(\"............................._applicationCreate....\");\r\n\t\t\t\t// err = \"abc\";\r\n\t\t\t\tif(err){\r\n\t\t\t\t\t// alert(\"ERROR ON _applicationCreate err=\"+err);\r\n\t\t\t\t\tFL.common.printToConsole(\"======================>ERROR ON _applicationCreate err=\"+err);\r\n\t\t\t\t\tdef.reject(\"ERROR ON _applicationCreate err=\"+ err);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tFL.login.token.appDef = data.d;\r\n\t\t\t\t\tFL.login.token.domainName = data.d['domainName'];\r\n\t\t\t\t\tFL.login.token.appDescription = appDescription;\r\n\t\t\t\t\tFL.common.printToConsole(\"=====================================>_applicationCreate: OK APPLICATION CREATED  ->token=\"+JSON.stringify(FL.login.token));\r\n\t\t\t\t\tdef.resolve();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn def.promise();\r\n\t\t};\r\n\t\tvar\t_clientRemove = function(){\r\n\t\t\tvar def = $.Deferred();\r\n\t\t\tvar fl = FL.fl; //new flMain();\r\n\t\t\tvar fa = FL.login.token.fa;//new fl.app();\r\n\t\t\tfl.clientRemove({\"adminName\": \"nico@framelink.co\", \"adminPassWord\": \"coLas\", \"clientName\": FL.login.token.clientName}, function (err, data){\r\n\t\t\t// fl.clientRemove({\"adminName\": FL.login.token.userName, \"adminPassWord\": FL.login.token.userPassWord, \"clientName\": FL.login.token.clientName}, function (err, data){\r\n\t\t\t\tFL.common.printToConsole(\"............................._clientRemove....\");\r\n\t\t\t\t// err = \"abc\";\r\n\t\t\t\tif(err){\r\n\t\t\t\t\talert(\"ERROR ON _clientRemove err=\"+err);\r\n\t\t\t\t\tFL.common.printToConsole(\"======================>ERROR ON _clientRemove err=\"+err);\r\n\t\t\t\t\tdef.reject(err);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvar oldUserName = FL.login.token.userName;\r\n\t\t\t\t\tFL.login.token = tokenClear();\r\n\t\t\t\t\t// alert(\"_clientRemove DONE user=\" + oldUserName + \"was removed!  ->token=\"+JSON.stringify(FL.login.token));\r\n\t\t\t\t\tFL.common.printToConsole(\"=====================================>_clientRemove DONE user=\" + oldUserName + \"was removed! ->token=\"+JSON.stringify(FL.login.token));\r\n\t\t\t\t\tdef.resolve();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn def.promise();\r\n\t\t};\r\n\t\tvar _applicationFinalize = function(userName,appDescription){\r\n\t\t\tvar def = $.Deferred();\r\n\t\t\tFL.login.token.appDescription = \"application of user \"+userName;\r\n\t\t\tif(appDescription)\r\n\t\t\t\tFL.login.token.appDescription = appDescription;\r\n\t\t\tvar fl = FL.fl; //new flMain();\r\n\t\t\tvar fa = FL.login.token.fa;//new fl.app();\r\n\t\t\t// fl.applicationFinalize({\"adminName\":\"nico@framelink.co\",\"adminPassWord\":\"coLas\",\r\n\t\t\t// \t\t\"userName\":FL.login.token.userName,\"clientName\":FL.login.token.clientName,\"domainName\":FL.login.token.domainName,\r\n\t\t\t// \t\t\"newUserName\":userName,\"newClientName\":userName,\r\n\t\t\t// \t\t\"newDescription\":FL.login.token.appDescription}, function(err, data){\r\n\t\t\tfl.applicationFinalize({\"adminName\":FL.login.token.userName,\"adminPassWord\":FL.login.token.userPassWord,\r\n\t\t\t\t\t\"userName\":FL.login.token.userName,\"clientName\":FL.login.token.clientName,\"domainName\":FL.login.token.domainName,\r\n\t\t\t\t\t\"newUserName\":userName,\"newClientName\":userName,\r\n\t\t\t\t\t\"newDescription\":FL.login.token.appDescription}, function(err, data){\r\n\r\n\t\t\t\tFL.common.printToConsole(\"............................._applicationFinalize....with:\"+userName+\"/\"+appDescription);\r\n\t\t\t\t// err = \"abc\";\r\n\t\t\t\tif(err){\r\n\t\t\t\t\t// alert(\"ERROR ON _applicationFinalize err=\"+err);\r\n\t\t\t\t\tFL.common.printToConsole(\"======================>ERROR ON _applicationFinalize err=\"+err);\r\n\t\t\t\t\tvar errMsg = \"ERROR ON _applicationFinalize err=\"+ err;\r\n\t\t\t\t\tvar posIndex = err.indexOf(\"already exist\");//HACK this means that the error is because the user already exists\r\n\t\t\t\t\tif (posIndex>=0)\r\n\t\t\t\t\t\terrMsg = \"existing user ERROR \" + err;\r\n\t\t\t\t\tdef.reject(errMsg);\r\n\t\t\t\t}else{\r\n\t\t\t\t\t// FL.login.token = {\r\n\t\t\t\t\t//\t\"clientName\":null,\r\n\t\t\t\t\t//\t\"userName\":null,\r\n\t\t\t\t\t//\t\"userPassWord\":null,\r\n\t\t\t\t\t//\t\"domainName\":null,\r\n\t\t\t\t\t//\t\"fl\":fl,\r\n\t\t\t\t\t//\t\"fa\":fa,\r\n\t\t\t\t\t//\t\"appDef\":null,\r\n\t\t\t\t\t//\t\"appDescription\":null,\r\n\t\t\t\t\t//\t\"appMenuLevel\":null,\r\n\t\t\t\t\t//\t\"appRestrictions\":null,\r\n\t\t\t\t\t//\t\"error\":\"fl.applicationFullCreate\"\r\n\t\t\t\t\t//};\t\t\t\t\r\n\t\t\t\t\tFL.login.token.clientName = userName;\r\n\t\t\t\t\tFL.login.token.userName = userName;\r\n\t\t\t\t\t// FL.login.token.userPassWord = null;\r\n\t\t\t\t\tFL.common.printToConsole(\"=====================================>_applicationFinalize: OK ->token=\"+JSON.stringify(FL.login.token));\r\n\t\t\t\t\tdef.resolve();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn def.promise();\r\n\t\t};\r\n\t\tvar _userChangePassWord = function(password){\r\n\t\t\tvar def = $.Deferred();\r\n\t\t\tvar fl = FL.fl; //new flMain();\r\n\t\t\t// var fl = new flMain();\r\n\t\t\t// var fa = FL.login.token.fa;//new fl.app();\r\n\t\t\tfl.userChangePassWord({\"adminName\":\"nico@framelink.co\", \"adminPassWord\":\"coLas\",\r\n\t\t\t\t\t\"userName\":FL.login.token.userName, \"userPassWord\":password}, function(err, result){\r\n\t\t\t\tFL.common.printToConsole(\"............................._userChangePassWord....TO \"+password);\r\n\t\t\t\t// err = \"abc\";\r\n\t\t\t\tif(err){\r\n\t\t\t\t\talert(\"ERROR ON _userChangePassWord err=\"+err);\r\n\t\t\t\t\tFL.common.printToConsole(\"======================>ERROR ON _userChangePassWord err=\"+err);\r\n\t\t\t\t\tdef.reject(err);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tFL.login.token.userPassWord = password;\r\n\t\t\t\t\tFL.common.printToConsole(\"=====================================>_userChangePassWord: OK Password changed to \" + password + \"  ->token=\"+JSON.stringify(FL.login.token));\r\n\t\t\t\t\tdef.resolve();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn def.promise();\r\n\t\t};\r\n\t\tvar _userChangeNameAndPassWord = function(newUserName, newPassword){ //XXXXXX\r\n\t\t\tvar def = $.Deferred();\r\n\t\t\tvar fl = FL.fl; //new flMain();\r\n\t\t\t// var fl = new flMain();\r\n\t\t\t// var fa = FL.login.token.fa;//new fl.app();\r\n\t\t\tfl.userChangePassWord({\"adminName\":\"nico@framelink.co\", \"adminPassWord\":\"coLas\",\r\n\t\t\t\t\t\"userName\":FL.login.token.userName, \"userPassWord\":password}, function(err, result){\r\n\t\t\t\tFL.common.printToConsole(\"............................._userChangePassWord....TO \"+password);\r\n\t\t\t\t// err = \"abc\";\r\n\t\t\t\tif(err){\r\n\t\t\t\t\talert(\"ERROR ON _userChangePassWord err=\"+err);\r\n\t\t\t\t\tFL.common.printToConsole(\"======================>ERROR ON _userChangePassWord err=\"+err);\r\n\t\t\t\t\tdef.reject(err);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tFL.login.token.userPassWord = password;\r\n\t\t\t\t\tFL.common.printToConsole(\"=====================================>_userChangePassWord: OK Password changed to \" + password + \"  ->token=\"+JSON.stringify(FL.login.token));\r\n\t\t\t\t\tdef.resolve();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn def.promise();\r\n\t\t};\t\t\r\n\t\t//-------- END OF LOGIN WRAPPERS ------------------\t\t\r\n\t\t\r\n\t\t//-------- OTHER WRAPPERS ------------------\t\t\r\n\t\tvar _getFullDictionary = function(){\r\n\t\t\tvar def = $.Deferred();\r\n\t\t\tvar fl = FL.fl; //new flMain();\r\n\t\t\tif(!fl){\r\n\t\t\t\t// FL.common.printToConsole(\"======================>ERROR ON _getFullDictionary ->no connection\");\r\n\t\t\t\tdef.reject(\"ERROR: no connection available\");\r\n\t\t\t}else{\r\n\t\t\t\tvar fEnt = new fl.entity();\r\n\t\t\t\tfEnt.getAllWithField({\"query\":{}}, function(err ,entities){\r\n\t\t\t\t\tFL.common.printToConsole(\".............................fEnt.getAllWithField ON _getFullDictionary\");\r\n\t\t\t\t\t// err = \"abc\";\r\n\t\t\t\t\tif(err){\r\n\t\t\t\t\t\t// alert(\"ERROR ON _getFullDictionary err=\"+err);\r\n\t\t\t\t\t\tFL.common.printToConsole(\"======================>ERROR ON _getFullDictionary err=\"+err);\r\n\t\t\t\t\t\tdef.reject(err);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tFL.common.printToConsole(\"=====================================>_getFullDictionary: OK ->entites=\"+JSON.stringify(entities));\r\n\t\t\t\t\t\tdef.resolve(entities);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn def.promise();\r\n\t\t};\r\n\t\tvar _entity_update = function(json){\r\n\t\t\t//ex \tvar removeTablePromise =_entity_update({query:{\"_id\":ecn},update:{$set:{\"3\":'$'+ecn} } });\r\n\t\t\tvar def = $.Deferred();\r\n\t\t\tvar fl = FL.fl; //new flMain();\r\n\t\t\tif(!fl){\r\n\t\t\t\t// FL.common.printToConsole(\"======================>ERROR ON _getFullDictionary ->no connection\");\r\n\t\t\t\treturn def.reject(\"ERROR: no connection available\");\r\n\t\t\t}\r\n\t\t\tvar fEnt = new fl.entity();\r\n\t\t\tfEnt.update(json, function(err ,data){\r\n\t\t\t\tFL.common.printToConsole(\".............................fEnt.update ON _getFullDictionary\");\r\n\t\t\t\t// err = \"abc\";\r\n\t\t\t\tif(err){\r\n\t\t\t\t\t// alert(\"ERROR ON _getFullDictionary err=\"+err);\r\n\t\t\t\t\tFL.common.printToConsole(\"======================>ERROR ON _getFullDictionary err=\"+err);\r\n\t\t\t\t\treturn def.reject(err);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tFL.common.printToConsole(\"=====================================>_entity_update: OK \");\r\n\t\t\t\t\treturn def.resolve(data);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn def.promise();\r\n\t\t};\r\n\t\tvar _addWithFields = function(entityJSON){//creates an entity with the fields in server, with one single call\r\n\t\t\tvar def = $.Deferred();\r\n\t\t\tvar fl = FL.fl; //new flMain();\r\n\t\t\t// var fl = new flMain();\r\n\t\t\t// var fa = FL.login.token.fa;//new fl.app();\r\n\t\t\tvar fEntity = new fl.entity();\r\n\t\t\tfEntity.addWithFields(entityJSON, function (err, data){\r\n\t\t\t\tFL.common.printToConsole(\"............................._addWithFields....\");\r\n\t\t\t\t// err = \"abc\";\r\n\t\t\t\tif(err){\r\n\t\t\t\t\t// alert(\"ERROR ON _addWithFields err=\"+err);\r\n\t\t\t\t\tFL.common.printToConsole(\"======================>ERROR ON _addWithFields err=\"+err);\r\n\t\t\t\t\tdef.reject(\"ERROR: _addWithFields err=\"+err);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvar entityName = entityJSON[\"3\"];//the same as oEntity.singular\r\n\t\t\t\t\tvar oEntity = FL.dd.getEntityBySingular(entityName);\r\n\t\t\t\t\tvar eCN=data[0]['_id'];\r\n\t\t\t\t\toEntity.csingular = eCN;\r\n\t\t\t\t\tfor (var i=0;i<data[0].fields.length;i++){//\r\n\t\t\t\t\t\tFL.dd.setFieldCompressedName(entityName,data[0].fields[i].d[\"3\"],data[0].fields[i][\"_id\"]);//xSingular,fieldName,fieldCN\r\n\t\t\t\t\t}\r\n\t\t\t\t\tFL.dd.setSync(entityName,true);\r\n\r\n\t\t\t\t\tFL.common.printToConsole(\"=====================================>_addWithFields: OK \" + entityName + \" stored on server and local Dict in synch\");\r\n\t\t\t\t\tdef.resolve();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn def.promise();\r\n\t\t};\r\n\t\tvar _fieldUpdate = function(obj){//updates a field with _id=field_id defined inside object obj with all field definitions\r\n\t\t\t//obj - {_id:field_id,name_3:x1,description_4:x2,label_K:x3,type_M:x4,typeUI_9:x5,enumerable_N:x6} - all keys must be supplied\r\n\t\t\tvar def = $.Deferred();\r\n\t\t\tvar fl = FL.fl; //new flMain();\r\n\t\t\t// var fl = new flMain();\r\n\t\t\t// var fa = FL.login.token.fa;//new fl.app();\r\n\t\t\tvar fField = new fl.field();\r\n\t\t\tvar field_id = obj._id;\r\n\t\t\tfField.update({\"query\":{\"_id\":field_id},\"update\":{\"3\":obj.name_3,\"4\":obj.description_4,\"K\":obj.label_K,\"M\":obj.type_M,\"9\":obj.typeUI_9,\"N\":obj.enumerable_N,\"O\":obj.Nico_O }}, function (err, data){\r\n\t\t\t\tFL.common.printToConsole(\"............................._fieldUpdate....\");\r\n\t\t\t\t// err = \"abc\";\r\n\t\t\t\tif(err){\r\n\t\t\t\t\t// alert(\"ERROR ON _addWithFields err=\"+err);\r\n\t\t\t\t\tFL.common.printToConsole(\"======================>ERROR ON _fieldUpdate err=\"+err);\r\n\t\t\t\t\tdef.reject(\"ERROR: _fieldUpdate err=\"+err);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tFL.common.printToConsole(\"=====================================>_fieldUpdate: OK \");\r\n\t\t\t\t\tdef.resolve(data);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn def.promise();\r\n\t\t};\r\n\t\tvar _fieldUpdateMultiple = function(arrOf_Obj){ //updates multiple fields\r\n\t\t\tvar def = $.Deferred();\r\n\t\t\tvar promise = FL.API.queueManager(\"_fieldUpdate\",\"ignored\",arrOf_Obj);\r\n\t\t\tpromise.done(function(result){\r\n\t\t\t\treturn def.resolve(arrOf_IdToRemove.length);\r\n\t\t\t});\r\n\t\t\tpromise.fail(function(err){\r\n\t\t\t\treturn def.reject(err);\r\n\t\t\t});\r\n\t\t\treturn def.promise();\t\t\r\n\t\t};\r\n\t\tvar _userCreate = function(userName,userPassWord,userType){//username is always an email\r\n\t// fl.userCreate({\"adminName\": \"nico@framelink.co\", \"adminPassWord\": \"coLas\", \"userName\": \"toto@gmail.com\", \"userPassWord\": \"dodo12345\", \r\n\t//\t\t\"userType\": 'user'}, function (err, data){\r\n\t\t\tvar def = $.Deferred();\r\n\t\t\tvar fl = FL.fl; //new flMain();\r\n\t\t\t// if(!fl){\r\n\t\t\t// \tfl = new flMain();\r\n\t\t\t// }\r\n\t\t\t// fl.userChangePassWord({\"adminName\":\"nico@framelink.co\", \"adminPassWord\":\"coLas\",\r\n\t\t\t//\t\"userName\":FL.login.token.userName, \"userPassWord\":password}, function(err, result){\r\n\t\t\tfl.userCreate({\"adminName\": \"nico@framelink.co\", \"adminPassWord\": \"coLas\", \"userName\": userName, \"userPassWord\":userPassWord,\r\n\t\t\t\t\"userType\": userType}, function (err, data){//userType: user/clientAdmin/admin\r\n\t\t\t\tFL.common.printToConsole(\"............................._userCreate....TO \"+password);\r\n\t\t\t\t// err = \"abc\";\r\n\t\t\t\tif(err){\r\n\t\t\t\t\t// alert(\"ERROR ON _userCreate err=\"+err);\r\n\t\t\t\t\tFL.common.printToConsole(\"======================>ERROR ON _userCreate err=\"+err);\r\n\t\t\t\t\t// test if user already exists..\r\n\t\t\t\t\tif(err =\"Name already exists\"){\r\n\t\t\t\t\t\tFL.login.token.userName = userName;\r\n\t\t\t\t\t\t// FL.login.token.userPassWord = userPassWord;\r\n\t\t\t\t\t\tFL.fl = fl;\r\n\t\t\t\t\t\tFL.common.printToConsole(\"=====================================>_userCreate: OK user already exists  ->token=\"+JSON.stringify(FL.login.token));\r\n\t\t\t\t\t\tdef.resolve();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tdef.reject(err);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\t// FL.login.token = {\r\n\t\t\t\t\t//\t\"clientName\":null,\r\n\t\t\t\t\t//\t\"userName\":null,\r\n\t\t\t\t\t//\t\"userPassWord\":null,\r\n\t\t\t\t\t//\t\"domainName\":null,\r\n\t\t\t\t\t//\t\"fl\":fl,\r\n\t\t\t\t\t//\t\"fa\":fa,\r\n\t\t\t\t\t//\t\"appDef\":null,\r\n\t\t\t\t\t//\t\"appDescription\":null,\r\n\t\t\t\t\t//\t\"appMenuLevel\":null,\r\n\t\t\t\t\t//\t\"appRestrictions\":null,\r\n\t\t\t\t\t//\t\"error\":\"fl.applicationFullCreate\"\t\t\t\t\t\r\n\t\t\t\t\tFL.login.token.userName = userName;\r\n\t\t\t\t\tFL.login.token.userPassWord = userPassWord;\r\n\t\t\t\t\tFL.fl = fl;\r\n\t\t\t\t\tFL.common.printToConsole(\"=====================================>_userCreate: OK  ->token=\"+JSON.stringify(FL.login.token));\r\n\t\t\t\t\tdef.resolve();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn def.promise();\r\n\t\t};\r\n\t\tvar _restoreMainMenuStyleANDfontFamily = function(){//restores main menu, style and fontFamily\r\n\t\t\tvar def = $.Deferred();\r\n\t\t\tvar fl = FL.fl; //new flMain();\r\n\t\t\t// var fl = new flMain();\r\n\t\t\t// var fa = FL.login.token.fa;//new fl.app();\r\n\t\t\tFL.login.appToken = {\r\n\t\t\t\t\"menu\":null,\r\n\t\t\t\t\"style\":null,\r\n\t\t\t\t\"fontFamily\":null,\r\n\t\t\t\t\"homePage\":null,\r\n\t\t\t\t\"error\":null\r\n\t\t\t};\r\n\t\t\tvar fd = new fl.data();\r\n\t\t\tfd.findOne(\"40\",{\"query\":{\"_id\":1}}, function(err, data){\r\n\t\t\t\tFL.common.printToConsole(\"............................._restoreMainMenuStyleANDfontFamily....\");\r\n\t\t\t\t// err = \"abc\";\r\n\t\t\t\tif(err){\r\n\t\t\t\t\t// alert(\"ERROR ON _addWithFields err=\"+err);\r\n\t\t\t\t\tFL.login.appToken.error = \"_restoreMainMenuStyleANDfontFamily err=\"+err;\r\n\t\t\t\t\tFL.common.printToConsole(\"======================>ERROR ON \" + FL.login.appToken.error);\r\n\t\t\t\t\tdef.reject(\"ERROR: \" + FL.login.appToken.error);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tFL.common.printToConsole(\"=====================================>_restoreMainMenuStyleANDfontFamily: OK checks for nulls\");\r\n\t\t\t\t\tvar retData = null;\r\n\t\t\t\t\tvar oMenu = FL.login.defaultMenu;\r\n\t\t\t\t\tvar style = FL.login.defaultStyle;\r\n\t\t\t\t\tvar fontFamily = FL.login.defaultFontFamily;\r\n\t\t\t\t\tif(!data){\r\n\t\t\t\t\t\tFL.common.printToConsole(\"=====================================>_restoreMainMenuStyleANDfontFamily: OK With null data\");\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(!data.d){\r\n\t\t\t\t\t\t\tFL.common.printToConsole(\"=====================================>_restoreMainMenuStyleANDfontFamily: OK With null data.d\");\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tif(data.d[\"45\"])//menu\r\n\t\t\t\t\t\t\t\toMenu = data.d[\"45\"];\r\n\t\t\t\t\t\t\tif(data.d[\"46\"])//style\r\n\t\t\t\t\t\t\t\tstyle = data.d[\"46\"];\r\n\t\t\t\t\t\t\tif(data.d[\"47\"])//fontFamily\r\n\t\t\t\t\t\t\t\tfontFamily = data.d[\"47\"];\r\n\t\t\t\t\t\t\tFL.common.printToConsole(\"=====================================>_restoreMainMenuStyleANDfontFamily: OK \");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tretData = {oMenu: oMenu,style: style,fontFamily: fontFamily};\r\n\t\t\t\t\tFL.login.appToken.menu = oMenu;\r\n\t\t\t\t\tFL.login.appToken.style = style;\r\n\t\t\t\t\tFL.login.appToken.fontFamily = fontFamily;\r\n\t\t\t\t\tFL.login.appToken.homePage = null;\r\n\t\t\t\t\tFL.login.appToken.error = null;\r\n\t\t\t\t\tdef.resolve(retData);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn def.promise();\r\n\t\t};\r\n\t\tvar insertMacrosOnHomePage = function(textHTML){\r\n\t\t\t//only supports:<%= appDescription %>, <%= shortUserName %> and <%= userName %>\r\n\t\t\tvar templateFunction = _.template(textHTML);\r\n\t\t\tvar pos = FL.login.token.userName.indexOf(\"@\");\r\n\t\t\tvar shortUserName = FL.login.token.userName.substring(0,pos);\r\n\t\t\tvar templateArg = {appDescription:FL.login.token.appDescription, userName:FL.login.token.userName, shortUserName:shortUserName};\r\n\t\t\treturn templateFunction(templateArg);\r\n\t\t};\r\n\t\tvar _restorePage = function(){//restores main menu, style and fontFamily\r\n\t\t\tvar def = $.Deferred();\r\n\t\t\tvar fl = FL.fl; //new flMain();\r\n\t\t\tvar pagNo = getPageNo(\"home\");\r\n\t\t\t// var fl = new flMain();\r\n\t\t\t// var fa = FL.login.token.fa;//new fl.app();\r\n\t\t\tvar fd = new fl.data();\r\n\t\t\tfd.findOne(\"43\",{\"query\":{\"_id\":pagNo}}, function(err, data){\r\n\t\t\t\tFL.common.printToConsole(\"............................._restorePage....\");\r\n\t\t\t\t// err = \"abc\";\r\n\t\t\t\tif(err){\r\n\t\t\t\t\t// alert(\"ERROR ON _addWithFields err=\"+err);\r\n\t\t\t\t\tFL.common.printToConsole(\"======================>ERROR ON _restorePage err=\"+err);\r\n\t\t\t\t\tdef.reject(\"ERROR: _restorePage err=\"+err);\r\n\t\t\t\t}else{ \r\n\t\t\t\t\tvar retData = insertMacrosOnHomePage(FL.login.defaultPage);\r\n\t\t\t\t\t// data = null;\r\n\t\t\t\t\tif(!data){\r\n\t\t\t\t\t\tFL.common.printToConsole(\"=====================================>_restorePage: OK With null data\");\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t// data.d = null;\r\n\t\t\t\t\t\tif(!data.d){\r\n\t\t\t\t\t\t\tFL.common.printToConsole(\"=====================================>_restorePage: OK With null data.d\");\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t// data.d.html = null;\r\n\t\t\t\t\t\t\tif(!data.d.html){\r\n\t\t\t\t\t\t\t\tFL.common.printToConsole(\"=====================================>_restorePage: OK With null data.d.html\");\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tretData = data.d.html;\r\n\t\t\t\t\t\t\t\tFL.common.printToConsole(\"=====================================>_restorePage: OK \");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdef.resolve(retData);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn def.promise();\r\n\t\t};\r\n\t\tvar _saveMainMenuStyleANDfontFamily = function(){//updates menu,style and fontFamily defined on FL.login.appToken. to server - inspired on FL.server.saveMainMenu\r\n\t\t\t//it tries to update if it fails (because _id:1  does not exist) then inserts\r\n\t\t\tvar def = $.Deferred();\r\n\t\t\tvar fl = FL.fl; //new flMain();\r\n\t\t\t// var fl = new flMain();\r\n\t\t\t// var fa = FL.login.token.fa;//new fl.app();\r\n\t\t\tvar fd = new fl.data();\r\n\t\t\tvar oMenu = FL.login.appToken.menu;// instead of localStorage.storedMenu;//Retrieve last saved menu\r\n\t\t\tvar lastStyleStr = FL.login.appToken.style;// instead of localStorage.style;// Retrieve last saved style ex.red or spacelab\r\n\t\t\tvar lastFontFamilyStr = FL.login.appToken.fontFamily;//instead of localStorage.fontFamily;// Retrieve last saved fontFamily ex.impact or georgia\r\n\t\t\tfd.update(\"40\", {\"query\":{\"_id\":1},\"update\":{\"45\":oMenu,\"46\":lastStyleStr,\"47\":lastFontFamilyStr}}, function(err, data){\r\n\t\t\t\tFL.common.printToConsole(\"............................._saveMainMenuStyleANDfontFamily....\");\r\n\t\t\t\t// err = \"abc\";\r\n\t\t\t\tif(err){\r\n\t\t\t\t\talert(\"======================>ERROR ON _saveMainMenuStyleANDfontFamily err=\"+err);\r\n\t\t\t\t\tFL.API.serverCallBlocked = false;\r\n\t\t\t\t\tdef.reject(\"ERROR: _saveMainMenuStyleANDfontFamily err=\"+err);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(data.count == 0){//data.count == 0 =>we need to insert\r\n\t\t\t\t\t\tFL.common.printToConsole(\"=====================================>_saveMainMenuStyleANDfontFamily: OK no existing record, we need to insert\");\r\n\t\t\t\t\t\tfd.insert(\"40\",{_id:1, d:{\"45\":oMenu,\"46\":lastStyleStr,\"47\":lastFontFamilyStr}}, function(err, data){\r\n\t\t\t\t\t\t\tFL.API.serverCallBlocked = false;\r\n\t\t\t\t\t\t\tFL.common.printToConsole(\"............................._saveMainMenuStyleANDfontFamily...trying to insert...\");\r\n\t\t\t\t\t\t\t// err = \"abc\";\r\n\t\t\t\t\t\t\tif (err){\r\n\t\t\t\t\t\t\t\talert(\"======================>ERROR ON _saveMainMenuStyleANDfontFamily FAIL TO INSERT err=\"+err);\r\n\t\t\t\t\t\t\t\tdef.reject(\"ERROR: _saveMainMenuStyleANDfontFamily FAIL TO INSERT err=\"+err);\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tFL.common.printToConsole(\"=====================================>_saveMainMenuStyleANDfontFamily: INSERTED OK \");\r\n\t\t\t\t\t\t\t\tdef.resolve();\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tFL.API.serverCallBlocked = false;\r\n\t\t\t\t\t\tFL.common.printToConsole(\"=====================================>_saveMainMenuStyleANDfontFamily: OK \");\r\n\t\t\t\t\t\tdef.resolve();\r\n\t\t\t\t\t}\t\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn def.promise();\r\n\t\t};\r\n\t\tvar _saveHomePage = function(){//save page in FL.login.appToken.homePage - inspired in FL.server.savePage\r\n\t\t\tvar def = $.Deferred();\r\n\t\t\tvar fl = FL.fl; //new flMain();\r\n\t\t\tvar pagNo = getPageNo(\"home\");\r\n\t\t\t// var fl = new flMain();\r\n\t\t\t// var fa = FL.login.token.fa;//new fl.app();\r\n\t\t\tvar htmlContent = FL.login.appToken.homePage;\r\n\t\t\tvar fd = new fl.data();\r\n\t\t\tfd.update(\"43\", {\"query\":{\"_id\":pagNo},\"update\":{html:htmlContent}}, function(err, data){\r\n\t\t\t\tFL.common.printToConsole(\"............................._saveHomePage....\");\r\n\t\t\t\t// err = \"abc\";\r\n\t\t\t\tif(err){\r\n\t\t\t\t\t// alert(\"ERROR ON _addWithFields err=\"+err);\r\n\t\t\t\t\tFL.common.printToConsole(\"======================>ERROR ON _saveHomePage err=\"+err);\r\n\t\t\t\t\tdef.reject(\"ERROR: _saveHomePage err=\"+err);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(data.count == 0){//data.count == 0 =>we need to insert\r\n\t\t\t\t\t\tFL.common.printToConsole(\"=====================================>_saveHomePage: OK no existing record, we need to insert\");\r\n\t\t\t\t\t\tfd.insert(\"43\",{_id:pagNo, d:{html:htmlContent}}, function(err, data){\r\n\t\t\t\t\t\t\tFL.common.printToConsole(\"............................._saveHomePage...trying to insert...\");\r\n\t\t\t\t\t\t\t// err = \"abc\";\r\n\t\t\t\t\t\t\tif (err){\r\n\t\t\t\t\t\t\t\tFL.common.printToConsole(\"======================>ERROR ON _saveHomePage FAIL TO INSERT err=\"+err);\r\n\t\t\t\t\t\t\t\tdef.reject(\"ERROR: _saveHomePage FAIL TO INSERT err=\"+err);\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tFL.common.printToConsole(\"=====================================>_saveHomePage: INSERTED OK \");\r\n\t\t\t\t\t\t\t\tdef.resolve();\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tFL.common.printToConsole(\"=====================================>_saveHomePage: OK \");\r\n\t\t\t\t\t\tdef.resolve();\r\n\t\t\t\t\t}\t\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn def.promise();\r\n\t\t};\t\t\t\r\n\t\tvar\trebuildsLocalDictionaryFromServer = function(entities){//interprets entity JSON received from server to local dd\r\n\t\t\tFL.common.printToConsole(\"rebuildsLocalDictionaryFromServer xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx entities=\" + entities + \" xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\");\r\n\t\t\tvar sucess = null;\r\n\t\t\tvar oEntity = null;\r\n\t\t\t// FL.common.printToConsole(\"&&&&&&&&&&&&&&&&&&& begin syncLocalDictionary &&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&\");\r\n\t\t\tFL.dd.clear();//clears local dictionary\r\n\r\n\t\t\t// FL.common.printToConsole(\"%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% after FL.dd.clear %%%%%%%%%%%%%%%%%\");\r\n\t\t\t// FL.dd.displayEntities();\r\n\t\t\t// FL.common.printToConsole(\"%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\");\r\n\r\n\t\t\t// FL.common.printToConsole(\"--- *** Entities *** ---\");\r\n\t\t\tfor( var i = 0; i < entities.length; i++){\r\n\t\t\t\t// FL.common.printToConsole(\"Entity eCN=\" + entities[i]._id + \" singular=\" + entities[i].d[\"3\"] );\r\n\t\t\t\tsuccess = FL.dd.createEntity(entities[i].d[\"3\"],entities[i].d[\"4\"]);//singular,description ex:(\"client\",\"company we may invoice\")\r\n\t\t\t\toEntity = FL.dd.entities[entities[i].d[\"3\"]];\r\n\t\t\t\toEntity.plural = entities[i].d[\"E\"];\r\n\t\t\t\toEntity.csingular = entities[i]._id;\r\n\t\t\t\t// FL.common.printToConsole(\"--- *** fields *** ---\");\r\n\t\t\t\tfor( var fieldIndex = 0; fieldIndex < entities[i].fields.length; fieldIndex++){//boucle fields\r\n\t\t\t\t\t// FL.common.printToConsole(\"--->field fCN=\" + entities[i].fields[fieldIndex]._id + \" fieldName=\" + entities[i].fields[fieldIndex].d[\"3\"] );\r\n\t\t\t\t\tFL.dd.addAttribute(entities[i].d[\"3\"],entities[i].fields[fieldIndex].d[\"3\"] ,entities[i].fields[fieldIndex].d[\"4\"],entities[i].fields[fieldIndex].d[\"K\"],entities[i].fields[fieldIndex].d[\"M\"],entities[i].fields[fieldIndex].d[\"9\"],entities[i].fields[fieldIndex].d[\"N\"]);//(\"order\",\"shipped\",\"expedition status\",\"Shipped\",\"boolean\",null)\r\n\t\t\t\t\t//addAttribute uses a local compressed name. Now we have to force the field compressed name comming from server\t\t\t\t\t\t\t\t\r\n\t\t\t\t\tFL.dd.setFieldCompressedName(entities[i].d[\"3\"],entities[i].fields[fieldIndex].d[\"3\"], entities[i].fields[fieldIndex]._id );\r\n\t\t\t\t}\r\n\t\t\t\t// FL.common.printToConsole(\"--- *** relations *** ---\");\r\n\t\t\t\tvar rCN = null;\r\n\t\t\t\tvar relationName = null;\r\n\t\t\t\tvar withEntityCN = null;\r\n\t\t\t\tvar side = null;\r\n\t\t\t\tvar verb = null;\r\n\t\t\t\tvar cardinality = null;\r\n\t\t\t\tvar semantic = null;\r\n\t\t\t\tvar storedHere = null;\r\n\t\t\t\tvar relation = null;\r\n\t\t\t\toEntity.relations = [];\r\n\t\t\t\tfor( var relationIndex = 0; relationIndex < entities[i].relations.length; relationIndex++){//boucle relations\r\n\t\t\t\t\t// FL.common.printToConsole(\"--->relation  rCN=\" + entities[i].relations[relationIndex]._id );\r\n\t\t\t\t\trelation = {};\r\n\t\t\t\t\trelation[\"rCN\"] = entities[i].relations[relationIndex]._id;\r\n\t\t\t\t\trelation[\"withEntityCN\"] = entities[i].relations[relationIndex].d[\"00\"][0][\"U\"];\r\n\t\t\t\t\trelation[\"withEntity\"] = null;\r\n\t\t\t\t\trelation[\"verb\"] = entities[i].relations[relationIndex].d[\"00\"][0][\"V\"];\r\n\t\t\t\t\trelation[\"cardinality\"] = entities[i].relations[relationIndex].d[\"00\"][0][\"W\"];\r\n\t\t\t\t\trelation[\"side\"]  = entities[i].relations[relationIndex].d[\"00\"][0][\"Z\"];\r\n\t\t\t\t\trelation[\"storedHere\"] = entities[i].relations[relationIndex].d[\"00\"][0][\"Y\"];//if true this is the side to read the relation from left to rigth\r\n\t\t\t\t\trelation[\"semantic\"] = null;\r\n\t\t\t\t\t//semantic = to be formed in local dictionary ex://\"customer has many orders\"\r\n\t\t\t\t\t//FL.dd.addRelation(entities[i].d[\"3\"],rCN,withEntity,verb,cardinality,side,storedHere);\r\n\t\t\t\t\t//we cannot use addRelation() because withEntity is unknown here. we only know its compressed name = withEntityCN\r\n\t\t\t\t\t//    because of this it is impossible to call FL.dd.relationSemantics\r\n\t\t\t\t\t//    we need a second pass to fill withEntity and semantic\r\n\t\t\t\t\toEntity.relations.push(relation);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//When we sync in a serial way we are creating relations before having the other side entity.\r\n\t\t\t//Synchronizing relations needs 2 steps. Step 1 is done above saving  the auxiliary \"withEntityCN\" without filling \"withEntity\"\r\n\t\t\t// - Step 2 is done below filling \"withEntity\" from \"withEntityCN\" (saved in step 1) and setting sync=true at entity level. \r\n\t\t\tFL.dd.relationPass2();//goes thru all entities and for all relations of each entity fills withEntity and semantic using withEntityCN\r\n\t\t\t// FL.dd.displayEntities();\r\n\t\t\t// FL.common.printToConsole(\"&&&&&&&&&&&&&&&&&&&& end syncLocalDictionary &&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&\");\r\n\t\t};\r\n\t\tvar getPageNo = function(pagName){ //to be used by savePage and restorePage\r\n\t\t\tvar pageNoObj = {\"home\":1,\"about\":2};\r\n\t\t\treturn  pageNoObj[pagName];\r\n\t\t};\r\n\t\t//-------- END OF OTHER WRAPPERS ------------------\t\t\r\n\t\t\r\n\t\t//-------- Exchage data WRAPPERS ------------------\t\t\r\n\t\tvar _findAll = function(ecn,query,projection){ //entity compressed name\r\n\t\t\tvar def = $.Deferred();\r\n\t\t\tvar fl = FL.fl; //new flMain();\r\n\t\t\tvar fd = new fl.data();\r\n\t\t\t// var fl = new flMain();\r\n\t\t\t// var fa = FL.login.token.fa;//new fl.app();\r\n\t\t\tvar findAllParam={};\r\n\t\t\tif(!query)\r\n\t\t\t\tfindAllParam.query ={};\r\n\t\t\telse\r\n\t\t\t\tfindAllParam.query =query;\r\n\t\t\tif(projection)\r\n\t\t\t\tfindAllParam.projection =projection;\r\n\r\n\r\n\t\t\t// fd.findAll(ecn, {\"query\":query}, function(err, data){\r\n\t\t\tfd.findAll(ecn, findAllParam, function(err, data){\r\n\t\t\t// fd.findAll(ecn, {\"query\":query,\"projection\":projection}, function(err, data){\r\n\t\t\t\tFL.common.printToConsole(\"............................._findAll...\");\r\n\t\t\t\t// err = \"abc\";\r\n\t\t\t\tif(err){\r\n\t\t\t\t\talert(\"ERROR ON _findAll err=\"+err);\r\n\t\t\t\t\tFL.common.printToConsole(\"======================>ERROR ON _findAll err=\"+err);\r\n\t\t\t\t\tdef.reject(err);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tFL.common.printToConsole(\"=====================================>_findAll: OK \");\r\n\t\t\t\t\tdef.resolve(data);//data is an array\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn def.promise();\r\n\t\t};\r\n\t\tvar nicoTestDuplicateIds = function(arrToTest){//checks if any of the  _id's value is repeated\r\n\t\t\tvar is_Duplicated = false;\r\n\t\t\tvar testJSON = {};\r\n\t\t\t_.each(arrToTest,function(element){\r\n\t\t\t\tif(!_.isUndefined(element[\"_id\"])){\r\n\t\t\t\t\tif( !_.isUndefined(testJSON[element[\"_id\"]] )){\r\n\t\t\t\t\t\tis_Duplicated = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttestJSON[element[\"_id\"]] = \"1\";//_ide is placed as key....\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn is_Duplicated;\r\n\t\t};\r\n\t\tvar _insert = function(eCN,arrToSend){ //entity compressed name, arr with records to store\r\n\t\t\t//format of arrToSend ->[\"_id\":\"1234\",{\"d\":{\"51\":\"cli1\",\"52\":\"Lx\",\"53\":\"Pt\"}},{\"d\":{\"51\":\"cli2\",\"52\":\"Sintra\",\"53\":\"Pt\"}}]\r\n\t\t\tvar def = $.Deferred();\r\n\t\t\tvar fl = FL.fl; //new flMain();\r\n\t\t\tvar fd = new fl.data();\r\n\t\t\t// var fl = new flMain();\r\n\t\t\t// var fa = FL.login.token.fa;//new fl.app();\r\n\t\t\t// var testJSON = {};\r\n\t\t\t// _.each(arrToSend,function(element){\r\n\t\t\t// \tif(!_.isUndefined(element[\"_id\"])){\r\n\t\t\t// \t\tif( !_.isUndefined( testJSON[ element[\"_id\" ] ] ) ){\r\n\t\t\t// \t\t\talert(\"FL.API _insert -> Repeated _id - protection to prevent server blockage activated !!!!\");\r\n\t\t\t// \t\t\treturn def.reject(\"Duplicate _id -protection to prevent server blockage\");\r\n\t\t\t// \t\t}\r\n\t\t\t// \t\ttestJSON[element[\"_id\"]] = \"1\";\r\n\t\t\t// \t}\r\n\t\t\t// });\r\n\t\t\tif( nicoTestDuplicateIds(arrToSend) ){\r\n\t\t\t\talert(\"FL.API _insert -> Repeated _id - protection to prevent server blockage activated !!!!\");\r\n\t\t\t\treturn def.reject(\"Duplicate _id -protection to prevent server blockage\");\r\n\t\t\t}\r\n\t\t\tfd.insert(eCN,arrToSend,function(err, data){\r\n\t\t\t\tFL.common.printToConsole(\"............................._insert...\");\r\n\t\t\t\t// err = \"abc\";\r\n\t\t\t\tif(err){\r\n\t\t\t\t\talert('_insert: err=' + JSON.stringify(err));\r\n\t\t\t\t\t// FL.common.printToConsole(\"======================>ERROR ON _insert err=\"+err);\r\n\t\t\t\t\treturn def.reject(err);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tFL.common.printToConsole(\"=====================================>_insert: OK \");\r\n\t\t\t\t\treturn def.resolve(data);//data is an array\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn def.promise();\r\n\t\t};\r\n\t\tvar _update = function(ecn,_idValue,jsonToSend){ //update a single row within table ecn entity compressed name, _idValue and jsonToSend (a single record)\r\n\t\t\t//\tformat of jsonToSend ->{\"51\":\"cli1\",\"52\":\"Lx\",\"53\":\"Pt\"}\r\n\t\t\tvar def = $.Deferred();\r\n\t\t\tvar fl = FL.fl; //new flMain();\r\n\t\t\tvar fd = new fl.data();\r\n\r\n\t\t\tfd.update(ecn, {\"query\":{\"_id\":_idValue},\"update\":jsonToSend, \"options\":{\"upsert\":true}}, function(err, result){\r\n\t\t\t\tFL.common.printToConsole(\"............................._update....i_id=\"+_idValue+\" To ->\"+JSON.stringify(jsonToSend));\r\n\t\t\t\tif(err){\r\n\t\t\t\t\tFL.common.printToConsole(\"======================>ERROR ON _update err=\"+err);\r\n\t\t\t\t\tdef.reject(err);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tFL.common.printToConsole(\"=====================================>_update: OK \" + result.count + \" records were updated.\");\r\n\t\t\t\t\tdef.resolve(result.count);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn def.promise();\r\n\t\t};\r\n\t\tvar _remove = function(ecn,_id){ //remove  a single row within table ecn (entity compressed name)\r\n\t\t\tvar def = $.Deferred();\r\n\t\t\tvar fl = FL.fl; //new flMain();\r\n\t\t\tvar fd = new fl.data();\r\n\t\t\tfd.remove(ecn, {\"query\":{_id:_id}}, function(err, result){\r\n\t\t\t\t// FL.common.printToConsole(\"............................._remove....i_id=\"+_id);\r\n\t\t\t\tif(err){\r\n\t\t\t\t\tFL.common.printToConsole(\"======================>ERROR ON _remove err=\"+err);\r\n\t\t\t\t\tdef.reject(err);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tFL.common.printToConsole(\"=====================================>_remove: OK \");\r\n\t\t\t\t\tdef.resolve(result);\r\n\t\t\t\t}\r\n            });\r\n\t\t\treturn def.promise();\r\n\t\t};\r\n\t\tvar _removeAll = function(ecn){ //remove  all rows of table ecn \r\n\t\t\tvar def = $.Deferred();\r\n\t\t\tvar fl = FL.fl; //new flMain();\r\n\t\t\tvar fd = new fl.data();\r\n\t\t\tfd.remove(ecn, {\"query\":{},options:{single:false}}, function(err, result){\r\n\t\t\t\tif(err){\r\n\t\t\t\t\tFL.common.printToConsole(\"======================>ERROR ON _removeAll err=\"+err);\r\n\t\t\t\t\treturn def.reject(err);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tFL.common.printToConsole(\"=====================================>_removeAll: OK \");\r\n\t\t\t\t\treturn def.resolve(result);\r\n\t\t\t\t}\r\n            });\r\n\t\t\treturn def.promise();\r\n\t\t};\r\n\t\tvar _removeMultiple = function(ecn,arrOf_IdToRemove){ //remove  a single row within table ecn (entity compressed name)\r\n\t\t\tvar def = $.Deferred();\r\n\t\t\tvar spinner=FL.common.loaderAnimationON('spinnerDiv');\r\n\t\t\tvar promise = FL.API.queueManager(\"_remove\",ecn,arrOf_IdToRemove);\r\n\t\t\tpromise.done(function(result){\r\n\t\t\t\tspinner.stop();\r\n\t\t\t\treturn def.resolve(arrOf_IdToRemove.length);\r\n\t\t\t});\r\n\t\t\tpromise.fail(function(err){\r\n\t\t\t\tspinner.stop();\r\n\t\t\t\treturn def.reject(err);\r\n\t\t\t});\r\n\t\t\treturn def.promise();\r\n\t\t};\r\n\t\tvar _dummy = function(ecn,_id){ //remove  a single row within table ecn (entity compressed name)\r\n\t\t\tvar def = $.Deferred();\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\tFL.common.printToConsole(\"***********************************************************************************************\");\r\n\t\t\t\tFL.common.printToConsole(\"**************************  _dummy-------------------->execution=\"+_id);\r\n\t\t\t\tFL.common.printToConsole(\"***********************************************************************************************\");\r\n\t\t\t\tdef.resolve(1);\r\n\t\t\t\t// def.reject(\"dummy failure !\");\r\n\t\t\t},600);\r\n\t\t\treturn def.promise();\r\n\t\t};\r\n\t\tvar queueManager = function(funcName,param1,arrToDispatch){ //call a function each 200 milisecondsremove  a single row within table ecn (entity compressed name)\r\n\t\t\t// calls the same asynchronous function several times assuring that after the first call all subsequent calls are done after a successfull completion of the previous call.\r\n\t\t\t//   funcName = name of the function to be called...it must be in the list: _dummy,_remove,_fieldUpdate,updateAttribute\r\n\t\t\t//\t param1 - a parameter constant between calls\r\n\t\t\t//   arrToDispatch - array where each element is passed in each call (one at a time)\r\n\t\t\t//\t\tfor \"_remove\" - a list of _ids to remove\r\n\t\t\t//\t\tfor \"_fieldUpdate\" - a list of objects. Each object has {name_3:x1,description_4:x2,label_K:x3,type_M:x4,typeUI_9:x5,enumerable_N:x6}\r\n\t\t\t//\t\tfor \"updateAttribute\" - runs FL.dd.updateAttribute() for multiple attributes. Each element of arrayToDispatch is an object\r\n\t\t\t//\t\t\twith {singular:xSingular,oldname:xOldname,name_3:x1,description_4:x2,label_K:x3,type_M:x4,typeUI_9:x5,enumerable_N:x6}\r\n\t\t\t//\t\t\texample: var promise = FL.API.queueManager(\"updateAttribute\",\"dummy\",bufferChangeObjs);\r\n\t\t\t// returns a promise  valid if all calls were successfully done, or a promise fillure  if any of the calls failled\r\n\t\t\t//    Parameters to adjust:\r\n\t\t\t//\t\t\tdelay = time to wait between tries\r\n\t\t\t//\t\t\tmaxRefused = just in case fuse.... a high number to prevent infinite loops\r\n\t\t\t\r\n\t\t\t// TESTING\r\n\t\t\t// var promise = FL.API.queueManager(\"_dummy\",\"abc\",[230,231,232,233]);\r\n\t\t\t// promise.done(function(result){\r\n\t\t\t// \talert(\"queueManager - PROMISE DONE!!!\");\r\n\t\t\t// });\r\n\t\t\t// promise.fail(function(result){\r\n\t\t\t// \talert(\"queueManager - PROMISE FAIL!!!\");\r\n\t\t\t// });\r\n\t\t\tvar def = $.Deferred();\r\n\r\n\t\t\t// var param1=param1;\r\n\t\t\t\r\n\t\t\tvar numberOfEl = arrToDispatch.length;\r\n\t\t\tvar delay = 200;//time between tries to call promise\r\n\t\t\tvar counter = 0;//number of well succeded calls\r\n\t\t\tvar refusedCounter = 0;//number of refused calls\r\n\t\t\tvar maxRefused = 200;//limit of refused - more than this limit =>error\r\n\t\t\tvar next = true;\r\n\t\t\tvar intervalId = setInterval(function () {\r\n\t\t\t\tif (next){\r\n\t\t\t\t\tif(counter<numberOfEl){\r\n\t\t\t\t\t\tnext = false;\r\n\t\t\t\t\t\tpromise = null;\r\n\t\t\t\t\t\tif (funcName == \"_dummy\")\r\n\t\t\t\t\t\t\tpromise=_dummy(param1,arrToDispatch[counter]);\r\n\t\t\t\t\t\telse if(funcName == \"_remove\")\r\n\t\t\t\t\t\t\tpromise=_remove(param1,arrToDispatch[counter]);\r\n\t\t\t\t\t\telse if(funcName == \"_fieldUpdate\")\r\n\t\t\t\t\t\t\tpromise=_fieldUpdate(arrToDispatch[counter]);//no constant parameter between calls\r\n\t\t\t\t\t\telse if(funcName == \"updateAttribute\"){\r\n\t\t\t\t\t\t\tvar changeObj = arrToDispatch[counter];\r\n\t\t\t\t\t\t\tpromise=FL.dd.updateAttribute(changeObj.singular,changeObj.oldname,changeObj);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tFL.common.printToConsole(\"***************************  execution=rejected !!! ->Invalid funcName=\"+funcName);\r\n\t\t\t\t\t\t\tclearInterval(intervalId);\r\n\t\t\t\t\t\t\treturn def.reject(\"function name ->\"+funcName+\" is INVALID.\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tpromise.done(function(result){\r\n\t\t\t\t\t\t\tcounter +=1;\r\n\t\t\t\t\t\t\tif(counter == numberOfEl){\r\n\t\t\t\t\t\t\t\tclearInterval(intervalId);\r\n\t\t\t\t\t\t\t\treturn def.resolve(counter);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tnext = true;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tpromise.fail(function(err){\r\n\t\t\t\t\t\t\tFL.common.printToConsole(\"***************************  execution=fail !!! ->\"+funcName+\" failure. Err=\"+err);\r\n\t\t\t\t\t\t\tclearInterval(intervalId);\r\n\t\t\t\t\t\t\treturn def.reject(\"Error in \"+funcName+\" err=\"+err);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(refusedCounter>maxRefused){\r\n\t\t\t\t\t\tclearInterval(intervalId);\r\n\t\t\t\t\t\talert(\"queueManager ERROR more than \" + maxRefused + \" =>too many refusals.\")\r\n\t\t\t\t\t\treturn def.reject(\"Refusals max exceeded !\");\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\tFL.common.printToConsole(\"***********************************************************************************************\");\r\n\t\t\t\t\tFL.common.printToConsole(\"***************************  step execution=refused -> \" + counter + \" --->\"+arrToDispatch[counter]);\r\n\t\t\t\t\tFL.common.printToConsole(\"***********************************************************************************************\");\r\n\t\t\t\t\trefusedCounter++;\r\n\t\t\t\t}\r\n\t\t\t}, delay);\r\n            return def.promise();\r\n\t\t};\r\n\t\tvar _checkServerCallBlocked = function(){//waits until FL.API.serverCallBlocked is true or a limit is exceeded\r\n\t\t\tvar def = $.Deferred();\r\n\t\t\tif( FL.API.serverCallBlocked ){\r\n\t\t\t\tvar delay = 100;//time between tries to check if FL.API.serverCallBlocked was set to false\r\n\t\t\t\tvar counter = 0;//number of check attempts\r\n\t\t\t\tvar maxRefused = 100;//limit of refused - more than this limit =>error\r\n\t\t\t\tvar intervalId = setInterval(function () {\r\n\t\t\t\t\tcounter++;\r\n\t\t\t\t\tFL.common.printToConsole(\"_checkServerCallBlocked counter=\" + counter + \"/\" + maxRefused,\"checkServerCall\" );\r\n\t\t\t\t\tif( counter >= maxRefused ){\r\n\t\t\t\t\t\tclearInterval(intervalId);\r\n\t\t\t\t\t\tFL.API.serverCallBlocked = false;\t\t\t\t\t\r\n\t\t\t\t\t\treturn def.reject(\"_checkServerCallBlocked limit of tries exceeded ->counter=\"+counter);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif( !FL.API.serverCallBlocked ){\r\n\t\t\t\t\t\tclearInterval(intervalId);\t\t\t\t\t\t\r\n\t\t\t\t\t\treturn def.resolve(counter);\r\n\t\t\t\t\t}\t\r\n\t\t\t\t}, delay);\t\r\n\t\t\t}else{\r\n\t\t\t\tFL.common.printToConsole(\"No checkServerCallBlocked ->passed on first attempt\",\"checkServerCall\");\r\n\t\t\t\treturn def.resolve();\r\n\t\t\t}\r\n            return def.promise();\r\n\t\t};\r\n\t\tvar convertRecordsTo_arrToSend = function(entityName,recordsArray,withId){//used by saveTable()\r\n\t\t\t//withId flag (default = false) if true all _id will be forced in the add.\r\n\t\t\t//Converts format: [{\"name\":cli1,\"city\":\"Lx\",\"country\":\"Pt\"},{..},....] to \r\n\t\t\t//\tformat of arrToSend ->[{\"d\":{\"51\":\"cli1\",\"52\":\"Lx\",\"53\":\"Pt\"}},{\"d\":{\"51\":\"cli2\",\"52\":\"Sintra\",\"53\":\"Pt\"}}]\t\r\n\t\t\t// or (if withId=true) Converts format: [{\"_id\":\"3f1\",name\":cli1,\"city\":\"Lx\",\"country\":\"Pt\"},{..},....] to \r\n\t\t\t//\tformat of arrToSend ->[{\"_id\":\"3f1\",\"d\":{\"51\":\"cli1\",\"52\":\"Lx\",\"53\":\"Pt\"}},{\"_id\":\"3f2\",\"d\":{\"51\":\"cli2\",\"52\":\"Sintra\",\"53\":\"Pt\"}}]\t\r\n\r\n\t\t\tvar retArr = _.map(recordsArray, function(element){\r\n\t\t\t\treturn convertOneRecordTo_arrToSend(entityName,element,withId);\r\n\t\t\t});\r\n\t\t\treturn retArr;\r\n\t\t};\r\n\t\tvar convertOneRecordTo_arrToSend = function(entityName,recordEl,withId){\r\n\t\t\t//withId flag (default = false) if true all _id will be forced in the add.\r\n\t\t\t//Converts format: {\"name\":cli1,\"city\":\"Lx\",\"country\":\"Pt\"} to {\"d\":{\"51\":\"cli1\",\"52\":\"Lx\",\"53\":\"Pt\"}}  OR\r\n\t\t\t//\t\t\t\t{\"_id\":\"3f1\",name\":cli1,\"city\":\"Lx\",\"country\":\"Pt\"} to {\"_id\":\"3f1\",\"d\":{\"51\":\"cli1\",\"52\":\"Lx\",\"53\":\"Pt\"} if withId=true\r\n\t\t\tvar retObj = {};\r\n\t\t\tvar fCN = null;\r\n\t\t\tvar oEntity =  FL.dd.getEntityBySingular(entityName);\r\n\t\t\tif(withId)\r\n\t\t\t\tvar _id = recordEl._id;\r\n\t\t\trecordEl = _.omit(recordEl, \"_id\");\r\n\t\t\t_.each(recordEl, function(value,key){\r\n\t\t\t\tfCN = oEntity.L2C[key];//with key ( a logical name) we get the compressed name\r\n\t\t\t\tretObj[fCN] = value;\r\n\t\t\t});\r\n\t\t\tif(withId)\r\n\t\t\t\treturn {\"_id\":_id,d:retObj,r:[]};\r\n\t\t\treturn {d:retObj,r:[]};\r\n\t\t};\r\n\t\tvar _mandrillRejectListForSender = function(senderEmail){ //update a single row within table ecn entity compressed name, _idValue and jsonToSend (a single record)\r\n\t\t\t//\tformat of jsonToSend ->{\"51\":\"cli1\",\"52\":\"Lx\",\"53\":\"Pt\"}\r\n\t\t\tvar def = $.Deferred();\r\n\t\t\tvar fl = FL.fl; //new flMain();\r\n\t\t\t// var fd = new fl.data();\r\n\t\t\tvar md = new fl.mandrill();\r\n\t\t\tmd.rejectList( {include_expired: true, sender: senderEmail}, function(err, data){\r\n\t\t\t\tFL.common.printToConsole(\"............................._mandrillRejectListForSender....result=\"+JSON.stringify(data));\r\n\t\t\t\tif(err){\r\n\t\t\t\t\tFL.common.printToConsole(\"======================>ERROR ON _mandrillRejectListForSender err=\"+err);\r\n\t\t\t\t\tdef.reject(err);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tFL.common.printToConsole(\"=====================================>_mandrillRejectListForSender: OK \");\r\n\t\t\t\t\tdef.resolve(data);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn def.promise();\r\n\t\t};\r\n\t\tvar _mandrillDeleteFromReject = function(arrayOfEmails){ //update a single row within table ecn entity compressed name, _idValue and jsonToSend (a single record)\r\n\t\t\t//\tformat of jsonToSend ->{\"51\":\"cli1\",\"52\":\"Lx\",\"53\":\"Pt\"}\r\n\t\t\tvar def = $.Deferred();\r\n\t\t\tvar fl = FL.fl; //new flMain();\r\n\t\t\t// var fd = new fl.data();\r\n\t\t\tvar md = new fl.mandrill();\r\n\t\t\tmd.rejectDelete( {email:arrayOfEmails[0]}, function(err, data){\r\n\t\t\t\tFL.common.printToConsole(\"............................._mandrillDeleteFromReject....->\"+JSON.stringify(data));\r\n\t\t\t\tif(err){\r\n\t\t\t\t\tFL.common.printToConsole(\"======================>ERROR ON _mandrillDeleteFromReject err=\"+err);\r\n\t\t\t\t\tdef.reject(err);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tFL.common.printToConsole(\"=====================================>_mandrillDeleteFromReject: OK deleted=\" + data.deleted );\r\n\t\t\t\t\tFL.common.printToConsole(\"............................._mandrillDeleteFromReject...SUCCESS .->\"+JSON.stringify(data));\r\n\t\t\t\t\tdef.resolve();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn def.promise();\r\n\t\t};\r\n\t\tvar _test =\tfunction(){\r\n\t\t\tFL.common.printToConsole(\"--- test ----\");\r\n\t\t};\r\n\t\t//-------- END OF OTHER WRAPPERS ------------------\t\t\r\n\t\treturn{\r\n\t\t\txx: \"test\",\r\n\t\t\tfl: new flMain(),//FL.server.fl\r\n\t\t\tfa: null,\r\n\t\t\tdata:{},\r\n\t\t\toffline:true,\r\n\t\t\ttrace:true,//to be removed\r\n\t\t\tdebug:true,//if it is false  no console log will be shown\r\n\t\t\tdebugStyle: 0,// 0=>means shows numbers to jump to, 1=> no line Numbers to jump to (this only works if debug=true)\r\n\r\n\t\t\t// getPageNo: function(pagName){ //to be used by savePage and restorePage\r\n\t\t\t//\tvar pageNoObj = {\"home\":1,\"about\":2};\r\n\t\t\t//\treturn  pageNoObj[pagName];\r\n\t\t\t// },\r\n\t\t\tdebugFiltersToShow: null,\r\n\t\t\tserverCallBlocked: false, //HACK to prevent server call (menu calling a grid) before last call is dispatched (ex:cell update) - a promise must be resolved to unblock\r\n\t\t\tclearServerToken: function(){\r\n\t\t\t\tFL.login.token = tokenClear();\r\n\t\t\t},\r\n\t\t\tconvertOneRecordTo_arrToSend: function(entityName,recordEl){\r\n\t\t\t\treturn convertOneRecordTo_arrToSend(entityName,recordEl);\r\n\t\t\t},\r\n\t\t\tqueueManager:function(funcName,param1,arrToDispatch){\r\n\t\t\t\treturn queueManager(funcName,param1,arrToDispatch);\r\n\t\t\t},\r\n\t\t\tcheckServerCallBlocked:function(){\r\n\t\t\t\treturn _checkServerCallBlocked();\r\n\t\t\t},\r\n\t\t\tconvertArrC2LForEntity: function(entityName,serverArr){//serverArr =>[{\"_id\":123,d:{},r:[]},{\"_id\":124,d:{},r:[]},....{\"_id\":125,d:{},r:[]}]\r\n\t\t\t\t//Use the dictionary for entityName to convert compressed field names in keys in serverArr to logical field names\r\n\t\t\t\t//Ex: from server [{\"d\":{\"01\":true,\"02\":\"Super 1\",\"00\":1},\"r\":[]},{\"d\":{\"01\":false,\"02\":\"Super 2\",\"00\":2},\"r\":[]}]\r\n\t\t\t\t//     ==============> [{\"_id\":123,id:1,\"shipped\":true,\"product\":\"Super 1\",\"id\":1},{\"_id\":124,id:2,\"shipped\":false,\"product\":\"Super 2\",\"id\":2}]\t\r\n\t\t\t\t// If serverArr elements inside d object have no compressed name corresponding to \"id\" in local dictionary, id will be added\r\n\t\t\t\t// if serverArr elements have a \"_id\" property/value \"_id\" will be included in the return array \r\n\t\t\t\tvar oEntity =  FL.dd.getEntityBySingular(entityName);\r\n\t\t\t\tvar arrOfCKeys = null;\r\n\t\t\t\tvar arrOfValues = null;\r\n\t\t\t\tvar arrOfLKeys = null;\r\n\t\t\t\tvar dContent = null;\r\n\t\t\t\tvar el = null;\r\n\t\t\t\tvar index = 1;\r\n\t\t\t\tvar retArr = _.map(serverArr, function(element){//each element is JSON =>{\"_id\":123,d:{},r:[]}\r\n\t\t\t\t\tdContent = element.d;//only d will be processed. d is a JSON ex.=>{ \"62\":1, \"63\":true,\"64\":\"Super 1\" }\r\n\t\t\t\t\tarrOfCKeys = _.keys(dContent);//ex. [\"62\",\"63\",\"64\"]\r\n\t\t\t\t\tarrOfValues = _.values(dContent);//ex. [1,true,\"Super1\"]\r\n\t\t\t\t\tarrOfLKeys = _.map(arrOfCKeys, function(element2){ \r\n\t\t\t\t\t\tvar logicalName = oEntity.C2L[element2];\r\n\t\t\t\t\t\t// return oEntity.C2L[element2]; \r\n\t\t\t\t\t\treturn logicalName; \r\n\t\t\t\t\t});\r\n\t\t\t\t\tel = _.object(arrOfLKeys,arrOfValues);//reassembles the object from two aligned arrays\r\n\t\t\t\t\tif(!el.id)\r\n\t\t\t\t\t\tel[\"id\"] = index;\r\n\t\t\t\t\tindex++;\r\n\t\t\t\t\tif(element._id)\r\n\t\t\t\t\t\tel[\"_id\"] = element._id;\r\n\t\t\t\t\treturn el;\r\n\t\t\t\t});\r\n\t\t\t\treturn retArr;\r\n\t\t\t},\r\n\t\t\tprepareTrialApp: function() {///create adHoc client, create adHoc user, create adHoc app \r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\t// var fl = new flMain();//FL.server.fl\r\n\t\t\t\tvar fl = FL.fl;\r\n\t\t\t\tFL.common.printToConsole(\"....................................>beginning prepareTrialApp....\");\r\n\t\t\t\tvar prepareTrialAppPromise=_applicationFullCreate({\"adminName\": \"nico@framelink.co\", \"adminPassWord\": \"coLas\"})\r\n\t\t\t\t.then(_login).then(_connect);\r\n\t\t\t\tprepareTrialAppPromise.done(function(){FL.common.printToConsole(\">>>>> prepareTrialAppPromise SUCCESS <<<<<\");def.resolve();});\r\n\t\t\t\tprepareTrialAppPromise.fail(function(err){FL.common.printToConsole(\">>>>> prepareTrialAppPromise FAILURE <<<<<\");def.reject(err);});\r\n\t\t\t\treturn def.promise();\r\n\r\n\t\t\t\t// to generate unique userName\r\n\t\t\t\t// var seconds = new Date().getTime() / 1000;\r\n\t\t\t\t// var userName = \"toto\"+ seconds;\r\n\t\t\t},\r\n\t\t\tremoveClientWithOneApp: function() {//remove client, remove user, remove app - only works for subscribers with a single app\r\n\t\t\t\tFL.common.printToConsole(\"....................................>beginning removeClientWithOneApp....with token=\"+JSON.stringify(FL.login.token));\r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\tvar removeClientWithOneAppPromise=_disconnect().then(_applicationRemove).then(_clientRemove);\r\n\t\t\t\tremoveClientWithOneAppPromise.done(function(){FL.common.printToConsole(\">>>>> removeClientWithOneApp SUCCESS <<<<<\");def.resolve();});\r\n\t\t\t\tremoveClientWithOneAppPromise.fail(function(){FL.common.printToConsole(\">>>>> removeClientWithOneApp FAILURE <<<<<\");def.reject();});\r\n\t\t\t\treturn def.promise();\r\n\t\t\t},\r\n\t\t\tremoveTrialApp: function() {//remove client, remove user, remove app - only works for subscribers with a single app\r\n\t\t\t\tFL.common.printToConsole(\"....................................>beginning removeTrialApp....with token=\"+JSON.stringify(FL.login.token));\r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\tvar removeTrialAppPromise=_disconnect().then(_applicationRemove).then(_clientRemove);\r\n\t\t\t\tremoveTrialAppPromise.done(function(){FL.common.printToConsole(\">>>>> removeTrialApp SUCCESS <<<<<\");def.resolve();});\r\n\t\t\t\tremoveTrialAppPromise.fail(function(){FL.common.printToConsole(\">>>>> removeTrialApp FAILURE <<<<<\");def.reject();});\r\n\t\t\t\treturn def.promise();\r\n\t\t\t},\r\n\t\t\tregisterTrialApp: function(userName,password,appDescription) {//change adHoc client name, user name, passordd and appDescrition \r\n\t\t\t\tFL.common.printToConsole(\"....................................>beginning registerTrialApp....with token=\"+JSON.stringify(FL.login.token));\r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\t// var registerTrialApp=_applicationFinalize(userName,appDescription).then(function(){_userChangePassWord(password);});\r\n\t\t\t\tvar registerTrialApp=_applicationFinalize(userName,appDescription).then(function(){return _userChangePassWord(password);});\r\n\t\t\t\r\n\t\t\t\tregisterTrialApp.done(function(){FL.common.printToConsole(\">>>>> registerTrialApp SUCCESS <<<<<\");def.resolve();});\r\n\t\t\t\tregisterTrialApp.fail(function(err){FL.common.printToConsole(\">>>>> registerTrialApp FAILURE <<<<< \"+err);def.reject(err);});\r\n\t\t\t\treturn def.promise();\r\n\t\t\t},\r\n\t\t\tremoveUserAndApps: function(userName,password) {//remove client, remove user, remove app \r\n\t\t\t\tFL.common.printToConsole(\"....................................>beginning removeUserAndApps....with token=\"+JSON.stringify(FL.login.token));\r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\tFL.login.token.userName = userName;\r\n\t\t\t\tFL.login.token.userPassWord = password;\r\n\t\t\t\tFL.login.token.domainName =\"xxx\";\r\n\t\t\t\tvar removeUserAndAppsPromise=_login().then(_applicationRemove).then(_clientRemove);\r\n\t\t\t\tremoveUserAndAppsPromise.done(function(){FL.common.printToConsole(\">>>>> removeUserAndApps SUCCESS <<<<<\");def.resolve();});\r\n\t\t\t\tremoveUserAndAppsPromise.fail(function(){FL.common.printToConsole(\">>>>> removeUserAndApps FAILURE <<<<<\");def.reject();});\r\n\t\t\t\treturn def.promise();\r\n\t\t\t},\r\n\t\t\tcreateUserAndDefaultApp: function(userName,userPassWord,appDescription) {///creates a client, create user and create first app \r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\tFL.common.printToConsole(\"%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\");\r\n\t\t\t\t// var fl = new flMain();//FL.server.fl\r\n\t\t\t\tvar fl = FL.fl;\r\n\t\t\t\t// var fa = new fl.app();\r\n\t\t\t\t// fl.setTraceClient(2);\r\n\t\t\t\t// def.fail(function(){\r\n\t\t\t\t// \talert(\"error on connectAdHocUser ! \");\r\n\t\t\t\t// });\r\n\t\t\t\tif(!appDescription)\r\n\t\t\t\t\tappDescription = \"my App\";\r\n\t\t\t\tFL.common.printToConsole(\"....................................>beginning createUserAndDefaultApp....\");\r\n\t\t\t\tvar createUserAndDefaultAppPromise=_applicationFullCreate({\"adminName\": \"nico@framelink.co\", \"adminPassWord\": \"coLas\", \r\n\t\t\t\t\tuserName:userName, userPassWord:userPassWord, appDescription:appDescription})\r\n\t\t\t\t\t.then(_login).then(_connect);\r\n\t\t\t\tcreateUserAndDefaultAppPromise.done(function(){\r\n\t\t\t\t\tFL.common.printToConsole(\">>>>> createUserAndDefaultAppPromise SUCCESS <<<<<\");\r\n\t\t\t\t\tFL.common.printToConsole(\"%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\");\r\n\t\t\t\t\treturn def.resolve();\r\n\t\t\t\t});\r\n\t\t\t\tcreateUserAndDefaultAppPromise.fail(function(err){\r\n\t\t\t\t\tFL.common.printToConsole(\">>>>> createUserAndDefaultAppPromise FAILURE <<<<<\");\r\n\t\t\t\t\tFL.common.printToConsole(\"%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\");\r\n\t\t\t\t\treturn def.reject(err);\r\n\t\t\t\t});\r\n\t\t\t\treturn def.promise();\r\n\r\n\t\t\t\t// to generate unique userName\r\n\t\t\t\t// var seconds = new Date().getTime() / 1000;\r\n\t\t\t\t// var userName = \"toto\"+ seconds;\r\n\t\t\t},\t\r\n\t\t\tdisconnect: function() {//change adHoc client name, user name, passordd and appDescrition \r\n\t\t\t\tFL.common.printToConsole(\"....................................>beginning disconnect....current token=\"+JSON.stringify(FL.login.token));\r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\tvar disconnect=_disconnect();\r\n\t\t\t\tdisconnect.done(function(){FL.common.printToConsole(\">>>>> disconnect SUCCESS <<<<<\");FL.login.token = tokenClear(); return def.resolve();});\r\n\t\t\t\tdisconnect.fail(function(err){FL.common.printToConsole(\">>>>> disconnect FAILURE <<<<< \"+err); return def.reject(err);});\r\n\t\t\t\treturn def.promise();\r\n\t\t\t},\r\n\t\t\tconnectUserToDefaultApp: function(userName,password) {//\r\n\t\t\t\t//if userName/password exists but has no application, one application is created\r\n\t\t\t\t// FL.common.printToConsole(\"....................................>beginning connectUserToDefaultApp....with token=\"+JSON.stringify(FL.login.token));\r\n\t\t\t\tFL.common.printToConsole(\"....................................>beginning connectUserToDefaultApp....\");\r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\tvar tokenBackup = FL.login.token;//if it fails we will recover the initial token with this backup\r\n\t\t\t\tvar fl = null;\r\n\t\t\t\tvar fa = null;\r\n\t\t\t\t// if (FL === null || FL.login === null || FL.login.token === null){//FL.login.token is null\r\n\t\t\t\t// if (FL.login === null || FL.login.token === null){//FL.login.token is null\r\n\t\t\t\tif (FL.fl === null){//FL.login.token is null\r\n\t\t\t\t\talert(\"connectUserToDefaultApp ->FL.fl === null !!!!\");\r\n\t\t\t\t\tfl = new flMain();\r\n\t\t\t\t\tfa = new fl.app();\r\n\t\t\t\t\tFL.login.token[\"fl\"] = fl;\r\n\t\t\t\t\tFL.login.token[\"fa\"] = fa;\r\n\t\t\t\t}else{//FL.login.token exists\r\n\t\t\t\t\tif(FL.fl){\r\n\t\t\t\t\t\tfl = FL.fl; //new flMain();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tfl = new flMain();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfa = new fl.app();\r\n\t\t\t\t\tFL.login.token[\"fl\"] = fl;\r\n\t\t\t\t\tFL.login.token[\"fa\"] = fa;\r\n\t\t\t\t}\r\n\t\t\t\tFL.login.token.userName = userName;\r\n\t\t\t\tFL.login.token.userPassWord = password;\r\n\t\t\t\tvar connectUserToDefaultApp=_login()\r\n\t\t\t\t\t.then(_connect);\r\n\t\t\t\tconnectUserToDefaultApp.done(function(){\r\n\t\t\t\t\tFL.common.printToConsole(\">>>>> connectUserToDefaultApp SUCCESS <<<<<\");\r\n\t\t\t\t\tdef.resolve();\r\n\t\t\t\t});\r\n\t\t\t\tconnectUserToDefaultApp.fail(function(err){\r\n\t\t\t\t\tif( err == \"no application available\"){//we will try to recover the error creating one application\r\n\t\t\t\t\t\t// alert(\"Recovering from no application\");\r\n\t\t\t\t\t\tFL.common.printToConsole(\"....................................>connectUserToDefaultApp....Recovering from no application...\");\r\n\t\t\t\t\t\tvar applicationCreatePromise = _applicationCreate(\"automatic sample\");\r\n\t\t\t\t\t\tapplicationCreatePromise.done(function(){FL.common.printToConsole(\"....................................>connectUserToDefaultApp applicationCreate DONE\");def.resolve();});\r\n\t\t\t\t\t\tapplicationCreatePromise.fail(function(err){FL.common.printToConsole(\"....................................>connectUserToDefaultApp applicationCreate FAIL\");def.reject(\"ERROR:connectUserToDefaultApp ->applicationCreate FAIL err=\" + err);});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tFL.common.printToConsole(\">>>>> connectUserToDefaultApp FAILURE <<<<< Error:\" + err);\r\n\t\t\t\t\t\tFL.login.token = tokenBackup;\r\n\t\t\t\t\t\tdef.reject(err);\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn def.promise();\t\r\n\t\t\t},\r\n\t\t\tisConnected: function(){//returns true if is connected, false otherwise\r\n\t\t\t\tisConnected = false;\r\n\t\t\t\tvar tk = FL.login.token[\"fl\"];\r\n\t\t\t\tvar conn = null;\r\n\t\t\t\tif(tk){\r\n\t\t\t\t\tconn = tk.getsId();//flMain.getsId() - it will return a number if it is connected\r\n\t\t\t\t\t// FL.common.printToConsole(\"FL.API.isConnected() -->conn=\"+conn);\r\n\t\t\t\t\tif(!isNaN(conn))\r\n\t\t\t\t\t\tisConnected = true;\r\n\t\t\t\t}\r\n\t\t\t\treturn isConnected;\r\n\t\t\t},\r\n\t\t\tisUserExist: function(userName){\r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\tFL.common.printToConsole(\"....................................>beginning isUserExist....with token=\"+JSON.stringify(FL.login.token),\"API\");\r\n\t\t\t\tvar isUserExistPromise=_isUserExist(userName);\r\n\t\t\t\tisUserExistPromise.done(function(exists){\r\n\t\t\t\t\tFL.common.printToConsole(\">>>>> isUserExist SUCCESS <<<<< exist=\"+exists,\"API\");\r\n\t\t\t\t\treturn def.resolve(exists);\r\n\t\t\t\t});\r\n\t\t\t\tisUserExistPromise.fail(function(err){\r\n\t\t\t\t\tFL.common.printToConsole(\">>>>> isUserExist FAILURE <<<<<\",\"API\"); \r\n\t\t\t\t\treturn def.reject(err);\r\n\t\t\t\t});\r\n\t\t\t\treturn def.promise();\r\n\t\t\t},\t\t\r\n\t\t\ttemporaryRebuildsLocalDictionaryFromServer: function(entities){\r\n\t\t\t\t// FL.common.printToConsole(\"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx entities=\" + entities + \" xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\");\r\n\t\t\t\tFL.common.printToConsole(\"xxxxxxxxx #$%#%#%5 xxxxxxx\");\r\n\t\t\t},\r\n\t\t\tsyncLocalDictionary: function() {//clears local dictionary and updates it from server dictionary\r\n\t\t\t\tFL.common.printToConsole(\"....................................>beginning syncLocalDictionary....with token=\"+JSON.stringify(FL.login.token));\r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\t//_getFullDictionary->FL.dd.clear()->rebuildsLocalDictionary()\r\n\t\t\t\t// temporaryRebuildsLocalDictionaryFromServer(\"ABC\");\r\n\t\t\t\t// _test();\r\n\t\t\t\tvar syncLocalDictionary=_getFullDictionary();\r\n\t\t\t\tsyncLocalDictionary.done(function(entities){\r\n\t\t\t\t\tFL.common.printToConsole(\">>>>> syncLocalDictionary SUCCESS <<<<< entities=\" + entities);\r\n\t\t\t\t\tFL.dd.clear();\r\n\t\t\t\t\tif(entities){\r\n\t\t\t\t\t\tFL.common.printToConsole(\">>>>> syncLocalDictionary -> does temporaryRebuildsLocalDictionaryFromServer(entities)\");\r\n\t\t\t\t\t\trebuildsLocalDictionaryFromServer(entities);//interprets entity JSON received from server to local dd\r\n\t\t\t\t\t\t// FL.common.printToConsole(\"%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% after rebuildsLocalDictionaryFromServer %%%%%%%%%%%%%%%%%\");\r\n\t\t\t\t\t\tFL.dd.displayEntities();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tFL.common.printToConsole(\">>>>> syncLocalDictionary -> dictionary is empty in server\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn def.resolve();\r\n\t\t\t\t});\r\n\t\t\t\tsyncLocalDictionary.fail(function(err){FL.common.printToConsole(\">>>>> syncLocalDictionary FAILURE <<<<< \"+err);def.reject();});\r\n\t\t\t\treturn def.promise();\r\n\t\t\t},\r\n\t\t\tprepareJSONFromLocalEntity: function(entityName){//prepares JSON with entity and fields to be sent to _addWithFields\r\n\t\t\t\tvar oEntity = FL.dd.getEntityBySingular(entityName);\r\n\t\t\t\tvar eCN = null;\r\n\t\t\t\tvar entityJSON = {\"3\": oEntity.singular, \"4\": oEntity.description, 'E': oEntity.plural, fields:[]};\r\n\t\t\t\tfor (var i=0;i<oEntity.attributes.length;i++){//mounts field array\r\n\t\t\t\t\tvar attribute = oEntity.attributes[i];\r\n\t\t\t\t\t// var attrJSON = {\"3\":attribute.name, \"4\":attribute.description, 'K': attribute.label, 'M': attribute.type, 'O':false,'N':attribute.enumerableArr};\r\n\t\t\t\t\tvar attributeType =attribute.type;\r\n\t\t\t\t\t// if(attributeType == \"enumerable\")\r\n\t\t\t\t\t//\tattributeType = \"string\";\r\n\t\t\t\t\tvar attrJSON = {\"3\":attribute.name, \"4\":attribute.description, 'K': attribute.label,'9':attribute.typeUI, 'M': attribute.type, 'O':false,'N':attribute.enumerable};\r\n\t\t\t\t\t//\"O\" - attribute.repetable\r\n\t\t\t\t\tentityJSON.fields.push(attrJSON);\r\n\t\t\t\t}\r\n\t\t\t\treturn entityJSON;\r\n\t\t\t},\r\n\t\t\tsyncLocalDictionaryToServer: function(entityName) {//synch table entityName existing in local dictionary with server dict\r\n\t\t\t\t// entityName - singular name as it is in local dd\r\n\t\t\t\tFL.common.printToConsole(\"....................................>beginning syncLocalDictionaryToServer....with token=\"+JSON.stringify(FL.login.token));\r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\tvar entityJSON = this.prepareJSONFromLocalEntity(entityName);\r\n\t\t\t\t// alert(\"entityJSON = \"+JSON.stringify(entityJSON));\r\n\t\t\t\tvar addWithFields=_addWithFields(entityJSON);\r\n\t\t\t\taddWithFields.done(function(){FL.common.printToConsole(\">>>>> syncLocalDictionaryToServer SUCCESS <<<<<\");return def.resolve();});\r\n\t\t\t\taddWithFields.fail(function(err){FL.common.printToConsole(\">>>>> syncLocalDictionaryToServer FAILURE <<<<< \"+err);return def.reject();});\r\n\t\t\t\treturn def.promise();\r\n\t\t\t},\r\n\t\t\tupdateDictionaryEntityProperties: function(eCN,oProperties){//works with FL.dd.updateEntityBySingular to update singular,plural and description properties to server\r\n\t\t\t\t//ex:updateDictionaryEntityProperties(\"50\",{singular:singular,plural:xPlural,description:description});entityName,{singular:singular,plural:xPlural,description:description});\r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\tvar propertiesJSON = {query:{\"_id\":eCN},update:{$set:{\"3\":oProperties.singular,\"E\":oProperties.plural,\"4\":oProperties.description}}};\r\n\t\t\t\tvar entityUpdatePromise=_entity_update(propertiesJSON);\r\n\t\t\t\tentityUpdatePromise.done(function(result){FL.common.printToConsole(\">>>>> updateDictionaryEntityProperties SUCCESS count=\"+result+\"<<<<<\");return def.resolve(result);});\r\n\t\t\t\tentityUpdatePromise.fail(function(err){FL.common.printToConsole(\">>>>> updateDictionaryEntityProperties FAILURE <<<<< \"+err);return def.reject(err);});\r\n\t\t\t\treturn def.promise();\r\n\t\t\t},\t\t\t\r\n\t\t\tupdateDictionaryAttribute: function(fCN,oAttribute){//works with FL.dd.updateAttribute to update attribute to server\r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\tvar attrJSON = {\"_id\":fCN,\"name_3\":oAttribute.name, \"description_4\":oAttribute.description, 'label_K': oAttribute.label,'typeUI_9':oAttribute.typeUI, 'type_M': oAttribute.type, 'enumerable_N':oAttribute.enumerable, 'Nico_P':[oAttribute.specialTypeDef], 'Nico_O':false };\r\n\t\t\t\tvar fieldUpdatePromise=_fieldUpdate(attrJSON);\r\n\t\t\t\tfieldUpdatePromise.done(function(result){FL.common.printToConsole(\">>>>> updateDictionaryAttribute SUCCESS <<<<<\");return def.resolve(result);});\r\n\t\t\t\tfieldUpdatePromise.fail(function(err){FL.common.printToConsole(\">>>>> updateDictionaryAttribute FAILURE <<<<< \"+err);return def.reject(err);});\r\n\t\t\t\treturn def.promise();\r\n\t\t\t},\r\n\t\t\tupdateDictionaryAllAttributes: function(entityName,singular,description,newAttributesArr){//updates the dict with all content related to table\r\n\t\t\t\t// entityName - original entity name to be updated\r\n\t\t\t\t// singular - new entity  name (eventually the same as entityName )\r\n\t\t\t\t// description - new entity description\r\n\t\t\t\t// newAttributesArr - new array of objects each element corresponding to a diferent attribute - and extra key: oldName must be included with the old attribute Name\r\n\t\t\t\t//\t\tex: {name:\"address\",description:\"address to send invoices\",label:\"Address\",type:\"string\",typeUI:\"textbox\",enumerable:null,key:false,oldName:\"Address\"}\r\n\t\t\t\t// if it fails the dictionary  it is not rolled back - the roll back task must be done above this code (ex.FLGrid2 updateDictionaryAndTypesInServer)\r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\tvar xPlural = FL.dd.plural(singular,\"En\");  //+\"s\";\r\n\t\t\t\tvar updatePromise = FL.dd.updateEntityBySingular(entityName,{singular:singular,plural:xPlural,description:description});\r\n\t\t\t\tupdatePromise.done(function(result){\r\n\t\t\t\t\tFL.common.printToConsole(\">>>>> updateEntityBySingular SUCCESS count=\"+result+\"<<<<<\",\"API\");\r\n\t\t\t\t\t// return def.resolve(result);});\r\n\t\r\n\t\t\t\t\tvar bufferChangeObjs = [];\r\n\t\t\t\t\t_.each(newAttributesArr, function(element){//change type based on old attributes\r\n\t\t\t\t\t\tif(element.name!=\"id\"){\r\n\t\t\t\t\t\t\tvar changeObj = {name:element.name,description:element.description,label:element.label,type:element.type,typeUI:element.typeUI,enumerable:element.enumerable};\r\n\t\t\t\t\t\t\tchangeObj[\"singular\"]=singular;\r\n\t\t\t\t\t\t\tchangeObj[\"oldname\"]=element.oldName;\r\n\t\t\t\t\t\t\tbufferChangeObjs.push(changeObj);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},this);\r\n\t\t\t\t\tvar promise = FL.API.queueManager(\"updateAttribute\",\"dummy\",bufferChangeObjs);\r\n\t\t\t\t\tpromise.done(function(result){\r\n\t\t\t\t\t\tFL.dd.setSync(entityName,true)\r\n\t\t\t\t\t\treturn def.resolve(result);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tpromise.fail(function(err){\r\n\t\t\t\t\t\treturn def.reject(err);\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tupdatePromise.fail(function(err){\r\n\t\t\t\t\tFL.common.printToConsole(\">>>>> updateEntityBySingular  FAILURE <<<<< \"+err,\"API\");\r\n\t\t\t\t\treturn def.reject(err);\r\n\t\t\t\t});\r\n\t\t\t\treturn def.promise();\r\n\t\t\t},\r\n\t\t\tloadAppDataForSignInUser2: function() {//loads (local dict + menu + style + fontFamily) from server\r\n\t\t\t\tFL.common.printToConsole(\"....................................>beginning loadAppDataForSignInUser2....with token=\"+JSON.stringify(FL.login.token));\r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\t//syncLocalDictionary ->restoreMainMenu  if it succeds -> restorePage\r\n\t\t\t\tvar loadAppDataForSignInUser=FL.API.syncLocalDictionary()\r\n\t\t\t\t.then(_restoreMainMenuStyleANDfontFamily);\r\n\t\t\t\tloadAppDataForSignInUser.done(function(menuData){\r\n\t\t\t\t\t//data dictionary was loaded + menu was loaded\r\n\t\t\t\t\tFL.dd.displayEntities();\r\n\t\t\t\t\tvar oMenu = FL.login.appToken.menu; //or menuData.oMenu\r\n\t\t\t\t\tvar style = FL.login.appToken.style; //or menuData.style\r\n\t\t\t\t\tvar fontFamily = FL.login.appToken.fontFamily; //or menuData.fontFamily\r\n\t\t\t\t\tvar homePage = null; //or menuData.oMenu\r\n\t\t\t\t\tFL.common.printToConsole(\">>>>> loadAppDataForSignInUser2 SUCCESS loading menu+style+font <<<<< style=\" + style + \" font=\" + fontFamily + \"\\nmenu=\"+ JSON.stringify(oMenu));\r\n\t\t\t\t\tvar homePagePromise = _restorePage();\r\n\t\t\t\t\thomePagePromise.done(function(homeHTML){\r\n\t\t\t\t\t\tvar appDescription = FL.login.token.appDescription;\r\n\t\t\t\t\t\t// FL.login.appToken.homePage = homeHTML;\r\n\t\t\t\t\t\tFL.login.appToken.homePage = insertMacrosOnHomePage(homeHTML);//only supports:<%= appDescription %>, <%= shortUserName %> and <%= userName %>\r\n\t\t\t\t\t\tFL.common.printToConsole(\">>>>> loadAppDataForSignInUser2 FULL SUCCESS <<<<< appToken=\" + JSON.stringify(FL.login.appToken) );\r\n\t\t\t\t\t\tdef.resolve(menuData,FL.login.appToken.homePage,appDescription);\r\n\t\t\t\t\t});\r\n\t\t\t\t\thomePagePromise.fail(function(err){FL.common.printToConsole(\">>>>> loadAppDataForSignInUser2 FAILURE <<<<< error retrieving Home page error=\"+err);def.reject();});\r\n\t\t\t\t});\r\n\t\t\t\tloadAppDataForSignInUser.fail(function(err){FL.common.printToConsole(\">>>>> loadAppDataForSignInUser2 FAILURE <<<<<\"+err);def.reject();});\r\n\t\t\t\treturn def.promise();\r\n\t\t\t},\r\n\t\t\tsetHomePage: function(homeHTML){\r\n\t\t\t\tFL.login.appToken.homePage = homeHTML;\r\n\t\t\t},\r\n\t\t\tsetMenu: function(oMenu){\r\n\t\t\t\tFL.login.appToken.menu = oMenu;\r\n\t\t\t},\r\n\t\t\tsetStyle: function(style){\r\n\t\t\t\tFL.login.appToken.style = style;\r\n\t\t\t},\r\n\t\t\tsetFontFamily: function(fontFamily){\r\n\t\t\t\tFL.login.appToken.fontFamily = fontFamily;\r\n\t\t\t},\t\t\t\r\n\t\t\tsaveHomePage: function(homeHTML) {//\r\n\t\t\t\t//can be used without parameter (it will use FL.login.appToken.homePage ) or with parameter\r\n\t\t\t\tif(homeHTML)\r\n\t\t\t\t\tFL.login.appToken.homePage = homeHTML;\r\n\t\t\t\tFL.common.printToConsole(\"....................................>beginning saveHomePage....with appToken=\"+JSON.stringify(FL.login.appToken));\r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\tvar saveHomePage=_saveHomePage();\r\n\t\t\t\tsaveHomePage.done(function(){FL.common.printToConsole(\">>>>> saveHomePage SUCCESS <<<<< \");def.resolve();});\r\n\t\t\t\tsaveHomePage.fail(function(err){FL.common.printToConsole(\">>>>> saveHomePage FAILURE <<<<<\"+err);def.reject();});\r\n\t\t\t\treturn def.promise();\r\n\t\t\t},\r\n\t\t\tsave_Menu_style_fontFamily: function() {//\r\n\t\t\t\t//it will use FL.login.appToken.oMenu, FL.login.appToken.style, and FL.login.appToken.fontFamily,\r\n\t\t\t\tFL.common.printToConsole(\"....................................>beginning save_Menu_style_fontFamily....with appToken=\"+JSON.stringify(FL.login.appToken));\r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\tvar save_Menu_style_fontFamily=_saveMainMenuStyleANDfontFamily();\r\n\t\t\t\tsave_Menu_style_fontFamily.done(function(){FL.common.printToConsole(\">>>>> save_Menu_style_fontFamily SUCCESS <<<<< \");def.resolve();});\r\n\t\t\t\tsave_Menu_style_fontFamily.fail(function(err){FL.common.printToConsole(\">>>>> save_Menu_style_fontFamily FAILURE <<<<<\"+err);def.reject(err);});\r\n\t\t\t\treturn def.promise();\r\n\t\t\t},\r\n\t\t\tloadDefaultApp: function(loginObject){//returns menuData,homeHTML for user loginObject or \r\n\t\t\t\t//\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\terr={code:<[1,2,3,4]>,message:<error message>}\t\r\n\t\t\t\t//\t1-user not existing  2-isUserExist faillure  3-connectUserToDefaultApp faillure  \r\n\t\t\t\t//\t4-loadAppDataForSignInUser2 faillure 5-wrong password on existing user\r\n\t\t\t\t//  Check if user exists with FL.API.isUserExist\r\n\t\t\t\t//\t\tif it exists => FL.API.connectUserToDefaultApp\r\n\t\t\t\t//\t\t\tif it is connected  =>FL.API.loadAppDataForSignInUser2  =>loads dd and returns menuData and homeHTML\r\n\t\t\t\t//\t\t\t\tNow we have the dictionary loaded and objects menuData and homeHTML\r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\tFL.common.printToConsole(\"....................................>beginning loadDefaultApp....\",\"API\");\r\n\t\t\t    var existingUserPromise=FL.API.isUserExist(loginObject.email);\r\n\t\t\t    existingUserPromise.done(function(exist){\r\n\t\t\t\t\tif(exist){//the user exists\r\n\t\t\t\t\t\tFL.common.printToConsole(loginObject.email + \" exists !!!!\",\"login\");\r\n\t\t\t\t\t\tvar setupExistingUserPromise = FL.API.connectUserToDefaultApp(loginObject.email,loginObject.password);\r\n\t\t\t\t\t\tsetupExistingUserPromise.done(function(){\r\n\t\t\t\t\t\t\tvar loadAppPromise=FL.API.loadAppDataForSignInUser2();//gets data dictionary + main menu + style + fontFamily + home page\r\n\t\t\t\t\t\t\tloadAppPromise.done(function(menuData,homeHTML){\r\n\t\t\t\t\t\t\t\treturn def.resolve(menuData,homeHTML);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tloadAppPromise.fail(function(err){\r\n\t\t\t\t\t\t\t\tFL.common.printToConsole(\"loadAppDataForSignInUser2 FAILURE  <<<<< error=\"+err,\"API\");\r\n\t\t\t\t\t\t\t\treturn def.reject({code:4,message:\"loadAppDataForSignInUser2 FAILURE  <<<<< error=\"+err});\t\t\t\t\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetupExistingUserPromise.fail(function(err){\r\n\t\t\t\t\t\t\tif(err.indexOf(\"Access denied\")>=0){//user exist but password is wrong\r\n\t\t\t\t\t\t\t\treturn def.reject({code:5,message:\"wrong password for existing user\"});\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tFL.common.printToConsole(\"connectUserToDefaultApp FAILURE  <<<<< error=\"+err,\"API\");\r\n\t\t\t\t\t\t\t\treturn def.reject({code:3,message:\"connectUserToDefaultApp FAILURE  <<<<< error=\"+err});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}else{//user does not exist !!!\r\n\t\t\t\t\t\tFL.common.printToConsole(\"FL.API.loadDefaultApp >>>>> user \" + loginObject.email + \" does not exist !\",\"API\");\r\n\t\t\t\t\t\treturn def.reject({code:1,message:\"user \" + loginObject.email + \" does not exist !\"});\r\n\t\t\t\t\t}\r\n\t\t\t    });\r\n\t\t\t    existingUserPromise.fail(function(err){\r\n\t\t\t      FL.common.printToConsole(\"FL.API.loadDefaultApp >>>>> isUserExist FAILURE Service no accessible<<<<<\",\"API\");\r\n\t\t\t      return def.reject({code:2,message:\"isUserExist FAILURE\"});\r\n\t\t\t    });\r\n\t\t\t\treturn def.promise();\r\n\t\t\t},\r\n\t\t\tloadDefaultAppByAPI_Key: function(API_Key) {//returns menuData,homeHTML for API_key or \r\n\t\t\t\t//\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\terr={code:<[1,2,3,4]>,message:<error message>}\t\r\n\t\t\t\t//\t1-user not existing  2-isUserExist faillure  3-connectUserToDefaultApp faillure  4-loadAppDataForSignInUser2 faillure\t\t\t\t\r\n\t\t\t\t// API_Key - is the database access key\r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\tFL.common.printToConsole(\"....................................>beginning loadDefaultAppByAPI_Key....\",\"API\");\r\n\t\t\t\tvar pairString = FL.common.enc(API_Key,-1);//pairString is \"{email:x1,password:x2}\". Encripted with API_Key = FL.common.enc(pairString,1);\r\n\t\t\t\tvar loginObject = JSON.parse(pairString);\r\n\t\t\t\tvar loadDefaultAppPromise = FL.API.loadDefaultApp(loginObject)\r\n\t\t\t\t\t.then(function(menuData,homeHTML){return def.resolve(menuData,homeHTML);}\r\n\t\t\t\t\t,function(err){return def.reject(err);});\t\t\t\r\n\t\t\t\treturn def.promise();\r\n\t\t\t},\r\n\t\t\tgenerateAPI_key: function(loginObject){//loginObject has format {email:x1,password:x3,domain:x4};->domain key is optional \r\n\t\t\t\treturn FL.common.enc(JSON.stringify(loginObject),1);\r\n\t\t\t},\t\r\n\t\t\tremoveTable: function(entityName) {//remove existing or unexisting table - after this we are sure that table does not exist\r\n\t\t\t\t//assumes a connection to an application exists\r\n\t\t\t\t//Temporary instead of removing --> we rename tables on server to unique names beginning by $+ecn\r\n\t\t\t\t//\r\n\t\t\t\t// if logical name does not exists in local dictionary for sure it does not exist in server - no remove to do\r\n\t\t\t\t// if logical name exists in local dictionary in synch with server remove the table in server\r\n\t\t\t\t// if logical name exists in local dictionary but is not in synch ->force synchronization of local dict.\r\n\t\t\t\t//    (because synchoronization clears all local dict items we save the local entry in local var oEntity)\r\n\t\t\t\t//    After synch:\r\n\t\t\t\t//        \tif logical name is not in local it is not in server ->nothing needs to be done in server - we \r\n\t\t\t\t//\t\t\t    only need to reintroduce oEntity in local dictionary\r\n\t\t\t\t//\t\t\tif logical name is in local it is also in server ->we need to remove it and to reintroduce oEntity \r\n\t\t\t\t//\t\t\t\tin local dictionary\r\n\t\t\t\tFL.common.printToConsole(\"........>beginning removeTable....with appToken=\"+JSON.stringify(FL.login.appToken));\r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\t//forces synch from server to be sure \r\n\t\t\t\tvar ecn = FL.dd.getCEntity(entityName);\r\n\t\t\t\tif(ecn === null){\r\n\t\t\t\t\tFL.common.printToConsole(\"........FL.API.removeTable() table=\"+entityName+ \" not in local dict -> not necessary to remove it\");\r\n\t\t\t\t\treturn def.resolve();//not necessary to remove a table not existing in local dict\r\n\t\t\t\t}else{//the table exists in local dict but may be unsynchronized\r\n\t\t\t\t\tvar oEntity = FL.dd.entities[entityName];\r\n\t\t\t\t\tif(oEntity.sync){//table exists and is in sync with server\t\r\n\t\t\t\t\t\tFL.common.printToConsole(\"........FL.API.removeTable() table=\"+entityName+ \" is sync with local dict -> will be removed form server\");\r\n\t\t\t\t\t\tvar removeTablePromise =_entity_update({query:{\"_id\":ecn},update:{$set:{\"3\":'$'+ecn} } });\r\n\t\t\t\t\t\tremoveTablePromise.then(function(){return def.resolve();},function(err){return def.reject(err);});\r\n\t\t\t\t\t}else{//table in local dict but may exist in server (if no synch was done...)\r\n\t\t\t\t\t\tFL.common.printToConsole(\"........FL.API.removeTable() table=\"+entityName+ \" is in local dict but unsync with server -> we force a synchronization\");\r\n\t\t\t\t\t\tvar syncPromise = FL.API.syncLocalDictionary();\r\n\t\t\t\t\t\tsyncPromise.done(function(){\r\n\t\t\t\t\t\t\tvar ecnAfterSync = FL.dd.getCEntity(entityName);\r\n\t\t\t\t\t\t\tif(ecnAfterSync === null){//entity name does not exists in the server\r\n\t\t\t\t\t\t\t\tFL.common.printToConsole(\"........FL.API.removeTable() table=\"+entityName+ \" not in server dict -> not necessary to remove it\");\r\n\t\t\t\t\t\t\t\tFL.dd.entities[entityName] = oEntity;\r\n\t\t\t\t\t\t\t\treturn def.resolve();//not necessary to remove a table not existing table in server\r\n\t\t\t\t\t\t\t}else{//entity name exists in the server\r\n\t\t\t\t\t\t\t\t//we need to remove the table from the server \r\n\t\t\t\t\t\t\t\tFL.common.printToConsole(\"........FL.API.removeTable() table=\"+entityName+ \" not in sync with local dict but exists in server -> will be removed form server\");\r\n\t\t\t\t\t\t\t\tvar removeTablePromise =_entity_update({query:{\"_id\":ecn},update:{$set:{\"3\":'$'+ecn} } });\r\n\t\t\t\t\t\t\t\tremoveTablePromise.then(function(){return def.resolve();},function(err){return def.reject(err);});\r\n\t\t\t\t\t\t\t\t//because FL.API.syncLocalDictionary() cleared the local dictionary we need to add oEntity to the local dict\r\n\t\t\t\t\t\t\t\tFL.dd.entities[entityName] = oEntity;\r\n\t\t\t\t\t\t\t\treturn def.resolve();//Table was removed from server and unsynched <entityName> was resetted in local dict.\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsyncPromise.fail(function(){return def.reject();});\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn def.promise();\r\n\t\t\t},\r\n\t\t\tsaveTable: function(entityName,recordsArray) {//creates a table (overriding any existing one) and saves a set of records in it\r\n\t\t\t\t//assumes a login to an application exists - if table is not in synch it synchs it\r\n\t\t\t\t//recordsArray [{\"number\":12,\"code\":\"abc\"},....]\r\n\t\t\t\t//returns array with input data and _id for each record\r\n\t\t\t\tFL.common.printToConsole(\"....................................>beginning saveTable....with appToken=\"+JSON.stringify(FL.login.appToken));\r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\tvar ecn = FL.dd.getCEntity(entityName);\r\n\t\t\t\t//begins by removeTable, then sync local dict  to server, then inserting lines\r\n\t\t\t\t// var remove_synch = FL.API.removeTable(entityName).then(FL.API.syncLocalDictionaryToServer(entityName));\r\n\t\t\t\t// var remove_synch = FL.API.removeTable(entityName).then(FL.API.syncLocalDictionaryToServer(entityName));\r\n\t\t\t\tFL.API.removeTable(entityName)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\treturn FL.API.syncLocalDictionaryToServer(entityName);\r\n\t\t\t\t})\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\t\tecn = FL.dd.getCEntity(entityName);\r\n\t\t\t\t\t\tFL.common.printToConsole(\">>>>>saveTable --> remove and synch SUCCESS <<<<<\");\r\n\t\t\t\t\t\tFL.common.printToConsole(\"+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\");\r\n\t\t\t\t\t\tvar arrToSend = convertRecordsTo_arrToSend(entityName,recordsArray);\r\n\t\t\t\t\t\tFL.common.printToConsole(\"saveTable --->\"+JSON.stringify(arrToSend));\r\n\t\t\t\t\t\tFL.common.printToConsole(\"+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\");\r\n\t\t\t\t\t\tinsertPromise = _insert(ecn,arrToSend);\r\n\t\t\t\t\t\tinsertPromise.then(function(data){FL.common.printToConsole(\">>>>>saveTable Ok\");return def.resolve(data);},function(err){return def.reject(err);});\r\n\t\t\t\t\t\t//data has the format:\r\n\t\t\t\t\t\t// [{\"d\":{\"55\":\"Jojox\",\"56\":\"123\"},\"v\":0,\"_id\":\"546963669b04c9107942d32d\"},{\"d\":{\"55\":\"Anton\",\"56\":\"456\"},\"v\":0,\"_id\":\"546963669b04c9107942d32e\"}]\r\n\t\t\t\t\t\t// return def.resolve();\r\n\t\t\t\t\t}\r\n\t\t\t\t).fail(\r\n\t\t\t\t\tfunction(err){\r\n\t\t\t\t\t\tFL.common.printToConsole(\">>>>>saveTable --> remove and synch FAILURE <<<<< \"+err);\r\n\t\t\t\t\t\treturn def.reject(err);\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t\treturn def.promise();\r\n\t\t\t},\r\n\t\t\t//we need table CRUD: addRecordsToTable,getRecordsFromTable, updateRecordsToTable, removeRecordsFromTable\r\n\t\t\t// Method addRecordsToTable - has parameters  (entityName,recordsArray)\r\n\t\t\t//\t\twhere recordsArray has the format [{\"number\":12,\"code\":\"abc\"},....]\r\n\t\t\t// Methods getRecordsFromTable,updateRecordsToTable and removeRecordsFromTable - has parameters  (entityName,recordsId,withTS)\r\n\t\t\t//\t\twhere recordsId has the format [{\"_id\":1,timeStamp:\"A\"},{\"_id\":4},....]\r\n\t\t\taddRecordsToTable: function(entityName,recordsArray,withId) {//add one or several records to existing table\r\n\t\t\t\t//assumes a login to an application exists and entitName exists in local and is in sync\r\n\t\t\t\t//recordsArray [{\"number\":12,\"code\":\"abc\"},....]\r\n\r\n\t\t\t\t//withId flag (default = false) if true all _id will be forced in the add.\r\n\t\t\t\tFL.common.printToConsole(\"....................................>beginning addRecordsToTable....with appToken=\"+JSON.stringify(FL.login.appToken));\r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\tif(_.isUndefined(withId) )\r\n\t\t\t\t\tvar withId = false;\r\n\t\t\t\tvar ecn = FL.dd.getCEntity(entityName);\r\n\t\t\t\tif(ecn === null){\r\n\t\t\t\t\tFL.common.printToConsole(\"........FL.API.addRecordsToTable() table=\"+entityName+ \" not in local dict !\");\r\n\t\t\t\t\treturn def.reject(\"addRecordsToTable <table=\"+entityName+ \"> does not exist in local dict !\");//\r\n\t\t\t\t}else{//the table exists in local dict but may be unsynchronized\r\n\t\t\t\t\tvar oEntity = FL.dd.entities[entityName];\t\r\n\t\t\t\t\tif(!oEntity.sync){//table exists in local dict but is not in sync with server\t\r\n\t\t\t\t\t\tFL.common.printToConsole(\"........FL.API.addRecordsToTable() <table=\"+entityName+ \"> exists in local dict but is not in sync\");\r\n\t\t\t\t\t\treturn def.reject(\"addRecordsToTable <table=\"+entityName+ \"> not in sync !\");//\r\n\t\t\t\t\t}else{//table exists and is in sync\r\n\t\t\t\t\t\tFL.common.printToConsole(\"........FL.API.addRecordsToTable() table=\"+entityName+ \" is ok. We will insert!\");\r\n\t\t\t\t\t\tvar arrToSend = convertRecordsTo_arrToSend(entityName,recordsArray,withId);\t\t\r\n\t\t\t\t\t\tinsertPromise = _insert(ecn,arrToSend);\r\n\t\t\t\t\t\tinsertPromise.then(function(data){return def.resolve(data);},function(err){return def.reject(err);});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\t\r\n\t\t\t\treturn def.promise();\r\n\t\t\t},\r\n\t\t\taddRecordsToTableByCN: function(eCN,recordsArray,withId) {//add one or several records to existing table\r\n\t\t\t\t// eCN - Entity compressed name\r\n\t\t\t\t// recordsArray - array where each element is a JSON with pairs fCN:<content to insert>\r\n\t\t\t\t//   ex:[{\"51\":125,\"52\":\"abc\"},....]\r\n \r\n\t\t\t\t//the same as addRecordsToTable() but by compressed name\r\n\t\t\t\t//assumes a login to an application exists and entitName exists in local and is in sync\r\n\t\t\t\t//recordsArray [{\"number\":12,\"code\":\"abc\"},....]\r\n\r\n\t\t\t\t//withId flag (default = false) if true all _id will be forced in the add.\r\n\t\t\t\tFL.common.printToConsole(\"....................................>beginning addRecordsToTable....with appToken=\"+JSON.stringify(FL.login.appToken));\r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\tif(_.isUndefined(withId) )\r\n\t\t\t\t\tvar withId = false;\r\n\t\t\t\tvar ecn = eCN;//FL.dd.getCEntity(entityName);\r\n\t\t\t\tvar entityName = FL.dd.getEntityByCName(ecn);\r\n\t\t\t\tif(ecn === null){\r\n\t\t\t\t\tFL.common.printToConsole(\"........FL.API.addRecordsToTable() table=\"+entityName+ \" not in local dict !\");\r\n\t\t\t\t\treturn def.reject(\"addRecordsToTable <table=\"+entityName+ \"> does not exist in local dict !\");//\r\n\t\t\t\t}else{//the table exists in local dict but may be unsynchronized\r\n\t\t\t\t\tvar oEntity = FL.dd.entities[entityName];\t\r\n\t\t\t\t\tif(!oEntity.sync){//table exists in local dict but is not in sync with server\t\r\n\t\t\t\t\t\tFL.common.printToConsole(\"........FL.API.addRecordsToTable() <table=\"+entityName+ \"> exists in local dict but is not in sync\");\r\n\t\t\t\t\t\treturn def.reject(\"addRecordsToTable <table=\"+entityName+ \"> not in sync !\");//\r\n\t\t\t\t\t}else{//table exists and is in sync\r\n\t\t\t\t\t\tFL.common.printToConsole(\"........FL.API.addRecordsToTable() table=\"+entityName+ \" is ok. We will insert!\");\r\n\t\t\t\t\t\tvar arrToSend = convertRecordsTo_arrToSend(entityName,recordsArray,withId);\t\t\r\n\t\t\t\t\t\tinsertPromise = _insert(ecn,arrToSend);\r\n\t\t\t\t\t\tinsertPromise.then(function(data){return def.resolve(data);},function(err){return def.reject(err);});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\t\r\n\t\t\t\treturn def.promise();\r\n\t\t\t},\t\t\t\r\n\t\t\tupdateRecordToTable: function(entityName,record) {//update a single record to existing table\r\n\t\t\t\t//assumes a login to an application exists and entitName exists in local and is in sync\r\n\t\t\t\t//record is a JSON containing a _id key {\"_id\":12345,\"id\":1,\"code\":\"abc\"}\r\n\t\t\t\tFL.common.printToConsole(\"....................................>beginning updateRecordToTable....with appToken=\"+JSON.stringify(FL.login.appToken));\r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\tvar ecn = FL.dd.getCEntity(entityName);\r\n\t\t\t\tif(ecn === null){\r\n\t\t\t\t\tFL.common.printToConsole(\"........FL.API.updateRecordToTable() table=\"+entityName+ \" not in local dict !\");\r\n\t\t\t\t\treturn def.reject(\"updateRecordToTable table=\"+entityName+ \" does not exist\");//\r\n\t\t\t\t}else{//the table exists in local dict but may be unsynchronized\r\n\t\t\t\t\tvar oEntity = FL.dd.entities[entityName];\r\n\t\t\t\t\tif(!oEntity.sync){//table exists in local dict but is not in sync with server\t\r\n\t\t\t\t\t\tFL.common.printToConsole(\"........FL.API.updateRecordToTable() table=\"+entityName+ \" exists in local dict but is not in sync\");\r\n\t\t\t\t\t\treturn def.reject(\"updateRecordToTable table=\"+entityName+ \" not in sync\");//\r\n\t\t\t\t\t}else{//table exists and is in sync\r\n\t\t\t\t\t\tFL.common.printToConsole(\"........FL.API.updateRecordToTable() table=\"+entityName+ \" is ok. We will insert!\");\r\n\t\t\t\t\t\tvar arrToSend = convertOneRecordTo_arrToSend(entityName,record);//returns {\"d\":{\"51\":\"cli1\",\"52\":\"Lx\",\"53\":\"Pt\"}} \r\n\t\t\t\t\t\tif(record._id){\r\n\t\t\t\t\t\t\tFL.common.printToConsole(\"update ->\"+record._id+\" record=\"+JSON.stringify(record));\r\n\t\t\t\t\t\t\tvar updatePromise = _update(ecn,record._id,arrToSend.d);\r\n\t\t\t\t\t\t\tupdatePromise.done(function(count){\r\n\t\t\t\t\t\t\t\tFL.common.printToConsole(\">>>>> updatePromise SUCCESS <<<<< \" + count + \" record updated!\");\r\n\t\t\t\t\t\t\t\tdef.resolve(count);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tupdatePromise.fail(function(err){FL.common.printToConsole(\">>>>> updatePromise FAILURE <<<<<\"+err);def.reject(err);});\r\n\t\t\t\t\t\t\t// return def.resolve(data);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tFL.common.printToConsole(\"........FL.API.updateRecordToTable() table=\"+entityName+ \" is ok but _id is missing\");\r\n\t\t\t\t\t\t\treturn def.reject(\"updateRecordToTable table=\"+entityName+ \" -->error: missing _id\");//\r\n\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\t// insertPromise.then(function(data){return def.resolve(data);},function(err){return def.reject(err);});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\t\r\n\t\t\t\treturn def.promise();\r\n\t\t\t},\r\n\t\t\t// removeRecordFromTable: function(entityName,record) {//removes a single record from a table\r\n\t\t\tremoveRecordFromTable: function(entityName,arrOf_Id) {//removes all _id in the array arrOf_Id\r\n\t\t\t\t//assumes a login to an application exists and entitName exists in local and is in sync\r\n\t\t\t\t//record is a JSON containing a _id key {\"_id\":12345,\"id\":1,\"code\":\"abc\"}\r\n\t\t\t\t//arrOf_Id is an array containing _id keys [12345,12312343]\r\n\t\t\t\tFL.common.printToConsole(\"....................................>beginning removeRecordFromTable....with appToken=\"+JSON.stringify(FL.login.appToken));\r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\tvar ecn = FL.dd.getCEntity(entityName);\r\n\t\t\t\tif(ecn === null){\r\n\t\t\t\t\tFL.common.printToConsole(\"........FL.API.removeRecordFromTable() table=\"+entityName+ \" not in local dict !\");\r\n\t\t\t\t\treturn def.reject(\"removeRecordFromTable table=\"+entityName+ \" does not exist\");//\r\n\t\t\t\t}else{//the table exists in local dict but may be unsynchronized\r\n\t\t\t\t\tvar oEntity = FL.dd.entities[entityName];\r\n\t\t\t\t\tif(!oEntity.sync){//table exists in local dict but is not in sync with server\t\r\n\t\t\t\t\t\tFL.common.printToConsole(\"........FL.API.removeRecordFromTable() table=\"+entityName+ \" exists in local dict but is not in sync\");\r\n\t\t\t\t\t\treturn def.reject(\"removeRecordFromTable table=\"+entityName+ \" not in sync\");//\r\n\t\t\t\t\t}else{//table exists and is in sync\r\n\t\t\t\t\t\tFL.common.printToConsole(\"........FL.API.removeRecordFromTable() table=\"+entityName+ \" is ok. We will remove!\");\r\n\t\t\t\t\t\t// if(record._id){\r\n\t\t\t\t\t\tif(arrOf_Id.length>0){\r\n\t\t\t\t\t\t\t// FL.common.printToConsole(\"remove ->\"+record._id+\" record=\"+JSON.stringify(record));\r\n\t\t\t\t\t\t\tFL.common.printToConsole(\"remove -> _Ids in array \"+JSON.stringify(arrOf_Id));\r\n\t\t\t\t\t\t\t// var removePromise = _remove(ecn,record._id);\r\n\t\t\t\t\t\t\tvar removePromise = _removeMultiple(ecn,arrOf_Id);\r\n\t\t\t\t\t\t\tremovePromise.done(function(count){\r\n\t\t\t\t\t\t\t\tFL.common.printToConsole(\">>>>> removePromise SUCCESS <<<<< record removed!\");\r\n\t\t\t\t\t\t\t\tdef.resolve(count);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tremovePromise.fail(function(err){FL.common.printToConsole(\">>>>> removePromise FAILURE <<<<<\"+err);def.reject(err);});\r\n\t\t\t\t\t\t\t// return def.resolve(data);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tFL.common.printToConsole(\"........FL.API.removeRecordFromTable() table=\"+entityName+ \" is ok but _id is missing\");\r\n\t\t\t\t\t\t\treturn def.reject(\"removeRecordFromTable table=\"+entityName+ \" -->error: array of _ids is empty\");//\r\n\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\t// insertPromise.then(function(data){return def.resolve(data);},function(err){return def.reject(err);});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\t\r\n\t\t\t\treturn def.promise();\r\n\t\t\t},\r\n\t\t\tremoveAllRecords: function(eCN){//remove all records from eCN\r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\tvar removeAllPromise=_removeAll(eCN);\r\n\t\t\t\tremoveAllPromise.done(function(count){\r\n\t\t\t\t\tFL.common.printToConsole(\">>>>> removeAllPromise SUCCESS <<<<< \");\r\n\t\t\t\t\treturn def.resolve(count);\r\n\t\t\t\t});\r\n\t\t\t\tremoveAllPromise.fail(function(err){FL.common.printToConsole(\">>>>> removeAllPromise FAILURE <<<<<\"+err); return def.reject(err);});\r\n\t\t\t\treturn def.promise();\t\t\t\t\r\n\t\t\t},\t\t\t\t\t\t\t\t\r\n\t\t\tloadTable: function(entityName) {//returns the full content of a table from server\r\n\t\t\t\t//assumes a login to an application exists\r\n\t\t\t\tFL.common.printToConsole(\"....................................>beginning loadTable....with appToken=\"+JSON.stringify(FL.login.appToken));\r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\tvar ecn = FL.dd.getCEntity(entityName);\r\n\t\t\t\tvar loadTable=_findAll(ecn);\r\n\t\t\t\t//fd.findAll(ecn, {\"query\":{}}, function(err, data){..})\r\n\t\t\t\tloadTable.done(function(dataArray){\r\n\t\t\t\t\tFL.common.printToConsole(\">>>>> loadTable SUCCESS <<<<< \");\r\n\t\t\t\t\t//dataArray has a format: [{\"_id\":1,\"d\":{\"53\":\"line 1 content of field1\",\"54\":\"line 1 content of field2\"},\"v\":0},\r\n\t\t\t\t\t//\t\t\t\t\t\t\t{\"_id\":2,\"d\":{\"53\":\"line 2 content of field1\",\"54\":\"line 2 content of field2\"},\"v\":0}...,]\r\n\t\t\t\t\tvar arrLocallyTranslated = FL.API.convertArrC2LForEntity(entityName,dataArray);//dataArray =>[{\"_id\":123,d:{},r:[]},{\"_id\":124,d:{},r:[]},....{\"_id\":125,d:{},r:[]}]\r\n\t\t\t\t\t//arrLocallyTranslated is flatted with the format:\r\n\t\t\t\t\t// alert(\"arrLocallyTranslated=\"+arrLocallyTranslated);\r\n\t\t\t\t\t//[{\"_id\":123234234,\"id\":1,produto\":\"High\",\"nome\":\"Rota dos Numeros, Lda\",\"marca\":\"Rota dos Numeros\",\"morada\":\"Av Ceuta, 21 B\",\"cod postal\":\"2700-188\",\"localidade\":\"Amadora\",\"telefone\":\"21 4945431 \",\"email\":\"rota.dos.numeros@sapo.pt \",\"id\":1,\"_id\":\"545b4f9afa2b1a3233bb6781\"},\r\n\t\t\t\t\tdef.resolve(arrLocallyTranslated);\r\n\t\t\t\t});\r\n\t\t\t\tloadTable.fail(function(err){FL.common.printToConsole(\">>>>> loadTable FAILURE <<<<<\"+err);def.reject(err);});\r\n\t\t\t\treturn def.promise();\r\n\t\t\t},\r\n\t\t\txloadTableByCN:[\r\n                {eCN:\"6A\", _id:\"1\",fCN:\"51\"},\r\n                {eCN:\"6A\", _id:\"1\",fCN:\"51\"},\r\n                {eCN:\"6A\", _id:\"1\",fCN:\"51\"},\r\n\t\t\t],\r\n\t\t\tloadTableByCN: function(eCN) {//returns the full content of a table from server \r\n\t\t\t\t// format:\r\n\t\t\t\t//    [{\"_id\":1,\"d\":{\"53\":\"line 1 content of field1\",\"54\":\"line 1 content of field2\"},\"v\":0},\r\n\t\t\t\t//  \t{\"_id\":2,\"d\":{\"53\":\"line 2 content of field1\",\"54\":\"line 2 content of field2\"},\"v\":0}...,]\r\n\t\t\t\t//\r\n\t\t\t\t//assumes a login to an application exists\r\n\t\t\t\tFL.common.printToConsole(\"....................................>beginning loadTableByCN....with appToken=\"+JSON.stringify(FL.login.appToken));\r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\t// var eCN = FL.dd.getCEntity(entityName);\r\n\t\t\t\tvar loadTable=_findAll(eCN);\r\n\t\t\t\t//fd.findAll(eCN, {\"query\":{}}, function(err, data){..})\r\n\t\t\t\tloadTable.done(function(dataArray){\r\n\t\t\t\t\tFL.common.printToConsole(\">>>>> loadTableByCN SUCCESS <<<<< \");\r\n\t\t\t\t\tdef.resolve(dataArray);\r\n\t\t\t\t});\r\n\t\t\t\tloadTable.fail(function(err){FL.common.printToConsole(\">>>>> loadTableByCN FAILURE <<<<<\"+err);def.reject(err);});\r\n\t\t\t\treturn def.promise();\r\n\t\t\t},\r\n\t\t\topenTable: function(eCN){\r\n\t\t\t\t// use openTable(\"50\").id(\"1\") - returns {\"53\":\"line 1 content of field1\",\"54\":\"line 1 content of field2\"}\r\n\t\t\t\t// use openTable(\"50\").id(\"1\")[\"53\"] - returns \"line 1 content of field1\"\r\n\t\t\t\t// use openTable(\"50\").search({\"63\":\"jojo\"}).read[\"63\"]\r\n\r\n\t\t\t\tFL.common.printToConsole(\"....................................>beginning loadTableByCN....with appToken=\"+JSON.stringify(FL.login.appToken));\r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\tvar loadPromise=this.loadTableByCN(eCN);\r\n\t\t\t\tloadPromise.done(function(dataArray){\r\n\t\t\t\t\t//dataArray format--> [{\"_id\":1,\"d\":{\"53\":\"line 1 content of field1\",\"54\":\"line 1 content of field2\"},\"v\":0},...]\r\n\t\t\t\t\tFL.common.printToConsole(\">>>>> openTable SUCCESS <<<<< \",\"API\");\r\n\t\t\t\t\t// var tableOBj = {\r\n\t\t\t\t\t// \tid: function(id){\r\n\t\t\t\t\t// \t\talert(\"openTable[<>].id()\"+id);\r\n\t\t\t\t\t// \t\treturn def.resolve(dataArray[id]);\r\n\t\t\t\t\t// \t},\r\n\t\t\t\t\t// \tsearch: function(searchObj){//searchObj \r\n\t\t\t\t\t// \t\tformat\r\n\t\t\t\t\t// \t\t// equality condition { <fCN>: <value> } to select all documents that contain the <fCN> with the specified <value>\r\n\t\t\t\t\t// \t\t// or condition { <fCN>:$in: [ <value1>,<value2>] } } to select all documents that contain the <fCN> with values <value1> or <value2>\r\n\t\t\t\t\t// \t\talert(\"openTable[<>].search()\"+JSON.stringify(searchObj));\r\n\t\t\t\t\t// \t\treturn def.resolve();\r\n\t\t\t\t\t// \t},\t\t\t\t\t\t\r\n\t\t\t\t\t// };\r\n\t\t\t\t\tdef.resolve(dataArray);\r\n\t\t\t\t});\r\n\t\t\t\tloadPromise.fail(function(err){FL.common.printToConsole(\">>>>> openTable FAILURE <<<<<\"+err);def.reject(err);});\r\n\r\n\t\t\t\treturn def.promise();\t\t\r\n\t\t\t},\t\t\r\n\t\t\tloadTableId: function(entityName,field2) {//returns only the _id field and optionally a second field from server\r\n\t\t\t\t//assumes a login to an application exists\r\n\t\t\t\tFL.common.printToConsole(\"....................................>beginning loadTableId....with appToken=\"+JSON.stringify(FL.login.appToken));\r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\tvar ecn = FL.dd.getCEntity(entityName);\r\n\t\t\t\tif(!ecn){\r\n\t\t\t\t\talert(\"Error in FL.API.loadTableId the table <<\" + entityName + \">> not in local dictiionary!\");\r\n\t\t\t\t\treturn def.reject(\"Error in FL.API.loadTableId the table <<\" + entityName + \">> not in local dictiionary!\" );\r\n\t\t\t\t}\r\n\t\t\t\tvar projections = {\"_id\":1};\r\n\t\t\t\tif(field2){\r\n\t\t\t\t\tvar fCN=FL.dd.getFieldCompressedName(entityName,field2);\r\n\t\t\t\t\tprojections[fCN] = 1;\r\n\t\t\t\t}\t\r\n\t\t\t\t// var loadTableId=_findAll(ecn,{},{\"_id\":1});\r\n\t\t\t\tvar loadTableId=_findAll(ecn,{},projections);\r\n\t\t\t\tloadTableId.done(function(dataArray){\r\n\t\t\t\t\tFL.common.printToConsole(\">>>>> loadTableId SUCCESS <<<<< \");\r\n\t\t\t\t\t//dataArray has a format: [{\"_id\":1,\"d\":{\"53\":\"line 1 content of field1\",\"54\":\"line 1 content of field2\"},\"v\":0},\r\n\t\t\t\t\t//\t\t\t\t\t\t\t{\"_id\":2,\"d\":{\"53\":\"line 2 content of field1\",\"54\":\"line 2 content of field2\"},\"v\":0}...,]\r\n\t\t\t\t\tvar arrLocallyTranslated = FL.API.convertArrC2LForEntity(entityName,dataArray);//dataArray =>[{\"_id\":123,d:{},r:[]},{\"_id\":124,d:{},r:[]},....{\"_id\":125,d:{},r:[]}]\r\n\t\t\t\t\t//arrLocallyTranslated is flatted with the format:\r\n\t\t\t\t\t// alert(\"arrLocallyTranslated=\"+arrLocallyTranslated);\r\n\t\t\t\t\t//[{\"_id\":123234234,\"id\":1,produto\":\"High\",\"nome\":\"Rota dos Numeros, Lda\",\"marca\":\"Rota dos Numeros\",\"morada\":\"Av Ceuta, 21 B\",\"cod postal\":\"2700-188\",\"localidade\":\"Amadora\",\"telefone\":\"21 4945431 \",\"email\":\"rota.dos.numeros@sapo.pt \",\"id\":1,\"_id\":\"545b4f9afa2b1a3233bb6781\"},\r\n\t\t\t\t\tdef.resolve(arrLocallyTranslated);\r\n\t\t\t\t});\r\n\t\t\t\tloadTableId.fail(function(err){FL.common.printToConsole(\">>>>> loadTableId FAILURE <<<<<\"+err);def.reject(err);});\r\n\t\t\t\treturn def.promise();\r\n\t\t\t},\t\t\r\n\t\t\tsyncLocalStoreToServer: function(){//saves menu,style and font to server, retrieving them from localStore\r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\tvar lastMenuStr  = localStorage.storedMenu\r\n\t\t\t\tvar lastStyleStr = localStorage.style;// Retrieve last saved style ex.red or spacelab\r\n\t\t\t\tvar lastFontFamilyStr = localStorage.fontFamily;// Retrieve last saved fontFamily ex.impact or georgia\r\n\t\t\t\tvar oMenu = JSON.parse(lastMenuStr);\r\n\t\t\t\tFL.API.setMenu(oMenu);\r\n\t\t\t\tFL.API.setStyle(lastStyleStr);\r\n\t\t\t\tFL.API.setFontFamily(lastFontFamilyStr);\r\n\t\t\t\tvar promise = FL.API.save_Menu_style_fontFamily();\r\n\t\t\t\tpromise.done(function(){FL.common.printToConsole(\">>>>> syncLocalStoreToServer SUCCESS <<<<< \");def.resolve();});\r\n\t\t\t\tpromise.fail(function(err){FL.common.printToConsole(\">>>>> syncLocalStoreToServer FAILURE <<<<<\"+err);def.reject(err);});\r\n\t\t\t\r\n\t\t\t\t// FL.server.saveMainMenu(oMenu,lastStyleStr,lastFontFamilyStr,function(err){\r\n\t\t\t\t// \tFL.common.printToConsole(\"FL.server syncLocalStoreToServer() -> menu style and font saved on server -->\"+err);\r\n\t\t\t\t// \t// alert(\"FLMenu2.js saveMenuToLocalAndServer called FL.server.saveMainMenu with style=\"+lastStyleStr+ \" font=\"+lastFontFamilyStr);\r\n\t\t\t\t// });\r\n\t\t\t\treturn def.promise();\r\n\t\t\t},\t\t\t\r\n\t\t\tXcreateHistoMails_ifNotExisting: function() {//checks if histoMails exist. If not creates it\r\n\t\t\t\tvar eCN = FL.dd.getCEntity(\"_histoMail\");\r\n\t\t\t\t// eCN = 23;\r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\tFL.common.printToConsole(\">>>>>> createHistoMails_ifNotExisting eCN=\"+eCN);\r\n\t\t\t\tif(eCN === null){ // does not exist we should create it\r\n\t\t\t\t\tFL.common.printToConsole(\"....................................>beginning createHistoMails_ifNotExisting....with token=\"+JSON.stringify(FL.login.token));\r\n\t\t\t\t\tFL.dd.createEntity(\"_histoMail\",\"mails histo entity\");//update local dict\r\n\t\t\t\t\tFL.dd.addAttribute(\"_histoMail\",'msg','events log','mail event','string','textbox',null);\r\n\t\t\t\t\t// FL.dd.displayEntities();\r\n\t\t\t\t\tvar synch=FL.API.syncLocalDictionaryToServer('_histoMail');\r\n\t\t\t\t\tsynch.done(function(){\r\n\t\t\t\t\t\tFL.common.printToConsole(\">>>>>createHistoMails_ifNotExisting syncLocalDictionaryToServer SUCCESS <<<<<\");\r\n\t\t\t\t\t\tdef.resolve();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsynch.fail(function(err){\r\n\t\t\t\t\t\tFL.common.printToConsole(\">>>>>createHistoMails_ifNotExisting syncLocalDictionaryToServer FAILURE <<<<< \"+err);\r\n\t\t\t\t\t\tdef.reject(err);\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tFL.common.printToConsole(\">>>>>createHistoMails_ifNotExisting _histoMail exists !\");\r\n\t\t\t\t\tdef.resolve();//it exists already\r\n\t\t\t\t}\r\n\t\t\t\treturn def.promise();\r\n\t\t\t},\r\n\t\t\tcreateTableHistoMails_ifNotExisting: function(entityName) {// createHistoMails_ifNotExisting: function(entityName) {//creates \"_histoMail_<eCN>\" where eCN is the Entity Compressed name of entityName\r\n\t\t\t\t//Note: entityName must exist\r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\tif(!FL.dd.isEntityInLocalDictionary(entityName)){\r\n\t\t\t\t\talert(\"createTableHistoMails_ifNotExisting ERROR entity \" + entityName + \" does not exist in Local Data Dictionary\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvar histoName = FL.dd.histoMailPeer(entityName);\r\n\t\t\t\t\tvar eCN = FL.dd.getCEntity(histoName);\r\n\t\t\t\t\tFL.common.printToConsole(\">>>>>> createTableHistoMails_ifNotExisting for \" + entityName + \". Peer table is \" + histoName + \" with eCN=\" + eCN + \" for table\");\r\n\t\t\t\t\tif(eCN === null){ // does not exist in local DD we should create it\r\n\t\t\t\t\t\tFL.common.printToConsole(\"....................................>beginning createTableHistoMails_ifNotExisting....with token=\"+JSON.stringify(FL.login.token));\r\n\t\t\t\t\t\t// FL.dd.createEntity(histoName,\"mails histo peer for initial name=\"+entityName);//update local dict\r\n\t\t\t\t\t\t// FL.dd.addAttribute(histoName,'msg','events log','mail event','string','textbox',null);\r\n\t\t\t\t\t\tFL.dd.createHistoMailPeer(entityName);\r\n\t\t\t\t\t\t// FL.dd.displayEntities();\r\n\t\t\t\t\t\tvar synch=FL.API.syncLocalDictionaryToServer(histoName);\r\n\t\t\t\t\t\tsynch.done(function(){\r\n\t\t\t\t\t\t\tFL.common.printToConsole(\">>>>>createTableHistoMails_ifNotExisting syncLocalDictionaryToServer SUCCESS <<<<<\");\r\n\t\t\t\t\t\t\tdef.resolve();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsynch.fail(function(err){\r\n\t\t\t\t\t\t\tFL.common.printToConsole(\">>>>>createTableHistoMails_ifNotExisting syncLocalDictionaryToServer FAILURE <<<<< \"+err);\r\n\t\t\t\t\t\t\tdef.reject(err);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tFL.common.printToConsole(\">>>>>createTableHistoMails_ifNotExisting _histoMail exists !\");\r\n\t\t\t\t\t\tdef.resolve();//it exists already\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn def.promise();\r\n\t\t\t},\r\n\t\t\tcreateTemplates_ifNotExisting: function() {//checks if templates exist. If not creates it\r\n\t\t\t\tvar eCN = FL.dd.getCEntity(\"_templates\");\r\n\t\t\t\t// eCN = 23;\r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\tFL.common.printToConsole(\">>>>>> createTemplates_ifNotExisting eCN=\"+eCN);\r\n\t\t\t\tif(eCN === null){ // does not exist we should create it\r\n\t\t\t\t\tFL.common.printToConsole(\"....................................>beginning createTemplates_ifNotExisting....with token=\"+JSON.stringify(FL.login.token));\r\n\t\t\t\t\tFL.dd.createEntity(\"_templates\",\"templates entity\");//update local dict\r\n\t\t\t\t\tFL.dd.addAttribute(\"_templates\",'jsonTemplate','json of template','json of template','string','textbox',null);\r\n\t\t\t\t\t// FL.dd.displayEntities();\r\n\t\t\t\t\tvar synch=FL.API.syncLocalDictionaryToServer('_templates');\r\n\t\t\t\t\tsynch.done(function(){\r\n\t\t\t\t\t\tFL.common.printToConsole(\">>>>>createTemplates_ifNotExisting syncLocalDictionaryToServer SUCCESS <<<<<\");\r\n\t\t\t\t\t\tdef.resolve();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsynch.fail(function(err){\r\n\t\t\t\t\t\tFL.common.printToConsole(\">>>>>createTemplates_ifNotExisting syncLocalDictionaryToServer FAILURE <<<<< \"+err);\r\n\t\t\t\t\t\tdef.reject(err);\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tFL.common.printToConsole(\">>>>>createTemplates_ifNotExisting _templates exists !\");\r\n\t\t\t\t\tdef.resolve();//it exists already\r\n\t\t\t\t}\r\n\t\t\t\treturn def.promise();\r\n\t\t\t},\t\t\t\t\t\t\r\n\t\t\tmailRecipientsOfTemplate: function(entityName,templateName) {//for list entityName and templateName returns all emails received in Webhook\r\n\t\t\t\t//assumes a login to an application exists\r\n\t\t\t\tFL.common.printToConsole(\"....................................>beginning mailRecipientsOfTemplate....with appToken=\"+JSON.stringify(FL.login.appToken));\r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\t// var eCN = FL.dd.getCEntity(entityName);\r\n\t\t\t\t// var eCN = FL.dd.getCEntity(\"_histoMail\");\r\n\t\t\t\t// var fCN = FL.dd.getFieldCompressedName(\"_histoMail\",\"msg\");//the field to search within eCN\r\n\t\t\t\t\r\n\t\t\t\tvar histoName = FL.dd.histoMailPeer(entityName);\r\n\t\t\t\tvar eCN = FL.dd.getCEntity(histoName);\r\n\t\t\t\tvar fCN = FL.dd.getFieldCompressedName(histoName,\"msg\");//the field to search within eCN\r\n\r\n\t\t\t\tvar par1 = {};\r\n\t\t\t\tpar1[fCN+'.metadata.NName'] = templateName;\r\n\t\t\t\t// par1[fCN+'.sender'] = sender;\r\n\r\n\t\t\t\tvar par2 = {};\r\n\t\t\t\t// par2[fCN+'.sender'] = 1;\r\n\t\t\t\tpar2[fCN+'.email'] = 1;\r\n\r\n\r\n\t\t\t\t// var mailRecipientsTable=_findAll(eCN,{fCN+'.metadata.NName':templateName},{fCN+'.sender':1});\r\n\t\t\t\tvar mailRecipientsTable=_findAll(eCN,par1,par2);\r\n\t\t\t\t//fd.findAll(ecn, {\"query\":{}}, function(err, data){..})\r\n\t\t\t\tmailRecipientsTable.done(function(data){\r\n\t\t\t\t\tFL.common.printToConsole(\">>>>> mailRecipientsTable SUCCESS <<<<< \");\r\n\t\t\t\t\trecipientsArray = _.map(data,function(element){//extracts emails only\r\n\t\t\t\t\t\tvar xObj = element.d[fCN];\r\n\t\t\t\t\t\treturn xObj.email;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tdef.resolve(recipientsArray);\r\n\t\t\t\t});\r\n\t\t\t\tmailRecipientsTable.fail(function(err){FL.common.printToConsole(\">>>>> mailRecipientsOfTemplate FAILURE <<<<<\"+err);def.reject(err);});\r\n\t\t\t\treturn def.promise();\r\n\t\t\t},\t\t\t\r\n\t\t\tupsertByKey: function(keyFieldValue,entityName,record) {\r\n\t\t\t\t//upsert record for <keyField>=<keyFieldValue> in table entityName\r\n\t\t\t\t//record is a JSON that may contain _id key ex: {\"_id\":12345,\"id\":1,\"code\":\"abc\"}\r\n\t\t\t\tFL.common.printToConsole(\"....................................>beginning upsertByKey....with appToken=\"+JSON.stringify(FL.login.appToken));\r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\tvar eCN = FL.dd.getCEntity(entityName);\r\n\t\t\t\tif(eCN === null){\r\n\t\t\t\t\tFL.common.printToConsole(\"........FL.API.upsertByKey() table=\"+entityName+ \" not in local dict !\");\r\n\t\t\t\t\treturn def.reject(\"upsertByKey table=\"+entityName+ \" does not exist in local dict !\");\r\n\t\t\t\t}else{//the table exists in local dict but may be unsynchronized\r\n\t\t\t\t\tvar oEntity = FL.dd.entities[entityName];\r\n\t\t\t\t\tif(!oEntity.sync){//table exists in local dict but is not in sync with server\t\r\n\t\t\t\t\t\tFL.common.printToConsole(\"........FL.API.upsertByKey() table=\"+entityName+ \" exists in local dict but is not in sync\");\r\n\t\t\t\t\t\treturn def.reject(\"upsertByKey table=\"+entityName+ \" not in sync\");//\r\n\t\t\t\t\t}else{//table exists and is in sync\r\n\t\t\t\t\t\tFL.common.printToConsole(\"........FL.API.upsertByKey() table=\"+entityName+ \" is ok. We will upsert!\");\r\n\t\t\t\t\t\t// var _id = record[\"_id\"];//it can be null or existing\r\n\t\t\t\t\t\tvar recordWithFCN = convertOneRecordTo_arrToSend(entityName,record);//returns {\"d\":{\"51\":\"cli1\",\"52\":\"Lx\",\"53\":\"Pt\"}} \r\n\t\t\t\t\t\tvar upsertPromise = this.upsertByKeyOnECN(keyFieldValue,eCN,recordWithFCN.d);\r\n\t\t\t\t\t\tupsertPromise.done(function(){\r\n\t\t\t\t\t\t\tFL.common.printToConsole(\">>>>> FL.API.upsertByKey() upsertPromise SUCCESS <<<<< record updated!\");\r\n\t\t\t\t\t\t\treturn def.resolve();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tupsertPromise.fail(function(err){FL.common.printToConsole(\">>>>> FL.API.upsertByKey() upsertPromise FAILURE <<<<<\"+err); return def.reject(err);});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn def.promise();\r\n\t\t\t},\r\n\t\t\tupsertByKeyOnECN: function(keyFieldValue,eCN,recordWithFCN) {//upsert for <keyField>=<keyFieldValue>for list entityName and templateName returns all emails received in Webhook\r\n\t\t\t\t//if _id exists =>direct update\r\n\t\t\t\t//upsert record with field compressed names  for <fCNkey>=<keyFieldValue> in table with compressed name eCN\r\n\t\t\t\t// assumes that: eCN exists and fCNKey exists in local dict and is in synch with server\r\n\t\t\t\t//ex FL.API.upsertByKeyOnECN('51','123','50',{\"d\":{\"51\":\"cli1\",\"52\":\"Lx\",\"53\":\"Pt\"}});\r\n\t\t\t\tFL.common.printToConsole(\"....................................>beginning upsertByKeyOnECN....with appToken=\"+JSON.stringify(FL.login.appToken));\r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\t\r\n\t\t\t\t_update(eCN,keyFieldValue,recordWithFCN)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\treturn def.resolve();\r\n\t\t\t\t}\r\n\t\t\t\t\t,function(err){\r\n\t\t\t\t\t\tFL.common.printToConsole(\">>>> upsertByKeyOnECN with _id =>unable to insert\");\r\n\t\t\t\t\t\treturn def.reject(\"upsertByKeyOnECN with _id unable to insert err=\"+err);\r\n\t\t\t\t\t});\r\n\t\t\t\treturn def.promise();\r\n\t\t\t},\r\n\t\t\tmandrillRejectListForSender: function(senderEmail) {//get reject list from mandrill only for sender=sender\r\n\t\t\t\tFL.common.printToConsole(\"....................................>beginning mandrillRejectListForSender....with appToken=\"+JSON.stringify(FL.login.appToken));\r\n\t\t\t\tvar def = $.Deferred();\t\t\r\n\t\t\t\t_mandrillRejectListForSender(senderEmail)\r\n\t\t\t\t.then(function(data){\r\n\t\t\t\t\treturn def.resolve(data);\r\n\t\t\t\t}\r\n\t\t\t\t\t,function(err){\r\n\t\t\t\t\t\tFL.common.printToConsole(\">>>> mandrillRejectListForSender FAILURE\");\r\n\t\t\t\t\t\treturn def.reject(\"mandrillRejectListForSender FAILURE err=\"+err);\r\n\t\t\t\t\t});\r\n\t\t\t\treturn def.promise();\r\n\t\t\t},\r\n\t\t\tmandrillDeleteFromReject: function(arrayOfEmails) {//get reject list from mandrill only for sender=sender\r\n\t\t\t\tFL.common.printToConsole(\"....................................>beginning mandrillDeleteFromReject....with appToken=\"+JSON.stringify(FL.login.appToken));\r\n\t\t\t\tvar def = $.Deferred();\t\t\r\n\t\t\t\t_mandrillDeleteFromReject(arrayOfEmails)\r\n\t\t\t\t.then(function(data){\r\n\t\t\t\t\treturn def.resolve(data);\r\n\t\t\t\t}\r\n\t\t\t\t\t,function(err){\r\n\t\t\t\t\t\tFL.common.printToConsole(\">>>> mandrillDeleteFromReject FAILURE\");\r\n\t\t\t\t\t\treturn def.reject(\"mandrillDeleteFromReject FAILURE err=\"+err);\r\n\t\t\t\t\t});\r\n\t\t\t\treturn def.promise();\r\n\t\t\t},\r\n\t\t\tcustomTable: function(entityProps) {\r\n\t\t\t\t// Ex FL.API.customTable({singular:\"shipment\"});\r\n\t\t\t\t//uses --> FL.dd.createEntity(\"sales rep\",\"employee responsable for sales\");\r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\tvar singularDefault = FL.dd.nextEntityBeginningBy(\"unNamed\");\r\n\t\t\t\tentityProps = _.extend( {singular:singularDefault,description:null},entityProps);\r\n\t\t\t\tif(!entityProps.description)\r\n\t\t\t\t\tentityProps.description = entityProps.singular + \"'s description\";\r\n\t\t\t\tFL.dd.createEntity(entityProps.singular,entityProps.description);\r\n\t\t\t\tvar singular = entityProps.singular;\r\n\t\t\t\tvar oEntity = FL.dd.entities[entityProps.singular];\r\n\r\n\t\t\t\t// FL.API.data[entityName]={\r\n\t\t\t\t// \tname:entityName,tfunc:function(){FL.common.printToConsole(\"--> \"+this.name);}\r\n\t\t\t\t// };\r\n\r\n\t\t\t\t// it works !\r\n\t\t\t\t// FL.API.data[singular]={\r\n\t\t\t\t// \tname :singular,\r\n\t\t\t\t// \tget:function(prop){\r\n\t\t\t\t// \t\tvar oEntity = FL.dd.entities[singular];\r\n\t\t\t\t// \t\treturn oEntity[prop];\r\n\t\t\t\t// \t},\r\n\t\t\t\t// \tset:function(prop,value){\r\n\t\t\t\t// \t\tvar oEntity = FL.dd.entities[singular];\r\n\t\t\t\t// \t\toEntity[prop] = value;\r\n\t\t\t\t// \t}\r\n\t\t\t\t// };\r\n\r\n\t\t\t\tfunction entity(entityProps){\t\t\t\r\n\t\t\t\t\tthis.name = entityProps.singular;\r\n\t\t\t\t\tthis.description = entityProps.description;\r\n\t\t\t\t\tvar oEntity = FL.dd.entities[singular];\r\n\t\t\t\t\tthis.eCN = oEntity.csingular;\r\n\t\t\t\t};\r\n\t\t\t\tentity.prototype.get = function(prop){\r\n\t\t\t\t\tvar oEntity = FL.dd.entities[singular];\r\n\t\t\t\t\treturn oEntity[prop];\r\n\t\t\t\t};\r\n\t\t\t\tentity.prototype.set = function(prop,value){\r\n\t\t\t\t\tvar oEntity = FL.dd.entities[singular];\r\n\t\t\t\t\toEntity[prop] = value;\r\n\t\t\t\t};\t\t\t\t\r\n\t\t\t\tFL.API.data[singular]= new entity(entityProps);\r\n\r\n\t\t\t\treturn def.resolve();\r\n\t\t\t\t// def.reject();//to test\r\n\t\t\t\treturn def.promise();\r\n\t\t\t\t// alert(\"FL.server.test() -->\"+x);\r\n\t\t\t},\r\n\t\t\tgetFLContextFromBrowserLocationBar: function() {//to be used at the entry point of independent applications\r\n\t\t\t\t//reads the browser adress bar to get the connection string then connects to the default application\r\n\t\t\t\tvar def = $.Deferred();\r\n\t\t\t\tif(FL.API.isConnected()){\r\n\t\t\t\t\t// alert(\"getFLContextFromBrowserLocationBar --> independent app already connected !!! how is this possible ?\");\r\n\t\t\t\t\tdef.reject(\"getFLContextFromBrowserLocationBar --> independent app already connected !!! how is this possible ?\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvar fullUrl = window.location.href;\r\n\t\t\t\t\tvar connectionString = FL.common.getTag(fullUrl,\"connectionString\",\"#\");\r\n\t\t\t\t\tif(connectionString){\r\n\t\t\t\t\t\tconnectionString = FL.common.enc(connectionString,-1);\r\n\t\t\t\t\t\tvar loginObject = JSON.parse(connectionString);//ex {\"email\":\"toto114@toto.com\",\"userName\":\"\",\"password\":\"123\"}\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar fl = new flMain();//only place where this must exist !!!!\r\n\t\t\t\t\t\tFL.fl = fl;\r\n\t\t\t\t\t\tfl.serverName(FL.common.getServerName());\r\n\r\n\t\t\t\t\t\tvar spinner=FL.common.loaderAnimationON('spinnerDiv');\r\n\t\t\t\t\t\tvar connectionPromise = FL.API.connectUserToDefaultApp(loginObject.email,loginObject.password)\r\n\t\t\t\t\t\t// .then(function(){return appSetup(loginObject);})\r\n\t\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t\tspinner.stop();\r\n\t\t\t\t\t\t\t\tFL.common.printToConsole(\">>>>> getFLContextFromBrowserLocationBar -> SUCCESS connecting to default app !<<<<< \");\r\n\t\t\t\t\t\t\t\tFL.common.printToConsole(\"after connection->\"+JSON.stringify(FL.login.token));\r\n\t\t\t\t\t\t\t\tdef.resolve();\r\n\t\t\t\t\t\t\t},function(err){\r\n\t\t\t\t\t\t\t\tspinner.stop();\r\n\t\t\t\t\t\t\t\tFL.common.printToConsole(\">>>>> getFLContextFromBrowserLocationBar FAILURE <<<<<\"+err);\r\n\t\t\t\t\t\t\t\tdef.reject(err);\r\n\t\t\t\t\t\t\t});\t\t\t\t\t\t\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\talert(\"getFrameLinkContext --> No connectionString available !!!\");\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn def.promise();\r\n\t\t\t},\r\n\t\t\tnicoTestDuplicateIds: function(arrToTest) {\r\n\t\t\t\treturn nicoTestDuplicateIds(arrToTest);\r\n\t\t\t},\t\t\t\t\r\n\t\t\tnicoTestDuplicateIds: function(arrToTest) {\r\n\t\t\t\treturn nicoTestDuplicateIds(arrToTest);\r\n\t\t\t},\t\t\t\r\n\t\t\ttestFunc: function(x) {\r\n\t\t\t\talert(\"FL.server.test() -->\"+x);\r\n\t\t\t}\r\n\t\t};\r\n\t})();\r\n// });"]}