{"version":3,"sources":["FLlogin2.js"],"names":[],"mappings":";;AAAA,MAAM,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC,UAAS,CAAC,EAAC;;;;;;;AAOjC,GAAE,CAAC,OAAO,CAAC,GAAG,CAAC,YAAU;;AACxB,MAAI,YAAY,GAAG,IAAI,CAAC;AACxB,MAAI,iBAAiB,GAAG,IAAI,CAAC;AAC7B,MAAI,kBAAkB,GAAG,CACtB,EAAC,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,UAAU,EAAC,EAC5B,EAAC,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAC,EAC1B,EAAC,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,UAAU,EAAC,EAC5B,EAAC,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAC,EACvB,EAAC,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,UAAU,EAAC,CAC5B,CAAC;AACJ,MAAI,sBAAsB,GAAG,CAC1B,EAAC,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,WAAW,EAAC,EAC7B,EAAC,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,OAAO,EAAC,EACzB,EAAC,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,SAAS,EAAC,EAC3B,EAAC,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,aAAa,EAAC,EAC/B,EAAC,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAC,EAC1B,EAAC,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAC,EAC1B,EAAC,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,OAAO,EAAC,CACzB,CAAC;AACJ,MAAI,cAAc,GAAG,CAAC,YAAU;;AAC/B,OAAI,YAAY,CAAC;AACjB,YAAS,IAAI,GAAG;AACf,QAAI,WAAW,GAAG,IAAI,CAAC;AACvB,QAAI,QAAQ,GAAI,SAAZ,QAAQ,CAAa,WAAW,EAAC,KAAK,EAAC;;AAC1C,gBAAW,GAAG,WAAW,CAAC;;;;AAI1B,SAAG,WAAW,IAAI,WAAW,EAAE;;;;;AAI9B,OAAC,CAAC,WAAW,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,IAAI,CAAC,YAAY,GAAE,8BAA8B,CAAC,CAAC;AACjH,OAAC,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,IAAI,CAAC,iBAAiB,GAAE,8BAA8B,CAAC,CAAC;;AAExH,UAAI,MAAM,GAAG,YAAY,CAAC,KAAK,CAAC;AAChC,QAAE,CAAC,MAAM,CAAC,SAAS,CAAC,EAAC,KAAK,EAAE,UAAU,EAAC,UAAU,EAAE,MAAM,EAAC,MAAM,EAAE,kBAAkB,EAAC,EAAC,UAAS,QAAQ,EAAC;;;AAGvG,mBAAY,GAAG,QAAQ,CAAC,IAAI,CAAC;AAC7B,mBAAY,CAAC,KAAK,GAAG,YAAY,CAAC;AAClC,QAAC,CAAC,KAAK,CAAE,aAAa,CAAE,CAAC,OAAO,CAAE,YAAY,CAAC,CAAC;AAChD,SAAE,CAAC,GAAG,CAAC,aAAa,EAAC,EAAC,UAAU,EAAC,YAAY,EAAC,CAAC,CAAC;AAChD,SAAE,CAAC,YAAY,GAAG,YAAY,CAAC;;AAE/B,SAAE,CAAC,MAAM,CAAC,sBAAsB,EAAE,CAAC;AACnC,iBAAU,CAAC,IAAI,CAAC,CAAC;OACjB,CAAC,CAAC;AACH,UAAI,KAAK,GAAG,YAAY,CAAC,UAAU,CAAC;AACpC,QAAE,CAAC,MAAM,CAAC,SAAS,CAAC,EAAC,KAAK,EAAC,YAAY,EAAC,UAAU,EAAE,KAAK,EAAE,MAAM,EAAC,sBAAsB,EAAC,EAAC,UAAS,QAAQ,EAAC;;;AAG3G,wBAAiB,GAAG,QAAQ,CAAC,IAAI,CAAC;AAClC,mBAAY,CAAC,UAAU,GAAG,iBAAiB,CAAC;AAC5C,SAAE,CAAC,GAAG,CAAC,kBAAkB,EAAC,EAAC,SAAS,EAAC,iBAAiB,EAAC,CAAC,CAAC;;AAEzD,SAAE,CAAC,MAAM,CAAC,sBAAsB,EAAE,CAAC;AACnC,iBAAU,CAAC,IAAI,CAAC,CAAC;OACjB,CAAC,CAAC;MACH,MAAK,IAAG,WAAW,IAAI,WAAW,EAAE;;;;AAGpC,QAAE,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC;;MAE9B,MAAK,IAAG,WAAW,IAAI,WAAW,EAAE,EAEpC;KACD,CAAC;AACF,KAAC,CAAC,KAAK,CAAE,YAAY,CAAE,CAAC,SAAS,CAAE,QAAQ,CAAE,CAAC;;AAE9C,WAAO;AACN,gBAAW,EAAE,WAAW;KACxB,CAAC;IACF;AACD,UAAO;AACN,eAAW,EAAE,uBAAU;AACtB,SAAG,CAAC,YAAY,EAAE;AACjB,kBAAY,GAAG,IAAI,EAAE,CAAC;MACtB;AACD,YAAO,YAAY,CAAC;KACpB;IACD,CAAC;GACF,CAAA,EAAG,CAAC;AACL,MAAI,eAAe,GAAG,SAAlB,eAAe,GAAc;;AAChC,OAAI,WAAW,GAAG,YAAY,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;AACrD,OAAI,cAAc,GAAG,IAAI,CAAC;AAC1B,OAAG,WAAW,EACb,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;AAC1C,OAAG,cAAc,EAAE;;;AAGlB,QAAG,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,IAAG,OAAO,IAAI,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,IAAG,UAAU;AACrF,mBAAc,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;;AAGvD,KAAC,CAAC,KAAK,CAAE,gBAAgB,CAAE,CAAC,OAAO,CAAE,cAAc,CAAE,CAAC;IACtD;AACD,IAAC,CAAC,KAAK,CAAE,iBAAiB,CAAE,CAAC,OAAO,CAAE,KAAK,CAAE,CAAC;GAC9C,CAAC;AACF,MAAI,iBAAiB,GAAG,SAApB,iBAAiB,CAAY,IAAI,EAAE;;AACtC,OAAI,QAAQ,GAAG,EAAE,CAAC,MAAM,CAAC,eAAe,EAAE,CAAC;;;;;;;;;AAS3C,OAAI,YAAY,GAAG,8GAA8G,GAC3H,iDAAiD,GAAG,EAAE,CAAC,MAAM,GAAG,KAAK,GAAC,QAAQ,GAC/E,SAAS,GACT,iIAAiI,GAChI,kCAAkC,GAClC,8DAA8D,GAC/D,MAAM,CAAC;AACZ,OAAG,IAAI,EAAE;;;;;;;;;;AAUR,gBAAY,GAAG,0FAA0F,GACpG,uBAAuB,GAAG,EAAE,CAAC,MAAM,GAAG,KAAK,GAAC,QAAQ,GACrD,SAAS;;AAET,sIAAkI,GACjI,2CAA2C,GAC3C,gDAAgD,GAAE,IAAI,GAAE,SAAS,GAClE,MAAM,CAAC;IACX;AACD,KAAE,CAAC,SAAS,CAAC,QAAQ,EAAC,YAAY,CAAE,CAAC;GACrC,CAAC;AACF,MAAI,UAAU,GAAG,SAAb,UAAU,GAAa;;AAC1B,KAAE,CAAC,MAAM,CAAC,cAAc,CAAC,uEAAuE,CAAC,CAAC;AAClG,OAAI,SAAS,GAAG,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,EAAC,QAAQ,EAAC,EAAC,MAAM,EAAC,CAAC,EAAC,OAAO,EAAC,EAAE,EAAC,KAAK,EAAC,GAAG,EAAC,CAAC,EAAC,EAAC,CAAC,CAAC;AACjF,YAAS,CAAC,WAAW,EAAE,CAAC;AACxB,KAAE,CAAC,MAAM,CAAC,oBAAoB,EAAE,CAAC;AACjC,KAAE,CAAC,SAAS,CAAC,cAAc,EAAC,EAAE,CAAC,KAAK,CAAC,mBAAmB,CAAE,CAAC;GAC3D,CAAC;AACF,MAAI,6BAA6B,GAAG,SAAhC,6BAA6B,CAAY,WAAW,EAAC;;;;AAGxD,IAAC,CAAC,KAAK,CAAE,YAAY,CAAE,CAAC,OAAO,CAAE,IAAI,CAAE,CAAC;AACxC,IAAC,CAAC,KAAK,CAAE,gBAAgB,CAAE,CAAC,OAAO,CAAE,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,CAAE,CAAC;;AAE1D,OAAI,GAAG,GAAG,EAAE,CAAC,KAAK,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;AAC/C,OAAI,aAAa,GAAG,EAAE,CAAC,KAAK,CAAC,KAAK,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC;AAC7D,OAAI,gBAAgB,GAAG,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;AACxD,OAAI,WAAW,GAAG,EAAC,cAAc,EAAC,aAAa,EAAE,QAAQ,EAAC,EAAE,EAAE,aAAa,EAAC,aAAa,EAAC,CAAC;AAC3F,OAAI,QAAQ,GAAG,gBAAgB,CAAC,WAAW,CAAC,CAAC;;AAE7C,eAAY,CAAC,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;AACjD,IAAC,CAAC,WAAW,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,IAAI,EAAE,CAAC;AAClE,KAAE,CAAC,MAAM,CAAC,oBAAoB,EAAE,CAAC;AACjC,KAAE,CAAC,SAAS,CAAC,cAAc,EAAC,QAAQ,CAAE,CAAC;AACvC,KAAE,CAAC,MAAM,GAAG,EAAE,CAAC,KAAK,CAAC,KAAK,CAAC,cAAc,CAAC;AAC1C,oBAAiB,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;GACrC,CAAC;AACF,MAAI,cAAc,GAAG,SAAjB,cAAc,GAAa;AAC9B,OAAI,KAAK,GAAG,CAAC,CAAC,mBAAmB,CAAC,CAAC,GAAG,EAAE,CAAC;AACzC,QAAK,GAAG,KAAK,CAAC,IAAI,EAAE,CAAC;AACrB,OAAI,QAAQ,GAAG,CAAC,CAAC,sBAAsB,CAAC,CAAC,GAAG,EAAE,CAAC;AAC/C,WAAQ,GAAG,QAAQ,CAAC,IAAI,EAAE,CAAC;AAC3B,UAAO,EAAC,KAAK,EAAC,KAAK,EAAC,QAAQ,EAAC,QAAQ,EAAC,CAAC;GACvC,CAAC;AACF,MAAI,QAAQ,GAAG,SAAX,QAAQ,CAAY,QAAQ,EAAC,QAAQ,EAAC,WAAW,EAAC;AACrD,IAAC,CAAC,KAAK,CAAE,gBAAgB,CAAE,CAAC,OAAO,CAAE,QAAQ,CAAC,KAAK,CAAE,CAAC;AACtD,KAAE,CAAC,MAAM,CAAC,oBAAoB,EAAE,CAAC;AACjC,KAAE,CAAC,SAAS,CAAC,cAAc,EAAC,QAAQ,CAAE,CAAC;;AAEvC,KAAE,CAAC,MAAM,GAAG,EAAE,CAAC,KAAK,CAAC,KAAK,CAAC,cAAc,CAAC;;AAE1C,eAAY,CAAC,UAAU,GAAI,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;AAC1D,eAAY,CAAC,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC;AACpC,eAAY,CAAC,UAAU,GAAG,QAAQ,CAAC,UAAU,CAAC;AAC9C,aAAU,CAAC,IAAI,CAAC,CAAC;AACjB,eAAY,CAAC,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;AACjD,IAAC,CAAC,KAAK,CAAE,YAAY,CAAE,CAAC,OAAO,CAAE,IAAI,CAAE,CAAC;AACxC,kBAAe,EAAE,CAAC;AAClB,oBAAiB,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;GACrC,CAAC;AACF,MAAI,YAAY,GAAG,SAAf,YAAY,CAAY,WAAW,EAAC;AACvC,OAAI,GAAG,GAAG,CAAC,CAAC,QAAQ,EAAE,CAAC;;AAEvB,OAAI,iBAAiB,GAAG;AACvB,UAAM,EAAC,EAAC,KAAK,EAAC,WAAW,CAAC,KAAK,EAAC,QAAQ,EAAC,WAAW,CAAC,QAAQ,EAAC;AAC9D,UAAM,EAAC,EAAE;AAAA,IACT,CAAC;;AAEF,OAAI,WAAW,GAAG,QAAQ,CAAC;AAC3B,OAAG,EAAE,CAAC,EAAE,CAAC,MAAM,EAAE,EAChB,WAAW,GAAG,QAAQ,CAAC;AACxB,KAAE,CAAC,MAAM,CAAC,gBAAgB,CAAC,GAAG,EAAC,uBAAuB,EAAC,eAAe,EAAC,iBAAiB,EAAC,EAAC,IAAI,EAAC,SAAS,EAAE,IAAI,EAAC,MAAM,EAAC,OAAO,EAAC,WAAW,EAAC,OAAO,EAAC,SAAS,EAAC,EAAC,UAAS,MAAM,EAAC;AAC5K,QAAG,MAAM,EAAC;;AACT,SAAI,KAAK,GAAG,CAAC,CAAC,cAAc,CAAC,CAAC,GAAG,EAAE,CAAC;AACpC,SAAI,QAAQ,GAAG,CAAC,CAAC,iBAAiB,CAAC,CAAC,GAAG,EAAE,CAAC;AAC1C,SAAI,OAAO,GAAC,EAAE,CAAC,MAAM,CAAC,iBAAiB,CAAC,YAAY,CAAC,CAAC;AACtD,SAAI,YAAY,GAAG,EAAE,CAAC,GAAG,CAAC,cAAc,CAAC,EAAC,KAAK,EAAC,KAAK,EAAC,QAAQ,EAAC,QAAQ,EAAC,MAAM,EAAC,IAAI,EAAC,CAAC,CAAC;AACtF,iBAAY,CAAC,IAAI,CAAC,UAAS,QAAQ,EAAC,QAAQ,EAAC;AAC5C,cAAQ,CAAC,QAAQ,EAAC,QAAQ,EAAC,EAAC,KAAK,EAAC,KAAK,EAAC,QAAQ,EAAC,QAAQ,EAAC,MAAM,EAAC,IAAI,EAAC,CAAC,CAAC;AACxE,OAAC,CAAC,WAAW,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,IAAI,EAAE,CAAC;AAClE,UAAI,YAAY,GAAG,IAAI,CAAC;AACxB,aAAO,CAAC,IAAI,EAAE,CAAC;AACf,aAAO,GAAG,CAAC,OAAO,CAAC,YAAY,EAAC,WAAW,CAAC,CAAC;MAC7C,CAAC,CAAC;AACH,iBAAY,CAAC,IAAI,CAAC,UAAS,GAAG,EAAC;AAC9B,aAAO,CAAC,IAAI,EAAE,CAAC;AACf,UAAG,GAAG,CAAC,IAAI,IAAI,CAAC,IAAI,GAAG,CAAC,IAAI,IAAI,CAAC,EAAC;;AACjC,SAAE,CAAC,MAAM,CAAC,aAAa,CACtB,mGAAmG,GACnG,8FAA4F,GAC5F,8CAA4C,EAAE,YAAU;AACxD,UAAE,CAAC,MAAM,CAAC,cAAc,CAAC,sEAAoE,GAAC,WAAW,CAAC,KAAK,CAAC,CAAC;AACjH,eAAO,GAAG,CAAC,OAAO,CAAC,KAAK,EAAC,WAAW,CAAC,CAAC;QACtC,CAAC,CAAC;OACH,MAAI;AACJ,YAAK,CAAC,8DAA8D,GAAC,GAAG,CAAC,IAAI,GAAC,KAAK,GAAC,GAAG,CAAC,OAAO,CAAC,CAAC;AACjG,cAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;OACpB;MACJ,CAAC,CAAC;KACH,MAAI;;AACJ,SAAI,WAAW,IAAI,QAAQ,EAAE;AAC5B,aAAO,GAAG,CAAC,OAAO,CAAC,IAAI,EAAC,WAAW,CAAC,CAAC;MACrC,MAAI;AACJ,UAAI,iBAAiB,GAAG,EAAE,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC;AAC5C,uBAAiB,CAAC,IAAI,CAAC,YAAU;AAChC,iBAAU,EAAE,CAAC;AACb,SAAE,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;AACnB,cAAO,GAAG,CAAC,OAAO,CAAC,IAAI,EAAC,WAAW,CAAC,CAAC;OACrC,EAAC,UAAS,GAAG,EAAC;AAAC,cAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;OAAC,CAAC,CAAC;MAC1C;KACD;IACD,CAAC,CAAC;AACH,UAAO,GAAG,CAAC,OAAO,EAAE,CAAC;GACrB,CAAC;AACF,MAAI,iBAAiB,GAAG,SAApB,iBAAiB,CAAY,WAAW,EAAC;AAC5C,OAAI,GAAG,GAAG,CAAC,CAAC,QAAQ,EAAE,CAAC;AACvB,OAAI,iBAAiB,GAAG;AACvB,UAAM,EAAC,EAAC,KAAK,EAAC,WAAW,CAAC,KAAK,EAAC,QAAQ,EAAC,WAAW,CAAC,QAAQ,EAAC;AAC9D,UAAM,EAAC,EAAE;IACT,CAAC;AACF,KAAE,CAAC,MAAM,CAAC,gBAAgB,CAAC,GAAG,EAAC,6BAA6B,EAAC,oBAAoB,EAAC,iBAAiB,EAAC,EAAC,IAAI,EAAC,SAAS,EAAE,IAAI,EAAC,WAAW,EAAC,OAAO,EAAC,QAAQ,EAAC,OAAO,EAAC,WAAW,EAAC,EAAC,UAAS,MAAM,EAAC;AAC3L,QAAG,MAAM,EAAC;;AACT,SAAI,WAAW,GAAI,cAAc,EAAE,CAAC;AACpC,SAAG,WAAW,CAAC,KAAK,CAAC,MAAM,GAAC,CAAC,IAAI,WAAW,CAAC,QAAQ,CAAC,MAAM,KAAK,CAAC,EAAC;AAClE,QAAE,CAAC,MAAM,CAAC,aAAa,CAAC,4CAA4C,EAAC,YAAU;AAC9E,SAAE,CAAC,MAAM,CAAC,cAAc,CAAC,iDAAiD,GAAC,WAAW,CAAC,KAAK,GAAC,MAAM,CAAC,CAAC;AACrG,UAAG,CAAC,OAAO,CAAC,KAAK,EAAC,WAAW,CAAC,CAAC;OAC/B,CAAC,CAAC;MACH,MAAK,IAAG,WAAW,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,IAAI,WAAW,CAAC,QAAQ,CAAC,MAAM,KAAK,CAAC,EAAC;AAC5E,QAAE,CAAC,MAAM,CAAC,cAAc,CAAC,uCAAuC,CAAC,CAAC;;;;;AAKlE,SAAG,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;MAClB,MAAK,IAAG,WAAW,CAAC,KAAK,CAAC,MAAM,GAAE,CAAC,IAAK,WAAW,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAC;;AACxE,QAAE,CAAC,MAAM,CAAC,cAAc,CAAC,wCAAwC,GAAC,WAAW,CAAC,KAAK,GAAC,GAAG,GAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;AAC9G,UAAI,cAAc,GAAC,aAAa,CAAE,WAAW,CAAE,CAAC;AAChD,oBAAc,CAAC,IAAI,CAAC,UAAS,cAAc,EAAC;AAC3C,WAAG,cAAc,EAAC;AACjB,UAAE,CAAC,MAAM,CAAC,cAAc,CAAC,+CAA+C,GAAG,WAAW,CAAC,KAAK,GAAE,wBAAwB,CAAC,CAAC;AACxH,qCAA6B,CAAC,WAAW,CAAC,CAAC;AAC3C,WAAG,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QAClB,MAAI;AACJ,UAAE,CAAC,MAAM,CAAC,cAAc,CAAC,2CAA2C,GAAG,WAAW,CAAC,KAAK,GAAG,oBAAoB,CAAC,CAAC;AACjH,WAAG,CAAC,OAAO,CAAC,KAAK,EAAC,WAAW,CAAC,CAAC;QAC/B;OACD,CAAC,CAAC;AACH,oBAAc,CAAC,IAAI,CAAC,UAAS,GAAG,EAAC;AAAC,YAAK,CAAC,mDAAmD,GAAG,WAAW,CAAC,KAAK,GAAG,OAAO,CAAC,CAAC;OAAC,CAAC,CAAC;MAC9H;KACD,MAAI;;AACJ,OAAE,CAAC,MAAM,CAAC,cAAc,CAAC,4BAA4B,CAAC,CAAC;AACvD,YAAO,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;KACzB;IACD,CAAC,CAAC;AACH,UAAO,GAAG,CAAC,OAAO,EAAE,CAAC;GACrB,CAAC;AACF,MAAI,aAAa,GAAG,SAAhB,aAAa,CAAY,WAAW,EAAC;;;AAExC,OAAI,GAAG,GAAG,CAAC,CAAC,QAAQ,EAAE,CAAC;AACvB,OAAI,YAAY,GAAG,IAAI,CAAC;;AAExB,KAAE,CAAC,MAAM,CAAC,cAAc,CAAC,0GAA0G,CAAC,CAAC;AACrI,OAAI,OAAO,GAAC,EAAE,CAAC,MAAM,CAAC,iBAAiB,CAAC,YAAY,CAAC,CAAC;AACtD,OAAI,mBAAmB,GAAC,EAAE,CAAC,GAAG,CAAC,WAAW,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;AAC9D,sBAAmB,CAAC,IAAI,CAAC,UAAS,KAAK,EAAC;AACvC,MAAE,CAAC,MAAM,CAAC,cAAc,CAAC,iGAAiG,CAAC,CAAC;AAC5H,QAAG,CAAC,KAAK,EAAC;;AACT,OAAE,CAAC,MAAM,CAAC,cAAc,CAAC,wGAAwG,CAAC,CAAC;AACnI,SAAI,QAAQ,GAAG,EAAE,CAAC,MAAM,CAAC,gBAAgB,CAAC,WAAW,CAAC,KAAK,EAAC,GAAG,CAAC,CAAC;AACjE,sBAAiB,GAAG,EAAE,CAAC,GAAG,CAAC,uBAAuB,CAAC,WAAW,CAAC,KAAK,EAAC,WAAW,CAAC,QAAQ,EAAE,eAAe,GAAG,QAAQ,CAAC,CACpH,IAAI,CAAC,YAAU;AACf,aAAO,CAAC,IAAI,EAAE,CAAC;AACf,QAAE,CAAC,MAAM,CAAC,cAAc,CAAC,oFAAoF,CAAC,CAAC;AAC/G,aAAO,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;MACxB,EAAC,UAAS,GAAG,EAAC;AAAC,QAAE,CAAC,MAAM,CAAC,cAAc,CAAC,6BAA6B,CAAC,CAAC,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;MAAC,CAAC,CAAC;KACpG,MAAI;;AACJ,YAAO,CAAC,IAAI,EAAE,CAAC;AACf,OAAE,CAAC,MAAM,CAAC,aAAa,CAAC,yBAAyB,GAAG,WAAW,CAAC,KAAK,GAAG,mCAAmC,GAAG,WAAW,CAAC,KAAK,GAAG,0FAAwF,EAAC,YAAU;AACpO,QAAE,CAAC,MAAM,CAAC,cAAc,CAAC,iGAA+F,GAAC,WAAW,CAAC,KAAK,CAAC,CAAC;AAC5I,aAAO,GAAG,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;MAC1B,CAAC,CAAC;KACH;IACD,CAAC,CAAC;AACH,sBAAmB,CAAC,IAAI,CAAC,UAAS,GAAG,EAAC;AACrC,WAAO,CAAC,IAAI,EAAE,CAAC;AACf,SAAK,CAAC,iDAAiD,GAAG,WAAW,CAAC,KAAK,GAAG,mBAAmB,GAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;AACvH,WAAO,GAAG,CAAC,MAAM,CAAC,+BAA+B,GAAG,WAAW,CAAC,KAAK,GAAG,UAAU,CAAC,CAAC;IACpF,CAAC,CAAC;AACH,UAAO,GAAG,CAAC,OAAO,EAAE,CAAC;GACrB,CAAC;AACF,MAAI,2BAA2B,GAAG,SAA9B,2BAA2B,GAAc;;AAC5C,OAAI,iBAAiB,GAAG,YAAY,CAAC,OAAO,CAAC,kBAAkB,CAAC,CAAC;AACjE,OAAI,oBAAoB,GAAG,IAAI,CAAC;AAChC,OAAG,iBAAiB,EAAE;AACrB,wBAAoB,GAAG,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAAC;AACrD,MAAE,CAAC,UAAU,GAAG,oBAAoB,CAAC,UAAU,CAAC;AAChD,MAAE,CAAC,aAAa,GAAG,KAAK,CAAC;;IAEzB,MAAI;AACJ,MAAE,CAAC,UAAU,GAAG,KAAK,CAAC;AACtB,MAAE,CAAC,aAAa,GAAG,IAAI,CAAC;;IAExB;GACD,CAAC;AACF,MAAI,UAAU,GAAG,SAAb,UAAU,CAAY,QAAQ,EAAE;;;;AAGnC,OAAI,YAAY,GAAG,YAAY,CAAC,KAAK,CAAC;AACtC,OAAI,iBAAiB,GAAG,YAAY,CAAC,UAAU,CAAC;;;;AAIhD,OAAI,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC;AACrC,OAAI,iBAAiB,GAAG,IAAI,CAAC,iBAAiB,CAAC;AAC/C,OAAI,QAAQ,EAAE;;AACb,QAAG,YAAY,EACd,YAAY,GAAG,YAAY,CAAC;AAC7B,QAAG,iBAAiB,EACnB,iBAAiB,GAAG,iBAAiB,CAAC;IACvC;AACD,KAAE,CAAC,MAAM,CAAC,eAAe,CAAC,YAAY,EAAC,iBAAiB,CAAC,CAAC;AAC1D,eAAY,CAAC,KAAK,GAAG,YAAY,CAAC;AAClC,eAAY,CAAC,UAAU,GAAG,iBAAiB,CAAC;AAC5C,KAAE,CAAC,YAAY,GAAG,YAAY,CAAC;AAC/B,KAAE,CAAC,iBAAiB,GAAG,iBAAiB,CAAC;AACzC,IAAC,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,YAAY,CAAC,CAAC;AACjC,IAAC,CAAC,KAAK,CAAE,aAAa,CAAE,CAAC,OAAO,CAAE,EAAE,CAAC,YAAY,CAAE,CAAC;AACpD,IAAC,CAAC,KAAK,CAAE,YAAY,CAAE,CAAC,OAAO,CAAE,EAAE,CAAC,iBAAiB,CAAE,CAAC;GACxD,CAAC;AACF,SAAM;AACL,OAAI,EAAC,QAAQ;AACb,QAAK,EAAE,EAAC,EAAE,EAAC,IAAI,EAAC;AAChB,WAAQ,EAAE,EAAE;AACZ,eAAY,EAAE,UAAU;AACxB,oBAAiB,EAAE,WAAW;AAC9B,sBAAmB,EAAE,IAAI;AACzB,cAAW,EAAE;;;;;;;AAOZ,UAAM,EAAG,CACR;AACC,YAAO,EAAG,UAAU;AACpB,UAAK,EAAC,GAAG;AACT,WAAM,EAAC,CACN;AACC,aAAO,EAAG,qBAAqB;AAC/B,WAAK,EAAC,0CAA0C;MAChD,EACD;AACC,aAAO,EAAG,aAAa;AACvB,WAAK,EAAC,GAAG;AACT,YAAM,EAAC,CACN;AACC,cAAO,EAAG,kBAAkB;AAC5B,YAAK,EAAC,0CAA0C;OAChD,EACD;AACC,cAAO,EAAG,sBAAsB;AAChC,YAAK,EAAC,mCAAmC;OACzC,EACD;AACC,cAAO,EAAG,WAAW;AACrB,YAAK,EAAC,0CAAwC;OAC9C,CACD;MACD,EACD;AACC,aAAO,EAAG,6BAA6B;AACvC,WAAK,EAAC,GAAG;AACT,YAAM,EAAC,CACN;AACC,cAAO,EAAG,sBAAsB;AAChC,YAAK,EAAC,wCAAwC;OAC9C,EACD;AACC,cAAO,EAAG,uBAAuB;AACjC,YAAK,EAAC,sDAAsD;OAC5D,EACD;AACC,cAAO,EAAG,gCAAgC;AAC1C,YAAK,EAAC,4EAA0E;OAChF,EACD;AACC,cAAO,EAAG,oCAAoC;AAC9C,YAAK,EAAC,iFAA+E;OACrF,EACD;AACC,cAAO,EAAG,kBAAkB;AAC5B,YAAK,EAAC,yCAAyC;OAC/C,CACD;MACD,EACD;AACC,aAAO,EAAG,OAAO;AACjB,WAAK,EAAC,GAAG;AACT,YAAM,EAAC,CACN;AACC,cAAO,EAAG,aAAa;AACvB,YAAK,EAAC,iCAAiC;OACvC,EACD;AACC,cAAO,EAAG,wBAAwB;AAClC,YAAK,EAAC,4CAA4C;OAClD,CACD;MACD,CACD;KACD,CACD;IACD;;AAED,cAAW,EAAE,2BAAyB,GAClC,kBAAkB,GAClB,sFAAsF,GACtF,uDAAuD,GACxD,QAAQ;AACX,sBAAmB,EAAE,2BAAyB,GACxC,6BAA6B,GAC7B,kFAAkF,GAClF,gEAAgE,GAChE,KAAK;;AAEJ,kIAAyH,GAC1H,MAAM,GACP,QAAQ;;AAEb,KAAE,EAAE,IAAI;AACR,KAAE,EAAE,IAAI;AACR,uBAAoB,EAAC,IAAI;AACzB,oBAAiB,EAAC,IAAI;AACtB,mBAAgB,EAAC,EAAE;AACnB,eAAY,EAAC,IAAI;AACjB,UAAO,EAAE,mBAAU;;;;AAGlB,KAAC,CAAC,WAAW,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,IAAI,EAAE,CAAC;AAClE,gBAAY,CAAC,KAAK,GAAG,EAAE,CAAC;;AAExB,MAAE,CAAC,MAAM,GAAG,EAAE,CAAC,KAAK,CAAC,KAAK,CAAC,cAAc,CAAC;;;AAG1C,KAAC,CAAC,KAAK,CAAE,YAAY,CAAE,CAAC,OAAO,CAAE,KAAK,CAAE,CAAC;;AAEzC,KAAC,CAAC,KAAK,CAAE,iBAAiB,CAAE,CAAC,OAAO,CAAE,KAAK,CAAE,CAAC;;;AAG9C,cAAU,CAAC,IAAI,CAAC,CAAC;AACjB,qBAAiB,EAAE,CAAC;AACpB,MAAE,CAAC,GAAG,CAAC,UAAU,EAAC,EAAE,CAAC,CAAC;IACtB;AACD,cAAW,EAAC,uBAAW;;;;AAItB,QAAI,GAAG,GAAG,CAAC,CAAC,QAAQ,EAAE,CAAC;;AAEvB,kBAAc,CAAC,WAAW,EAAE,CAAC;AAC7B,QAAI,QAAQ,GAAG,KAAK,CAAC;AACrB,QAAI,SAAS,GAAG,IAAI,CAAC;AACrB,QAAI,YAAY,GAAG,IAAI,CAAC;AACxB,QAAI,IAAI,GAAG,IAAI,CAAC;AAChB,QAAI,OAAO,OAAO,AAAC,KAAK,SAAS,EAAE;;AAClC,SAAI,YAAY,GAAG,YAAY,CAAC,KAAK,CAAC;AACtC,SAAI,OAAO,YAAY,KAAK,WAAW,IAAI,YAAY,KAAK,EAAE,EAAC;AAC9D,kBAAY,GAAG,IAAI,CAAC;AACpB,QAAE,CAAC,GAAG,CAAC,gBAAgB,EAAE,CAAC;MAC1B;AACD,SAAG,YAAY,KAAK,IAAI,EAAE;;AACzB,UAAI,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;AAC5C,UAAI,OAAO,GAAC,EAAE,CAAC,MAAM,CAAC,iBAAiB,CAAC,YAAY,CAAC,CAAC;AACtD,UAAI,qBAAqB,GAAG,EAAE,CAAC,GAAG,CAAC,cAAc,CAAC,YAAY,CAAC;OAC7D,IAAI,CAAC,UAAS,QAAQ,EAAC,QAAQ,EAAC;AAChC,cAAO,CAAC,IAAI,EAAE,CAAC;AACf,eAAQ,CAAC,QAAQ,EAAC,QAAQ,EAAC,YAAY,CAAC,CAAC;AACzC,QAAC,CAAC,WAAW,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,IAAI,EAAE,CAAC;AAClE,QAAC,CAAC,KAAK,CAAE,YAAY,CAAE,CAAC,OAAO,CAAE,IAAI,CAAE,CAAC;AACxC,cAAO,GAAG,CAAC,OAAO,EAAE,CAAC;OACrB,EAAC,UAAS,GAAG,EAAC;AACd,WAAG,GAAG,CAAC,IAAI,IAAI,CAAC,EAAC;;AAChB,eAAO,CAAC,IAAI,EAAE,CAAC;AACf,UAAE,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;AACnB,kBAAU,EAAE,CAAC;AACb,eAAO,GAAG,CAAC,OAAO,EAAE,CAAC;QACrB;AACD,YAAK,CAAC,+BAA+B,GAAC,GAAG,CAAC,IAAI,GAAC,KAAK,GAAC,GAAG,CAAC,OAAO,CAAC,CAAC;AAClE,cAAO,GAAG,CAAC,MAAM,CAAC,yBAAyB,GAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;OACjE,CAAC,CAAC;MACJ,MAAI;;AACJ,gBAAU,EAAE,CAAC;AACb,QAAE,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;AACnB,aAAO,GAAG,CAAC,OAAO,EAAE,CAAC;MACrB;KACD,MAAI;AACJ,OAAE,CAAC,MAAM,CAAC,aAAa,CAAC,0EAA0E,EAAC,YAAU;AAC5G,aAAO,GAAG,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;MACzC,CAAC,CAAC;KACH;AACD,WAAO,GAAG,CAAC,OAAO,EAAE,CAAC;IACrB;AACD,SAAM,EAAE,kBAAW;;;;;AAIlB,MAAE,CAAC,MAAM,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC;AACzC,KAAC,CAAC,KAAK,CAAE,gBAAgB,CAAE,CAAC,OAAO,CAAE,IAAI,CAAE,CAAC;AAC5C,QAAG,EAAE,CAAC,gBAAgB,EAAC;AACtB,OAAE,CAAC,MAAM,CAAC,aAAa,CAAC,gFAAgF,CAAC,CAAC;KAC1G,MAAI;AACJ,SAAI,OAAO,OAAO,AAAC,KAAK,SAAS,EAAE;;AAClC,UAAI,WAAW,GAAI,EAAC,KAAK,EAAC,EAAE,EAAC,QAAQ,EAAC,EAAE,EAAC,QAAQ,EAAC,EAAE,EAAC,CAAC;AACtD,UAAI,YAAY,GAAG,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;AACjD,UAAI,YAAY,IAAI,WAAW,EAC9B,YAAY,GAAG,SAAS,CAAC;AAC1B,UAAG,YAAY,EAAE;AAChB,kBAAW,GAAC,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;OACrC;AACD,UAAI,cAAc,GAAG,YAAY,CAAC,WAAW,CAAC,CAAC;AAC/C,oBAAc,CAAC,IAAI,CAAC,UAAS,OAAO,EAAC,WAAW,EAAC;AAChD,SAAE,CAAC,MAAM,CAAC,cAAc,CAAC,iCAAiC,GAAC,OAAO,GAAC,SAAS,GAAC,WAAW,CAAC,KAAK,CAAC,CAAC;AAChG,WAAG,CAAC,OAAO,EAAC;AACX,YAAG,WAAW,CAAC,KAAK,CAAC,MAAM,GAAC,CAAC,EAAC;AAC7B,qBAAY,CAAC,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;SACjD;AACD,UAAE,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC;QAClB;OACD,CAAC,CAAC;AACH,oBAAc,CAAC,IAAI,CAAC,UAAS,GAAG,EAAC;AAChC,YAAK,CAAC,yBAAyB,GAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;OACrD,CAAC,CAAC;MAEH,MAAI;;AAEJ,QAAE,CAAC,MAAM,CAAC,aAAa,CAAC,0EAA0E,CAAC,CAAC;MACpG;KACD;IACD;AACD,aAAU,EAAE,oBAAS,WAAW,EAAC;AAChC,QAAG,CAAC,WAAW;AACd,gBAAW,GAAI,EAAC,KAAK,EAAC,EAAE,EAAC,QAAQ,EAAC,EAAE,EAAC,CAAC;AACvC,QAAI,iBAAiB,GAAG,iBAAiB,CAAC,WAAW,CAAC,CAAC;AACvD,qBAAiB,CAAC,IAAI,CAAC,UAAS,UAAU,EAAC,WAAW,EAAC;AACtD,OAAE,CAAC,MAAM,CAAC,cAAc,CAAC,wCAAwC,GAAG,UAAU,CAAC,CAAC;AAChF,SAAG,CAAC,UAAU,EAAC;AACd,QAAE,CAAC,KAAK,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC;MACjC;KACD,CAAC,CAAC;AACH,qBAAiB,CAAC,IAAI,CAAC,UAAS,GAAG,EAAC;AACnC,UAAK,CAAC,yBAAyB,GAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;KACrD,CAAC,CAAC;IACH;AACD,OAAI,EAAC,gBAAU;;AAEd,QAAI,cAAc,GAAC,EAAE,CAAC,GAAG,CAAC,yBAAyB,EAAE,CAAC;AACtD,kBAAc,CAAC,IAAI,CAAC,UAAS,QAAQ,EAAC,QAAQ,EAAC;AAC9C,OAAE,CAAC,MAAM,CAAC,cAAc,CAAC,8BAA8B,GAAG,QAAQ,CAAC,CAAC;;AAEpE,OAAE,CAAC,MAAM,CAAC,oBAAoB,EAAE,CAAC;AACjC,OAAE,CAAC,SAAS,CAAC,cAAc,EAAC,QAAQ,CAAE,CAAC;KACvC,CAAC,CAAC;AACH,kBAAc,CAAC,IAAI,CAAC,UAAS,GAAG,EAAC;AAChC,UAAK,CAAC,mHAAmH,GAAC,GAAG,CAAC,CAAC;KAC/H,CAAC,CAAC;IACH;AACD,mBAAgB,EAAE,4BAAU;;AAClB,MAAE,CAAC,MAAM,CAAC,gBAAgB,CAAC,2FAA2F,EAAC,QAAQ,EAAC,IAAI,EAAC,UAAS,MAAM,EAAC;AACjJ,SAAG,MAAM,EAAC;AACrB,kBAAY,CAAC,KAAK,EAAE,CAAC;AACrB,OAAC,CAAC,KAAK,CAAE,YAAY,CAAE,CAAC,OAAO,CAAE,KAAK,CAAE,CAAC;;AAEzB,QAAE,CAAC,MAAM,CAAC,aAAa,CAAC,iEAAiE,CAAC,CAAC;AAC3F,QAAE,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;MAC/B;KACJ,CAAC,CAAC;IACZ;AACD,cAAW,EAAE,uBAAW;AACvB,SAAK,CAAC,eAAe,CAAC,CAAC;IACvB;GACD,CAAC;EACF,CAAA,EAAG,CAAC;AACL,GAAE,CAAC,eAAe,CAAC,GAAG,KAAK,CAAC;;CAE5B,CAAC,CAAC","file":"FLlogin2-compiled.js","sourcesContent":["jQuery(document).ready(function($){\r\n\t/**\r\n\t* function to load a given css file \r\n\t\thttp://naveensnayak.wordpress.com/2013/06/26/dynamically-loading-css-and-js-files-using-jquery/\r\n\t\thttp://stackoverflow.com/questions/950087/how-to-include-a-javascript-file-in-another-javascript-file\r\n\t*/\r\n\t// var FL = FL || {};\r\n\tFL[\"login\"] = (function(){//name space FL.login\r\n\t\tvar currentStyle = null; //currentStyle is set at launch by resetStyle(true) inside FL.login.checkSignIn(true);\r\n\t\tvar currentFontFamily = null;\r\n\t\tvar stylesForSelection = [\r\n\t\t\t\t\t{value: 0, text: 'cerulean'},\r\n\t\t\t\t\t{value: 1, text: 'cosmos'},\r\n\t\t\t\t\t{value: 2, text: 'readable'},\r\n\t\t\t\t\t{value: 3, text: 'red'},\r\n\t\t\t\t\t{value: 4, text: 'spacelab'}\r\n\t\t\t\t];\r\n\t\tvar fontFamilyForSelection = [\r\n\t\t\t\t\t{value: 0, text: 'helvetica'},\r\n\t\t\t\t\t{value: 1, text: 'menlo'},\r\n\t\t\t\t\t{value: 2, text: 'georgia'},\r\n\t\t\t\t\t{value: 3, text: 'bookantiqua'},\r\n\t\t\t\t\t{value: 4, text: 'lucida'},\r\n\t\t\t\t\t{value: 5, text: 'tahoma'},\r\n\t\t\t\t\t{value: 6, text: 'elite'}\r\n\t\t\t\t];\r\n\t\tvar messageEnabler = (function(){ //a singleton (to be instantiated by checkSignIn) to receive and dispatch topic messages.http://addyosmani.com/resources/essentialjsdesignpatterns/book/#singletonpatternjavascript\r\n\t\t\tvar instantiated;\r\n\t\t\tfunction init() {\r\n\t\t\t\tvar lastMessage = null;\r\n\t\t\t\tvar receiver =  function(triggerName,enter){//enter true means ENTERING the slide panel trigger, false means EXITING\r\n\t\t\t\t\tlastMessage = triggerName;//triggerName is the id of the slide panel \"#trigger1\" or \"#trigger2\" or \"#trigger3\"\r\n\t\t\t\t\t// alert(\"messageEnabler.receiver received message=\"+lastMessage+\" enter=\"+enter+\" style=\"+currentStyle+\" font=\"+currentFontFamily);\r\n\t\t\t\t\t// alert(\"FLLoadCss2.js messageEnabler.receiver triggerName=\"+triggerName+\" enter=\"+enter);\r\n\r\n\t\t\t\t\tif(triggerName == \"#trigger1\") {//user entered or exited slide panel fl_settings.html\r\n\t\t\t\t\t\t// alert(\"messageEnabler.receiver received message from trigger1=\"+lastMessage+\" currentStyle=\"+currentStyle+\" font=\"+currentFontFamily);\r\n\t\t\t\t\t\t// $(\"#styleSet\").parents('.btn-group').find('.dropdown-toggle').html(currentStyle +' <span class=\"caret\"></span>');//shows current value\r\n\t\t\t\t\t\t//the values that appear before any selection....\r\n\t\t\t\t\t\t$(\"#styleSet\").parents('.btn-group').find('.dropdown-toggle').html(currentStyle +' <span class=\"caret\"></span>');//shows current value\r\n\t\t\t\t\t\t$(\"#fontFamily\").parents('.btn-group').find('.dropdown-toggle').html(currentFontFamily +' <span class=\"caret\"></span>');//shows current value\r\n\r\n\t\t\t\t\t\tvar xStyle = localStorage.style;\r\n\t\t\t\t\t\tFL.common.selectBox({boxId: \"styleSet\",boxCurrent: xStyle,boxArr: stylesForSelection},function(selected){\r\n\t\t\t\t\t\t\t//select is the full object corresponding to the choosed option\r\n\t\t\t\t\t\t\t// alert(\"styleSet \"+ JSON.stringify(selected)+\" was selected !\");\r\n\t\t\t\t\t\t\tcurrentStyle = selected.text;\r\n\t\t\t\t\t\t\tlocalStorage.style = currentStyle;\r\n\t\t\t\t\t\t\t$.Topic( 'styleChange' ).publish( currentStyle);//broadcast that will be received by FL.tour\r\n\t\t\t\t\t\t\tFL.mix(\"ChangeStyle\",{\"newStyle\":currentStyle});\r\n\t\t\t\t\t\t\tFL.currentStyle = currentStyle;//compatibility with touring - before code review\r\n\t\t\t\t\t\t\t// alert(\"FL.loadCss2  receiver... STYLE CHANGE will call FL.server.syncLocalStoreToServer()\");\r\n\t\t\t\t\t\t\tFL.server.syncLocalStoreToServer();\r\n\t\t\t\t\t\t\tresetStyle(true);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tvar xFont = localStorage.fontFamily;\r\n\t\t\t\t\t\tFL.common.selectBox({boxId:\"fontFamily\",boxCurrent: xFont, boxArr:fontFamilyForSelection},function(selected){\r\n\t\t\t\t\t\t\t//following code is what is done on selection\r\n\t\t\t\t\t\t\t// alert(\"font \"+ JSON.stringify(selected)+\" was selected !\");\r\n\t\t\t\t\t\t\tcurrentFontFamily = selected.text;\r\n\t\t\t\t\t\t\tlocalStorage.fontFamily = currentFontFamily;\r\n\t\t\t\t\t\t\tFL.mix(\"ChangeFontFamily\",{\"newFont\":currentFontFamily});\r\n\t\t\t\t\t\t\t// alert(\"FL.loadCss2  receiver... STYLE CHANGE will call FL.server.syncLocalStoreToServer()\");\r\n\t\t\t\t\t\t\tFL.server.syncLocalStoreToServer();\r\n\t\t\t\t\t\t\tresetStyle(true);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}else if(triggerName == \"#trigger2\") {//user entered or exited slide panel fl_builder.html\r\n\t\t\t\t\t\t// alert(\"FLLoadCss.js init.receiver() -->Entered trigger2\");\r\n\t\t\t\t\t\t// FL.login.managePanel3();\r\n\t\t\t\t\t\tFL.slidePanels.managePanel2();\r\n\t\t\t\t\t\t// window.zz=\"firstTime.csv\";\r\n\t\t\t\t\t}else if(triggerName == \"#trigger3\") {//user entered or exited slide panel fl_service.html\r\n\t\t\t\t\t\t// alert(\"FLLoadCss.js init.receiver() -->Entered trigger3\");\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\t$.Topic( 'slidePanel' ).subscribe( receiver );\r\n\r\n\t\t\t\treturn {//the singleton\r\n\t\t\t\t\tlastMessage: lastMessage\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\tgetInstance: function(){\r\n\t\t\t\t\tif(!instantiated) {\r\n\t\t\t\t\t\tinstantiated = init();\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn instantiated;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t})();\r\n\t\tvar recoverLastMenu = function() {//recover locally saved menu and informs FL.menu about the new menu if any\r\n\t\t\tvar lastMenuStr = localStorage.getItem(\"storedMenu\");\r\n\t\t\tvar lastMenuObject = null;\r\n\t\t\tif(lastMenuStr)\r\n\t\t\t\tlastMenuObject = JSON.parse(lastMenuStr);\r\n\t\t\tif(lastMenuObject) {\r\n\t\t\t\t// alert(\"FL.signIn()  -> Read menu with:\\n\"+JSON.stringify(lastMenuObject.menu));\r\n\r\n\t\t\t\tif(lastMenuObject.menu[0].title ==\"Users\" || lastMenuObject.menu[0].title ==\"Settings\" ) //temporarly to correct those that have the old users menu\r\n\t\t\t\t\tlastMenuObject.menu[0] = FL.login.defaultMenu.menu[0];\r\n\t\t\t\t\r\n\r\n\t\t\t\t$.Topic( 'jsonMenuUpdate' ).publish( lastMenuObject );//broadcast that will be received by FL.menu to update jsonMenu\r\n\t\t\t}\r\n\t\t\t$.Topic( 'sidePanelOpened' ).publish( false ); //informs FL.menu that sidePanel is closed \r\n\t\t};\r\n\t\tvar displaySignInUser = function(user) {//if user is null displays signIn icon+\"Sign In\" otherwise displays user\r\n\t\t\tvar browserW = FL.common.getBrowserWidth();\r\n\t\t\t// var htmlToInject = '<div style=\"line-height:2.2em;\"><span id=\"_signInDomain\" class=\"small hidden-xs\" style=\"margin-left:2%;\" >'+\r\n\t\t\t// \t\t\t\t\t\t'Welcome to FrameLink: support@framelink.co App:'+  FL.domain + \" / \"+browserW +\r\n\t\t\t// \t\t\t\t\t'</span>'+\r\n\t\t\t// \t\t\t\t\t'<a class=\"pull-right\" href=\"javascript:FL.login.signIn()\" style=\"margin-right:2%;\">'+\r\n\t\t\t// \t\t\t\t\t\t'<img src=\"FL_ui/img/signIn.png\">'+\r\n\t\t\t// \t\t\t\t\t\t'<span id=\"_signIn\" style=\"font-size: 1.2em;\"> Sign In</span>'+\r\n\t\t\t// \t\t\t\t\t'</a>'+\r\n\t\t\t// \t\t\t\t'</div>';\r\n\t\t\tvar htmlToInject = '<span id=\"_signInDomain\" class=\"small\" style=\"margin-left:2%;line-height:2.2em; display:inline;float:left\" >'+\r\n\t\t\t\t\t\t\t\t\t'Welcome to FrameLink: support@framelink.co App:'+  FL.domain + \" / \"+browserW +\r\n\t\t\t\t\t\t\t\t'</span>'+\r\n\t\t\t\t\t\t\t\t'<a class=\"pull-right\" href=\"javascript:FL.login.signIn()\" style=\"margin-right:2%;line-height:2.2em; display:inline;float:left\">'+\r\n\t\t\t\t\t\t\t\t\t'<img src=\"FL_ui/img/signIn.png\">'+\r\n\t\t\t\t\t\t\t\t\t'<span id=\"_signIn\" style=\"font-size: 1.2em;\"> Sign In</span>'+\r\n\t\t\t\t\t\t\t\t'</a>';\t\t\t\t\t\r\n\t\t\tif(user) {\r\n\t\t\t\t// htmlToInject = '<div style=\"line-height:2.2em;\"><span class=\"small\" style=\"margin-left:2%;\">'+\r\n\t\t\t\t// \t\t\t\t\t\t'Welcome to FrameLink: support@framelink.co App:' + FL.domain + \" / \"+browserW +\r\n\t\t\t\t// \t\t\t\t\t'</span>'+\r\n\t\t\t\t// \t\t\t\t\t// '<a class=\"pull-right text-muted\" href=\"javascript:FL.signIn()\" style=\"margin-right:12em\">'+\r\n\t\t\t\t// \t\t\t\t\t'<a class=\"pull-right \" href=\"javascript:FL.login.signIn()\" style=\"margin-right:2%\">'+\r\n\t\t\t\t// \t\t\t\t\t\t'<i  class=\"glyphicon glyphicon-user\"></i>'+\r\n\t\t\t\t// \t\t\t\t\t\t'<span id=\"_signIn\" style=\"font-size: 1.2em;\"> '+ user +'</span>'+\r\n\t\t\t\t// \t\t\t\t\t'</a>'+\r\n\t\t\t\t// \t\t\t\t'</div>';\r\n\t\t\t\thtmlToInject = '<span class=\"small\" style=\"margin-left:2%;line-height:2.2em; display:inline;float:left\">'+\r\n\t\t\t\t\t\t\t\t\t'Welcome to FrameLink:' + FL.domain + \" / \"+browserW +\r\n\t\t\t\t\t\t\t\t'</span>'+\r\n\t\t\t\t\t\t\t\t// '<a class=\"pull-right text-muted\" href=\"javascript:FL.signIn()\" style=\"margin-right:12em\">'+\r\n\t\t\t\t\t\t\t\t'<a class=\"pull-right \" href=\"javascript:FL.login.signIn()\" style=\"margin-right:2%;line-height:2.2em; display:inline;float:left\">'+\r\n\t\t\t\t\t\t\t\t\t'<i  class=\"glyphicon glyphicon-user\"></i>'+\r\n\t\t\t\t\t\t\t\t\t'<span id=\"_signIn\" style=\"font-size: 1.2em;\"> '+ user +'</span>'+\r\n\t\t\t\t\t\t\t\t'</a>';\r\n\t\t\t}\r\n\t\t\tFL.domInject(\"_login\",htmlToInject );\r\n\t\t};\r\n\t\tvar logOutMenu = function(){//displays the menu and home page for logout status\r\n\t\t\tFL.common.printToConsole(\"---------------------------------------------------------->logOutMenu\");\r\n\t\t\tvar loginMenu = FL.menu.createMenu({jsonMenu:{\"menu\":[{\"title\":\"\",\"uri\":\"#\"}]}});//FL.oMenu is a global defined  in FLMain.js\r\n\t\t\tloginMenu.menuRefresh();\r\n\t\t\tFL.common.clearSpaceBelowMenus();\r\n\t\t\tFL.domInject(\"_placeHolder\",FL.login.defaultPageOnLogout );\r\n\t\t};\r\n\t\tvar loginDefaultMenu_and_homePage = function(loginObject){//after user creation in server we need to display the menu and home page for logins of new users (defaults for menu and homepage)\r\n\t\t\t// var loginMenu = FL.menu.createMenu({jsonMenu:FL.oMenu});//FL.oMenu is a global defined  in FLMain.js\r\n\t\t\t// loginMenu.menuRefresh();\r\n\t\t\t$.Topic( 'signInDone' ).publish( true ); //informs FL.menu that edition is allowed\r\n\t\t\t$.Topic( 'jsonMenuUpdate' ).publish( FL.clone(FL.oMenu) );//broadcast that will be received by FL.menu to update jsonMenu\r\n\r\n\t\t\tvar pos = FL.login.token.userName.indexOf(\"@\");\r\n\t\t\tvar shortUserName = FL.login.token.userName.substring(0,pos);\r\n\t\t\tvar templateFunction = _.template(FL.login.defaultPage);\r\n\t\t\tvar templateArg = {appDescription:\"default app\", userName:\"\", shortUserName:shortUserName};\r\n\t\t\tvar homeHTML = templateFunction(templateArg);\r\n\r\n\t\t\tlocalStorage.login = JSON.stringify(loginObject);\r\n\t\t\t$('#trigger1').show();$('#trigger2').show();$('#trigger3').show();\r\n\t\t\tFL.common.clearSpaceBelowMenus();\r\n\t\t\tFL.domInject(\"_placeHolder\",homeHTML );\r\n\t\t\tFL.domain = FL.login.token.appDescription;\r\n\t\t\tdisplaySignInUser(loginObject.email);\r\n\t\t};\r\n\t\tvar getLoginObject = function(){\r\n\t\t\tvar email = $('#getStarted_email').val();\r\n\t\t\temail = email.trim();\r\n\t\t\tvar password = $('#getStarted_password').val();\r\n\t\t\tpassword = password.trim();\r\n\t\t\treturn {email:email,password:password};\r\n\t\t};\r\n\t\tvar setupApp = function(menuData,homeHTML,loginObject){\r\n\t\t\t$.Topic( 'jsonMenuUpdate' ).publish( menuData.oMenu );//broadcast that will be received by FL.menu to update jsonMenu\r\n\t\t\tFL.common.clearSpaceBelowMenus();\r\n\t\t\tFL.domInject(\"_placeHolder\",homeHTML );\r\n\r\n\t\t\tFL.domain = FL.login.token.appDescription; //test with \"jojo\"+loginObject.email;\r\n\t\t\t\r\n\t\t\tlocalStorage.storedMenu  = JSON.stringify(menuData.oMenu);\r\n\t\t\tlocalStorage.style = menuData.style;\r\n\t\t\tlocalStorage.fontFamily = menuData.fontFamily;\r\n\t\t\tresetStyle(true);\r\n\t\t\tlocalStorage.login = JSON.stringify(loginObject);\r\n\t\t\t$.Topic( 'signInDone' ).publish( true );\r\n\t\t\trecoverLastMenu();//recover locally saved menu and informs FL.menu about the new menu if any\r\n\t\t\tdisplaySignInUser(loginObject.email);\r\n\t\t};\r\n\t\tvar loginDialogs = function(loginObject){\r\n\t\t\tvar def = $.Deferred();\r\n\r\n\t\t\tvar masterDetailItems = {\r\n\t\t\t\tmaster:{email:loginObject.email,password:loginObject.password},\r\n\t\t\t\tdetail:{} //format is array with {attribute:<attribute name>,description:<attr description>,statement;<phrase>}\r\n\t\t\t};\r\n\t\t\t// FL.common.makeModal(\"B\",\" FrameLink Login\",\"loginTemplate\",{icon:\"user\",button1:\"Logout\",button2:\"Login\"},function(result){// \"Cancel and \"Ok\" will be assumed with result = true for \"Ok\"\r\n\t\t\tvar btn1Caption = \"Cancel\";//if it enters in logout mode the first button is \"Cancel\"\r\n\t\t\tif(FL.fl.getsId())\r\n\t\t\t\tbtn1Caption = \"Logout\";//if it enters in loggedin mode the first button is \"Logout\"\r\n\t\t\tFL.common.editMasterDetail(\"B\",\" Sign in to FrameLink\",\"loginTemplate\",masterDetailItems,{type:\"primary\", icon:\"user\",button1:btn1Caption,button2:\"Sign in\"},function(result){\r\n\t\t\t\tif(result){//user choosed login\r\n\t\t\t\t\tvar email = $('#login_email').val();\r\n\t\t\t\t\tvar password = $('#login_password').val();\r\n\t\t\t\t\tvar spinner=FL.common.loaderAnimationON('spinnerDiv');\r\n\t\t\t\t\tvar loginPromise = FL.API.loadDefaultApp({email:email,password:password,domain:null});\r\n\t\t\t\t\tloginPromise.done(function(menuData,homeHTML){\r\n\t\t\t\t\t\tsetupApp(menuData,homeHTML,{email:email,password:password,domain:null});\r\n\t\t\t\t\t\t$('#trigger1').show();$('#trigger2').show();$('#trigger3').show();\r\n\t\t\t\t\t\tvar okToContinue = true;\r\n\t\t\t\t\t\tspinner.stop();\r\n\t\t\t\t\t\treturn def.resolve(okToContinue,loginObject);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tloginPromise.fail(function(err){\r\n\t\t\t\t\t\tspinner.stop();\r\n\t\t\t\t\t\tif(err.code == 1 || err.code == 5){//user does not exist or wrong password\r\n\t\t\t\t\t\t\tFL.common.makeModalInfo(\r\n\t\t\t\t\t\t\t\t\"Invalid Email/password.<br> - If you are an existing user please correct your EMail/password.<br>\" +\r\n\t\t\t\t\t\t\t\t\" - If you are a <strong>new user</strong> please press <strong>'Logout'</strong> and then \" +\r\n\t\t\t\t\t\t\t\t\"<strong>'Get started'</strong> button.<br>\", function(){\r\n\t\t\t\t\t\t\t\tFL.common.printToConsole(\"makeModalInfo --->pressed 'Ok' after Invalid Email/password email=\"+loginObject.email);\r\n\t\t\t\t\t\t\t\treturn def.resolve(false,loginObject);//true ==>continue false=>repeat\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\talert(\"FLlogin2.js loginDialogs >>>>> access FAILURE <<<<< ERROR ->\"+err.code+\" - \"+err.message);    \t\t\r\n\t\t\t\t\t\t\treturn def.reject(err);\r\n\t\t\t\t    \t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{//the user choosed Cancel or Logout (it is the same button)\r\n\t\t\t\t\tif (btn1Caption == \"Cancel\") {\t\t\t\t\r\n\t\t\t\t\t\treturn def.resolve(true,loginObject);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar disconnectPromise = FL.API.disconnect();\r\n\t\t\t\t\t\tdisconnectPromise.then(function(){\r\n\t\t\t\t\t\t\tlogOutMenu();//displays menu and homepage for logout status\r\n\t\t\t\t\t\t\tFL.login.signOut();\r\n\t\t\t\t\t\t\treturn def.resolve(true,loginObject);\r\n\t\t\t\t\t\t},function(err){return def.reject(err);});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});//OK\t\r\n\t\t\treturn def.promise();\r\n\t\t};\r\n\t\tvar getStartedDialogs = function(loginObject){\r\n\t\t\tvar def = $.Deferred();\r\n\t\t\tvar masterDetailItems = {\r\n\t\t\t\tmaster:{eMail:loginObject.eMail,password:loginObject.password},\r\n\t\t\t\tdetail:{}\r\n\t\t\t};\r\n\t\t\tFL.common.editMasterDetail(\"B\",\" Get started with FrameLink\",\"getStartedTemplate\",masterDetailItems,{type:\"primary\", icon:\"thumbs-up\",button1:\"Cancel\",button2:\"Start now\"},function(result){\r\n\t\t\t\tif(result){//user choosed login\r\n\t\t\t\t\tvar loginObject  = getLoginObject();\r\n\t\t\t\t\tif(loginObject.email.length>0 && loginObject.password.length === 0){\r\n\t\t\t\t\t\tFL.common.makeModalInfo('You must introduce a password to sign up !',function(){\r\n\t\t\t\t\t\t\tFL.common.printToConsole(\"getStartedDialogs-->missing password for email=\"+loginObject.email+\" !!!\");\r\n\t\t\t\t\t\t\tdef.resolve(false,loginObject);//true ==>continue false=>repeat\t\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}else if(loginObject.email.length === 0 && loginObject.password.length === 0){\r\n\t\t\t\t\t\tFL.common.printToConsole(\"getStartedDialogs-->sign up for trial\");\r\n\t\t\t\t\t\t// TO BE DONE\r\n\t\t\t\t\t\t// loginPromise = FL.API.prepareTrialApp().then(function(){return appSetup(loginObject);})\r\n\t\t\t\t\t\t\t// .then(function(){return def.resolve();},function(err){return def.reject(err);});\r\n\r\n\t\t\t\t\t\tdef.resolve(true);//true ==>continue false=>repeat\t\r\n\t\t\t\t\t}else if(loginObject.email.length >0  && loginObject.password.length > 0){//a potencial new user\r\n\t\t\t\t\t\tFL.common.printToConsole(\"getStartedDialogs-->sign up for email=\"+loginObject.email+\"/\"+loginObject.password);\r\n\t\t\t\t\t\tvar newUserPromise=newUserAccess( loginObject );\r\n\t\t\t\t\t\tnewUserPromise.done(function(userWasCreated){\r\n\t\t\t\t\t\t\tif(userWasCreated){\r\n\t\t\t\t\t\t\t\tFL.common.printToConsole(\"getStartedDialogs ->newUserAccess-> new user \" + loginObject.email +\" successfully created!\");\r\n\t\t\t\t\t\t\t\tloginDefaultMenu_and_homePage(loginObject);//default for new users\r\n\t\t\t\t\t\t\t\tdef.resolve(true);//true ==>continue false=>repeat\t\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tFL.common.printToConsole(\"getStartedDialogs ->newUserAccess-> user \" + loginObject.email + \" alread exists !!!\");\r\n\t\t\t\t\t\t\t\tdef.resolve(false,loginObject);//true ==>continue false=>repeat\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tnewUserPromise.fail(function(err){alert(\"getStartedDialogs --> error in newUserAccess for \" + loginObject.email + \" !!!!\");});\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{//the user choosed logout\r\n\t\t\t\t\tFL.common.printToConsole(\"getStartedDialogs-->cancel\");\r\n\t\t\t\t\treturn def.resolve(true);////true ==>continue false=>repeat\t\t\r\n\t\t\t\t}\r\n\t\t\t});//OK\t\r\n\t\t\treturn def.promise();\r\n\t\t};\r\n\t\tvar newUserAccess = function(loginObject){//when login email is valid and other data acceptable - {email:email,userName:userName,password:password};\r\n\t\t\t// loginObject = {email:email,userName:userName,password:password};\r\n\t\t\tvar def = $.Deferred();\r\n\t\t\tvar loginPromise = null;\r\n\t\t\t// check if the user exists - if it does not exist => creates it.\r\n\t\t\tFL.common.printToConsole(\"newUserAccess not a guest -------------------------------------------------------> checks if user exists\");\r\n\t\t\tvar spinner=FL.common.loaderAnimationON('spinnerDiv');\r\n\t\t\tvar existingUserPromise=FL.API.isUserExist(loginObject.email);\r\n\t\t\texistingUserPromise.done(function(exist){\r\n\t\t\t\tFL.common.printToConsole(\"newUserAccess existingUserPromise.done-------------------------------->next will text exist !!!\");\r\n\t\t\t\tif(!exist){//the user does not exist we can create-it\r\n\t\t\t\t\tFL.common.printToConsole(\"newUserAccess existingUserPromise.done----------------------------> unexisting user!. We can create it\");\r\n\t\t\t\t\tvar userName = FL.common.stringBeforeLast(loginObject.email,\"@\");\r\n\t\t\t\t\tcreateUserPromise = FL.API.createUserAndDefaultApp(loginObject.email,loginObject.password, \"First app of \" + userName)\r\n\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\tspinner.stop();\r\n\t\t\t\t\t\t\tFL.common.printToConsole(\"FLlogin2 ->newUserAccess-> success creating a new user! ->now we create _histoMail\");\r\n\t\t\t\t\t\t\treturn def.resolve(true);//true ==>user was created\r\n\t\t\t\t\t\t\t},function(err){FL.common.printToConsole(\"FLlogin2newUserAccess->fail\");return def.reject(err);});\r\n\t\t\t\t}else{//user exist !!!\r\n\t\t\t\t\tspinner.stop();\r\n\t\t\t\t\tFL.common.makeModalInfo(\"Cannot sign up because \" + loginObject.email + \" is already registered.<br> - If \" + loginObject.email + \" is your Email, please choose <strong>'Sign In'</strong> to enter as an existing user.\",function(){\r\n\t\t\t\t\t\tFL.common.printToConsole(\"FLlogin2newUserAccess->makeModalInfo --->pressed 'Ok' after existing email message for email=\"+loginObject.email);\r\n\t\t\t\t\t\treturn def.resolve(false);//false ==>user not created because it already exists\t\t\t\t\t\t\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\texistingUserPromise.fail(function(err){\r\n\t\t\t\tspinner.stop();\r\n\t\t\t\talert(\"newUserAccess --> error while checking if user \" + loginObject.email + \" exists !!!! err=\"+JSON.stringify(err));\r\n\t\t\t\treturn def.reject(\"Error while checking if user \" + loginObject.email + \" exists!\");\r\n\t\t\t});\r\n\t\t\treturn def.promise();\r\n\t\t};\r\n\t\tvar recoverLastTourActiveStatus = function() {//recover locally saved menu and informs FL.menu about the new menu if any\r\n\t\t\tvar lastTourStatusStr = localStorage.getItem(\"storedTourStatus\");\r\n\t\t\tvar lastTourStatusObject = null;\r\n\t\t\tif(lastTourStatusStr) {\r\n\t\t\t\tlastTourStatusObject = JSON.parse(lastTourStatusStr);\r\n\t\t\t\tFL.tourActive = lastTourStatusObject.tourActive;\r\n\t\t\t\tFL.showTourStep0 = false;\r\n\t\t\t\t// alert(\"recoverLastTourActiveStatus: last Tour Status FL.tourActive =\"+FL.tourActive);\r\n\t\t\t}else{\r\n\t\t\t\tFL.tourActive = false;\r\n\t\t\t\tFL.showTourStep0 = true;\r\n\t\t\t\t// alert(\"recoverLastTourActiveStatus: no lastTourStatusStr was saved !!!!\");\r\n\t\t\t}\r\n\t\t};\r\n\t\tvar resetStyle = function(is_logIn) {//if is_login = true display last locally saved style else display FLreadable.css\r\n\t\t\t//if is_LogIn = true =>soft reset - this method recovers style and fontFamily from  localStorage and sets it on use\r\n\t\t\t//if is_LogIn = false =>hard reset - this method forces currentStyle = \"readable\" and currentFontFamily = \"helvetica\" settinmg it to use\r\n\t\t\tvar lastStyleStr = localStorage.style;// Retrieve last saved style ex.red or spacelab\r\n\t\t\tvar lastFontFamilyStr = localStorage.fontFamily;// Retrieve last saved fontFamily ex.impact or georgia\t\r\n\r\n\t\t\t// var\tcurrentStyle = \"readable\";//default style\r\n\t\t\t// var\tcurrentFontFamily = \"helvetica\";//default font\r\n\t\t\tvar\tcurrentStyle = this.defaultStyle;\r\n\t\t\tvar\tcurrentFontFamily = this.defaultFontFamily;\r\n\t\t\tif (is_logIn) {//a soft reset - the content from local storage will be used. Otherwise force default values\r\n\t\t\t\tif(lastStyleStr)\r\n\t\t\t\t\tcurrentStyle = lastStyleStr;\r\n\t\t\t\tif(lastFontFamilyStr)\r\n\t\t\t\t\tcurrentFontFamily = lastFontFamilyStr;\r\n\t\t\t}\r\n\t\t\tFL.common.setStyleAndFont(currentStyle,currentFontFamily);\r\n\t\t\tlocalStorage.style = currentStyle;\r\n\t\t\tlocalStorage.fontFamily = currentFontFamily;\r\n\t\t\tFL.currentStyle = currentStyle; //to be compatible with touring - before code review\r\n\t\t\tFL.currentFontFamily = currentFontFamily; //to be compatible with touring - before code review\r\n\t\t\t$(\"#_css\").text(FL.currentStyle);\r\n\t\t\t$.Topic( 'styleChange' ).publish( FL.currentStyle );//broadcast that will be received by FL.tour\r\n\t\t\t$.Topic( 'fontChange' ).publish( FL.currentFontFamily );//broadcast that will be received by FL.tour\r\n\t\t};\r\n\t\treturn{\r\n\t\t\ttest:\"juakim\",\r\n\t\t\ttoken: {fl:null},\r\n\t\t\tappToken: {},\r\n\t\t\tdefaultStyle: \"readable\",\r\n\t\t\tdefaultFontFamily: \"helvetica\",\r\n\t\t\tpermissionToAddMenu: true,\r\n\t\t\tdefaultMenu: {\r\n\t\t\t\t// \"menu\" : [\r\n\t\t\t\t// \t{\r\n\t\t\t\t// \t\t\"title\" : \"User Administration\",//0\r\n\t\t\t\t// \t\t\"uri\":\"javascript:FL.links.userAdministration()\"\r\n\t\t\t\t// \t}\r\n\t\t\t\t// ]\r\n\t\t\t\t\"menu\" : [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"title\" : \"Settings\",//0\r\n\t\t\t\t\t\t\"uri\":\"#\",\t\t\t\t\r\n\t\t\t\t\t\t\"menu\":[\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\"title\" : \"User Administration\",//0\r\n\t\t\t\t\t\t\t\t\"uri\":\"javascript:FL.links.userAdministration()\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\"title\" : \"Preferences\",//0\r\n\t\t\t\t\t\t\t\t\"uri\":\"#\",\r\n\t\t\t\t\t\t\t\t\"menu\":[\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\"title\" : \"Styles and Fonts\",//0\r\n\t\t\t\t\t\t\t\t\t\t\"uri\":\"javascript:FL.links.editStylesAndFonts()\"\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\"title\" : \"Application Settings\",//0\r\n\t\t\t\t\t\t\t\t\t\t\"uri\":\"javascript:FL.links.appSettings()\"\r\n\t\t\t\t\t\t\t\t\t},\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\"title\" : \"Home Page\",//0\r\n\t\t\t\t\t\t\t\t\t\t\"uri\":\"javascript:FL.links.pageEditor('home')\"\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\"title\" : \"emails/Newsletter templates\",\r\n\t\t\t\t\t\t\t\t\"uri\":\"#\",\r\n\t\t\t\t\t\t\t\t\"menu\":[\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\"title\" : \"Newsletter templates\",//0\r\n\t\t\t\t\t\t\t\t\t\t\"uri\":\"javascript:FL.links.newsletterEditor()\"\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\"title\" : \"Display rejected list\",//0\r\n\t\t\t\t\t\t\t\t\t\t\"uri\":\"javascript:FL.links.getMandrillRejectListForSender()\"\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\"title\" : \"remove jojo from rejected list\",//0\r\n\t\t\t\t\t\t\t\t\t\t\"uri\":\"javascript:FL.links.setMandrillDeleteFromReject(['jojo@mailinator.com'])\"\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\"title\" : \"remove zwnfabhn from rejected list\",//0\r\n\t\t\t\t\t\t\t\t\t\t\"uri\":\"javascript:FL.links.setMandrillDeleteFromReject(['zwnfabhn@sharklasers.com'])\"\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\"title\" : \"email Statistics\",//0\r\n\t\t\t\t\t\t\t\t\t\t\"uri\":\"javascript:FL.links.displayStatistics()\"\r\n\t\t\t\t\t\t\t\t\t},\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t},\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\"title\" : \"Grids\",//0\r\n\t\t\t\t\t\t\t\t\"uri\":\"#\",\r\n\t\t\t\t\t\t\t\t\"menu\":[\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\"title\" : \"Create Grid\",//0\r\n\t\t\t\t\t\t\t\t\t\t\"uri\":\"javascript:FL.grid.createGrid()\"\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\"title\" : \"Import CSV Spreadsheet\",//0\r\n\t\t\t\t\t\t\t\t\t\t\"uri\":\"javascript:javascript:FL.grid.importGrid()\"\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t}\t\t\t\t\t\t\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t//defaultPage HTML can contain the variables: <%= appDescription %>, <%= shortUserName %>, <%= userName %> (used by FL.API._restorePage)\r\n\t\t\tdefaultPage: \"<div class='jumbotron'>\" +\r\n\t\t\t\t\t\t\t\"<h1>Welcome</h1>\" +\r\n\t\t\t\t\t\t\t\"<p>Hello <strong><%= shortUserName %></strong>, your are logged into FrameLink !</p>\" +\r\n\t\t\t\t\t\t\t\"<p>Application description: <%= appDescription %></p>\" +\r\n\t\t\t\t\t\t\"</div>\",\r\n\t\t\tdefaultPageOnLogout: \"<div class='jumbotron'>\" +\r\n\t\t\t\t\t\t\t\t\t\"<h1>FrameLink Platform</h1>\" +\r\n\t\t\t\t\t\t\t\t\t\"<p>Please <strong>Sign In</strong> as a designer (upper right corner) or choose \" +\r\n\t\t\t\t\t\t\t\t\t\"<strong>Get started</strong> if you are a first time user.</p>\" +\r\n\t\t\t\t\t\t\t\t\t\"<p>\" +\r\n\t\t\t\t\t\t\t\t\t\t// \"<a href='#' class='btn btn-primary btn-large' onclick='FL.showTourStep0 = true; FL.tourIn();'>Tour</a>\" +\r\n\t\t\t\t\t\t\t\t\t\t\"<a href='#' class='btn btn-primary btn-large' onclick='FL.login.getStarted();'>Get started with a FREE beta account</a>\" +\r\n\t\t\t\t\t\t\t\t\t\"</p>\" +\r\n\t\t\t\t\t\t\t\t\"</div>\",\t\t\t\t\t\r\n\t\t\t// fl: new flMain(),//FL.login.fl\r\n\t\t\tfl: null,//FL.login.fl\r\n\t\t\tfa: null,\r\n\t\t\temailContentTemplate:null, //used on FLmenulinks - if not null it is ready to send newsletter\r\n\t\t\temailTemplateName:null,\r\n\t\t\temailImagesArray:[], //used on FLmenulinks - getHTMLContent to prepare a Mandrill array with all base64 images\r\n\t\t\tServerByPass:true,\r\n\t\t\tsignOut: function(){//saves logout in local storage ->hide slide panels  ->updates upper right corner display\r\n\t\t\t\t// localStorage.setItem(\"login\", \"\");\r\n\t\t\t\t// FL.login.signOut()\r\n\t\t\t\t$('#trigger1').hide();$('#trigger2').hide();$('#trigger3').hide();\r\n\t\t\t\tlocalStorage.login = \"\";\r\n\r\n\t\t\t\tFL.domain = FL.login.token.appDescription; //test with \"jojo\"+loginObject.email;\r\n\r\n\t\t\t\t// localStorage.storedMenu = JSON.stringify(FL.oMenu);//initial menu\r\n\t\t\t\t$.Topic( 'signInDone' ).publish( false );//broadcast that will be received by FL.menu to update .editable to false\r\n\t\t\t\t// $.Topic( 'jsonMenuUpdate' ).publish( FL.clone(FL.oMenu) );//broadcast that will be received by FL.menu to update jsonMenu\r\n\t\t\t\t$.Topic( 'sidePanelOpened' ).publish( false ); //informs FL.menu that sidePanel is closed \r\n\r\n\t\t\t\t// loadCSS(\"FLreadable.css\");\r\n\t\t\t\tresetStyle(true);\r\n\t\t\t\tdisplaySignInUser();//displays no user, just icon and \"Sign In\" link\r\n\t\t\t\tFL.mix(\"Entering\",{});\r\n\t\t\t},\r\n\t\t\tcheckSignIn:function() {\r\n\t\t\t\t//checkSignIn2 ->recover last saved loginObject and:\r\n\t\t\t\t//\tif user/password exists ->logs in -> shows slide panels ->updates upper right corner\r\n\t\t\t\t//\tif not keeps user in logout mode. -> hide slide panels  ->updates upper right corner\r\n\t\t\t\tvar def = $.Deferred();\r\n\r\n\t\t\t\tmessageEnabler.getInstance();//a singleton to listen for \"slidePanel\" broadcasts \r\n\t\t\t\tvar loggedIn = false;\r\n\t\t\t\tvar lastLogin = null;\r\n\t\t\t\tvar htmlToInject = null;\r\n\t\t\t\tvar user = null;\r\n\t\t\t\tif (typeof(Storage) !== undefined) {//browser supports storage\r\n\t\t\t\t\tvar lastLoginStr = localStorage.login;// Retrieve format {email:x1,userName:x2,password:x3};\r\n\t\t\t\t\tif (typeof lastLoginStr === \"undefined\" || lastLoginStr === \"\"){\r\n\t\t\t\t\t\tlastLoginStr = null;\r\n\t\t\t\t\t\tFL.API.clearServerToken();//sets token as null\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(lastLoginStr !== null) {//user/password exist\r\n\t\t\t\t\t\tvar lastLoginObj = JSON.parse(lastLoginStr);\r\n\t\t\t\t\t\tvar spinner=FL.common.loaderAnimationON('spinnerDiv');\r\n\t\t\t\t\t\tvar loadDefaultAppPromise = FL.API.loadDefaultApp(lastLoginObj)//no loginAcess, no appSetup\r\n\t\t\t\t\t\t\t.then(function(menuData,homeHTML){\r\n\t\t\t\t\t\t\t\tspinner.stop();\r\n\t\t\t\t\t\t\t\tsetupApp(menuData,homeHTML,lastLoginObj);\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t$('#trigger1').show();$('#trigger2').show();$('#trigger3').show();\r\n\t\t\t\t\t\t\t\t$.Topic( 'signInDone' ).publish( true ); //informs FL.menu that edition is allowed\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\treturn def.resolve();\r\n\t\t\t\t\t\t\t},function(err){\r\n\t\t\t\t\t\t\t\tif(err.code == 1){//user does not exist\r\n\t\t\t\t\t\t\t\t\tspinner.stop();\r\n\t\t\t\t\t\t\t\t\tFL.login.signOut();//saves logout in local storage ->hide slide panels  ->updates upper right corner display\r\n\t\t\t\t\t\t\t\t\tlogOutMenu();//displays menu and homepage for logout status\r\n\t\t\t\t\t\t\t\t\treturn def.resolve();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\talert(\"checkSignIn ->access ERROR ->\"+err.code+\" - \"+err.message);\r\n\t\t\t\t\t\t\t\treturn def.reject(\"Login access error err=\"+JSON.stringify(err));\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}else{//the status is signed out\r\n\t\t\t\t\t\tlogOutMenu();//displays menu and homepage for logout status\r\n\t\t\t\t\t\tFL.login.signOut();//saves logout in local storage ->hide slide panels  ->updates upper right corner display\r\n\t\t\t\t\t\treturn def.resolve();\r\n\t\t\t\t\t}\t\t\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\tFL.common.makeModalInfo('No menu persistence because your browser does not support Web Storage...',function(){\r\n\t\t\t\t\t\treturn def.reject(\"Unsupported browser\");\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn def.promise();\r\n\t\t\t},\r\n\t\t\tsignIn: function() {//called from href in first line of screen (htmlToInject)\r\n\t\t\t\t// http://www.sitepoint.com/11-ways-to-enhance-your-web-application/\r\n\t\t\t\t// Use cases:\r\n\t\t\t\t// \t\tNew user\r\n\t\t\t\tFL.common.printToConsole(\"enter signIn\");\r\n\t\t\t\t$.Topic( 'inLogOnProcess' ).publish( true );//broadcast that will be received by FL.menu to update .editable to false\r\n\t\t\t\tif(FL.is_sidePanelOpen){\r\n\t\t\t\t\tFL.common.makeModalInfo(\"Please close FrameLink side panel before changing your Sign In/Sign Out status\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif (typeof(Storage) !== undefined) {//browser supports storage\r\n\t\t\t\t\t\tvar loginObject =  {email:\"\",userName:\"\",password:\"\"};\r\n\t\t\t\t\t\tvar lastLoginStr = localStorage.getItem(\"login\");\r\n\t\t\t\t\t\tif (lastLoginStr == \"undefined\")\r\n\t\t\t\t\t\t\tlastLoginStr = undefined;\r\n\t\t\t\t\t\tif(lastLoginStr) {\r\n\t\t\t\t\t\t\tloginObject=JSON.parse(lastLoginStr);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar loginOkPromise = loginDialogs(loginObject);\r\n\t\t\t\t\t\tloginOkPromise.done(function(loginOk,loginObject){\r\n\t\t\t\t\t\t\tFL.common.printToConsole(\"signIn --------------->loginOk=\"+loginOk+\" Email=\"+loginObject.email);//loginOk ==>go false=>repeat\r\n\t\t\t\t\t\t\tif(!loginOk){\r\n\t\t\t\t\t\t\t\tif(loginObject.email.length>0){\r\n\t\t\t\t\t\t\t\t\tlocalStorage.login = JSON.stringify(loginObject);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tFL.login.signIn();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tloginOkPromise.fail(function(err){\r\n\t\t\t\t\t\t\talert(\"Login access error err=\"+JSON.stringify(err));\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t// BootstrapDialog.alert('No menu persistence because your browser does not support Web Storage...');\r\n\t\t\t\t\t\tFL.common.makeModalInfo('No menu persistence because your browser does not support Web Storage...');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetStarted: function(loginObject){\r\n\t\t\t\tif(!loginObject)// the first call is done from FL.login.defaultPageOnLogout with onclick='FL.login.getStarted();'\r\n\t\t\t\t\tloginObject  = {eMail:\"\",password:\"\"};\r\n\t\t\t\tvar getStartedPromise = getStartedDialogs(loginObject);\r\n\t\t\t\tgetStartedPromise.done(function(continueOk,loginObject){\r\n\t\t\t\t\tFL.common.printToConsole(\"getStarted --------------->continueOk=\" + continueOk);//continueOk ==>go false=>repeat\r\n\t\t\t\t\tif(!continueOk){\r\n\t\t\t\t\t\tFL.login.getStarted(loginObject);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tgetStartedPromise.fail(function(err){\r\n\t\t\t\t\talert(\"Login access error err=\"+JSON.stringify(err));\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\thome:function(){\r\n\t\t\t\t// alert(\"the brand !!!\");\r\n\t\t\t\tvar loadAppPromise=FL.API.loadAppDataForSignInUser2();//gets data dictionary + main menu + style + fontFamily + home page\r\n\t\t\t\tloadAppPromise.done(function(menuData,homeHTML){\r\n\t\t\t\t\tFL.common.printToConsole(\"FL.login.home ---> homeHTML=\" + homeHTML);\r\n\t\t\t\t\t// FL.common.printToConsole(\"FL.login.home --------------------------------------------->first menu=\" + menuData.oMenu.menu[0].title);\t\t\t\t\r\n\t\t\t\t\tFL.common.clearSpaceBelowMenus();\r\n\t\t\t\t\tFL.domInject(\"_placeHolder\",homeHTML );\r\n\t\t\t\t});\t\r\n\t\t\t\tloadAppPromise.fail(function(err){\r\n\t\t\t\t\talert(\"FLpage_editor ->  --> after successfull connectUserToDefaultApp FAILURE in loadAppDataForSignInUser2 <<<<< error=\"+err);\r\n\t\t\t\t});\t\t\t\t\r\n\t\t\t},\r\n\t\t\tclearAllSettings: function(){//restore original menu in local storage and updates DOM status - called directly from DOM link\r\n\t            FL.common.makeModalConfirm(\"Your current edit menu will be lost and you will be logged out. Do you really want this ?\",\"Cancel\",\"OK\",function(result){\r\n\t                if(result){\r\n\t\t\t\t\t\tlocalStorage.clear();\r\n\t\t\t\t\t\t$.Topic( 'signInDone' ).publish( false );//broadcast that will be received by FL.menu to update .editable to false\r\n\t\t\t\t\t\t// $.Topic( 'jsonMenuUpdate' ).publish( FL.clone(FL.oMenu) );//broadcast that will be received by FL.menu to update jsonMenu\r\n\t                     FL.common.makeModalInfo('The full reset was done. <strong>Please Sign In again</strong>.');\r\n\t                     FL.login.checkSignIn(true);\r\n\t                }\r\n\t            });//OK\t\t\t\r\n\t\t\t},\r\n\t\t\tselectStyle: function() {\r\n\t\t\t\talert(\"selectStyle !\");\r\n\t\t\t}\r\n\t\t};\r\n\t})();\r\n\tFL[\"showTourStep0\"] = false;\r\n\t//FL.currentStyle is still used to communicate with Tour2\r\n});"]}